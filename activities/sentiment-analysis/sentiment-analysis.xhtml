<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title>Sentiment Analysis with NLTK</title>
      <meta name="copyright" content="Copyright © 2014 R. Alexander Miłowski"/>
      <meta name="holder" content="R. Alexander Miłowski"/>
      <meta name="creator" content="R. Alexander Miłowski"/>
      <meta name="pubdate" content="2014-09-01"/>
      <link rel="stylesheet" type="text/css" href="data:text/css;base64,Lyogc2xpZHkuY3NzCgogICBDb3B5cmlnaHQgKGMpIDIwMDUtMjAxMCBXM0MgKE1JVCwgRVJDSU0s&#xA;IEtlaW8pLCBBbGwgUmlnaHRzIFJlc2VydmVkLgogICBXM0MgbGlhYmlsaXR5LCB0cmFkZW1hcmss&#xA;IGRvY3VtZW50IHVzZSBhbmQgc29mdHdhcmUgbGljZW5zaW5nCiAgIHJ1bGVzIGFwcGx5LCBzZWU6&#xA;CgogICBodHRwOi8vd3d3LnczLm9yZy9Db25zb3J0aXVtL0xlZ2FsL2NvcHlyaWdodC1kb2N1bWVu&#xA;dHMKICAgaHR0cDovL3d3dy53My5vcmcvQ29uc29ydGl1bS9MZWdhbC9jb3B5cmlnaHQtc29mdHdh&#xA;cmUKKi8KYm9keQp7CiAgbWFyZ2luOiAwIDAgMCAwOwogIHBhZGRpbmc6IDAgMCAwIDA7CiAgd2lk&#xA;dGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIGNvbG9yOiBibGFjazsKICBiYWNrZ3JvdW5kLWNv&#xA;bG9yOiB3aGl0ZTsKICBmb250LWZhbWlseTogIkdpbGwgU2FucyBNVCIsICJHaWxsIFNhbnMiLCBH&#xA;aWxsU2Fucywgc2Fucy1zZXJpZjsKICBmb250LXNpemU6IDE0cHQ7Cn0KCmRpdi50b29sYmFyIHsK&#xA;ICBwb3NpdGlvbjogZml4ZWQ7IHotaW5kZXg6IDIwMDsKICB0b3A6IGF1dG87IGJvdHRvbTogMDsg&#xA;bGVmdDogMDsgcmlnaHQ6IDA7CiAgaGVpZ2h0OiAxLjJlbTsgdGV4dC1hbGlnbjogcmlnaHQ7CiAg&#xA;cGFkZGluZy1sZWZ0OiAxZW07CiAgcGFkZGluZy1yaWdodDogMWVtOyAKICBmb250LXNpemU6IDYw&#xA;JTsKICBjb2xvcjogcmVkOwogIGJhY2tncm91bmQtY29sb3I6IHJnYigyNDAsMjQwLDI0MCk7CiAg&#xA;Ym9yZGVyLXRvcDogc29saWQgMXB4IHJnYigxODAsMTgwLDE4MCk7Cn0KCmRpdi50b29sYmFyIHNw&#xA;YW4uY29weXJpZ2h0IHsKICBjb2xvcjogYmxhY2s7CiAgbWFyZ2luLWxlZnQ6IDAuNWVtOwp9Cgpk&#xA;aXYuaW5pdGlhbF9wcm9tcHQgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiAxMDAw&#xA;OwogIGJvdHRvbTogMS4yZW07CiAgd2lkdGg6IDEwMCU7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdi&#xA;KDIwMCwyMDAsMjAwKTsKICBvcGFjaXR5OiAwLjM1OwogIGJhY2tncm91bmQtY29sb3I6IHJnYigy&#xA;MDAsMjAwLDIwMCwgMC4zNSk7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgpkaXYuaW5pdGlhbF9wcm9t&#xA;cHQgcC5oZWxwIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCmRpdi5pbml0aWFsX3Byb21wdCBw&#xA;LmNsb3NlIHsKICB0ZXh0LWFsaWduOiByaWdodDsKICBmb250LXN0eWxlOiBpdGFsaWM7Cn0KCmRp&#xA;di5zbGlkeV90b2MgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB6LWluZGV4OiAzMDA7CiAgd2lk&#xA;dGg6IDYwJTsKICBtYXgtd2lkdGg6IDMwZW07CiAgaGVpZ2h0OiAzMGVtOwogIG92ZXJmbG93OiBh&#xA;dXRvOwogIHRvcDogYXV0bzsKICByaWdodDogYXV0bzsKICBsZWZ0OiA0ZW07CiAgYm90dG9tOiA0&#xA;ZW07CiAgcGFkZGluZzogMWVtOwogIGJhY2tncm91bmQ6IHJnYigyNDAsMjQwLDI0MCk7CiAgYm9y&#xA;ZGVyLXN0eWxlOiBzb2xpZDsKICBib3JkZXItd2lkdGg6IDJweDsKICBmb250LXNpemU6IDYwJTsK&#xA;fQoKZGl2LnNsaWR5X3RvYyAudG9jX2hlYWRpbmcgewogIHRleHQtYWxpZ246IGNlbnRlcjsKICB3&#xA;aWR0aDogMTAwJTsKICBtYXJnaW46IDA7CiAgbWFyZ2luLWJvdHRvbTogMWVtOwogIGJvcmRlci1i&#xA;b3R0b20tc3R5bGU6IHNvbGlkOwogIGJvcmRlci1ib3R0b20tY29sb3I6IHJnYigxODAsMTgwLDE4&#xA;MCk7CiAgYm9yZGVyLWJvdHRvbS13aWR0aDogMXB4Owp9CgpkaXYuc2xpZGUgewogIHotaW5kZXg6&#xA;IDIwOwogIG1hcmdpbjogMCAwIDAgMDsKICBwYWRkaW5nLXRvcDogMDsKICBwYWRkaW5nLWJvdHRv&#xA;bTogMDsKICBwYWRkaW5nLWxlZnQ6IDIwcHg7CiAgcGFkZGluZy1yaWdodDogMjBweDsKICBib3Jk&#xA;ZXItd2lkdGg6IDA7CiAgY2xlYXI6IGJvdGg7CiAgdG9wOiAwOwogIGJvdHRvbTogMDsKICBsZWZ0&#xA;OiAwOwogIHJpZ2h0OiAwOwogIGxpbmUtaGVpZ2h0OiAxMjAlOwogIGJhY2tncm91bmQtY29sb3I6&#xA;IHRyYW5zcGFyZW50Owp9CgpkaXYuYmFja2dyb3VuZCB7CiAgZGlzcGxheTogbm9uZTsKfQoKZGl2&#xA;LmhhbmRvdXQgewogIG1hcmdpbi1sZWZ0OiAyMHB4OwogIG1hcmdpbi1yaWdodDogMjBweDsKfQoK&#xA;ZGl2LnNsaWRlLnRpdGxlcGFnZSB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgpkaXYuc2xpZGUu&#xA;dGl0bGVwYWdlIGgxIHsKICBwYWRkaW5nLXRvcDogMTAlOwogIG1hcmdpbi1yaWdodDogMDsKfQoK&#xA;ZGl2LnNsaWRlIGgxIHsKICBwYWRkaW5nLWxlZnQ6IDA7CiAgcGFkZGluZy1yaWdodDogMjBwdDsK&#xA;ICBwYWRkaW5nLXRvcDogNHB0OwogIHBhZGRpbmctYm90dG9tOiA0cHQ7CiAgbWFyZ2luLXRvcDog&#xA;MDsKICBtYXJnaW4tbGVmdDogMDsKICBtYXJnaW4tcmlnaHQ6IDYwcHQ7CiAgbWFyZ2luLWJvdHRv&#xA;bTogMC41ZW07CiAgZGlzcGxheTogYmxvY2s7IAogIGZvbnQtc2l6ZTogMTYwJTsKICBsaW5lLWhl&#xA;aWdodDogMS4yZW07CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7Cn0KCmRpdi50b2MgewogIHBv&#xA;c2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IGF1dG87CiAgYm90dG9tOiA0ZW07CiAgbGVmdDogNGVt&#xA;OwogIHJpZ2h0OiBhdXRvOwogIHdpZHRoOiA2MCU7CiAgbWF4LXdpZHRoOiAzMGVtOwogIGhlaWdo&#xA;dDogMzBlbTsKICBib3JkZXI6IHNvbGlkIHRoaW4gYmxhY2s7CiAgcGFkZGluZzogMWVtOwogIGJh&#xA;Y2tncm91bmQ6IHJnYigyNDAsMjQwLDI0MCk7CiAgY29sb3I6IGJsYWNrOwogIHotaW5kZXg6IDMw&#xA;MDsKICBvdmVyZmxvdzogYXV0bzsKICBkaXNwbGF5OiBibG9jazsKICB2aXNpYmlsaXR5OiB2aXNp&#xA;YmxlOwp9CgpkaXYudG9jLWhlYWRpbmcgewogIHdpZHRoOiAxMDAlOwogIGJvcmRlci1ib3R0b206&#xA;IHNvbGlkIDFweCByZ2IoMTgwLDE4MCwxODApOwogIG1hcmdpbi1ib3R0b206IDFlbTsKICB0ZXh0&#xA;LWFsaWduOiBjZW50ZXI7Cn0KCmltZyB7CiAgaW1hZ2UtcmVuZGVyaW5nOiBvcHRpbWl6ZS1xdWFs&#xA;aXR5Owp9CgpwcmUgewogZm9udC1zaXplOiA4MCU7CiBmb250LXdlaWdodDogYm9sZDsKIGxpbmUt&#xA;aGVpZ2h0OiAxMjAlOwogcGFkZGluZy10b3A6IDAuMmVtOwogcGFkZGluZy1ib3R0b206IDAuMmVt&#xA;OwogcGFkZGluZy1sZWZ0OiAxZW07CiBwYWRkaW5nLXJpZ2h0OiAxZW07CiBib3JkZXItc3R5bGU6&#xA;IHNvbGlkOwogYm9yZGVyLWxlZnQtd2lkdGg6IDFlbTsKIGJvcmRlci10b3Atd2lkdGg6IHRoaW47&#xA;CiBib3JkZXItcmlnaHQtd2lkdGg6IHRoaW47CiBib3JkZXItYm90dG9tLXdpZHRoOiB0aGluOwog&#xA;Ym9yZGVyLWNvbG9yOiAjOTVBQkQwOwogY29sb3I6ICMwMDQyOEM7CiBiYWNrZ3JvdW5kLWNvbG9y&#xA;OiAjRTRFNUU3Owp9CgpsaSBwcmUgeyBtYXJnaW4tbGVmdDogMDsgfQoKYmxvY2txdW90ZSB7IGZv&#xA;bnQtc3R5bGU6IGl0YWxpYyB9CgppbWcgeyBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCB9&#xA;CgpwLmNvcHlyaWdodCB7IGZvbnQtc2l6ZTogc21hbGxlciB9CgouY2VudGVyIHsgdGV4dC1hbGln&#xA;bjogY2VudGVyIH0KLmZvb3Rub3RlIHsgZm9udC1zaXplOiBzbWFsbGVyOyBtYXJnaW4tbGVmdDog&#xA;MmVtOyB9CgphIGltZyB7IGJvcmRlci13aWR0aDogMDsgYm9yZGVyLXN0eWxlOiBub25lIH0KCmE6&#xA;dmlzaXRlZCB7IGNvbG9yOiBuYXZ5IH0KYTpsaW5rIHsgY29sb3I6IG5hdnkgfQphOmhvdmVyIHsg&#xA;Y29sb3I6IHJlZDsgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmUgfQphOmFjdGl2ZSB7IGNvbG9y&#xA;OiByZWQ7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lIH0KCmEge3RleHQtZGVjb3JhdGlvbjog&#xA;bm9uZX0KLm5hdmJhciBhOmxpbmsge2NvbG9yOiB3aGl0ZX0KLm5hdmJhciBhOnZpc2l0ZWQge2Nv&#xA;bG9yOiB5ZWxsb3d9Ci5uYXZiYXIgYTphY3RpdmUge2NvbG9yOiByZWR9Ci5uYXZiYXIgYTpob3Zl&#xA;ciB7Y29sb3I6IHJlZH0KCnVsIHsgbGlzdC1zdHlsZS10eXBlOiBzcXVhcmU7IH0KdWwgdWwgeyBs&#xA;aXN0LXN0eWxlLXR5cGU6IGRpc2M7IH0KdWwgdWwgdWwgeyBsaXN0LXN0eWxlLXR5cGU6IGNpcmNs&#xA;ZTsgfQp1bCB1bCB1bCB1bCB7IGxpc3Qtc3R5bGUtdHlwZTogZGlzYzsgfQpsaSB7IG1hcmdpbi1s&#xA;ZWZ0OiAwLjVlbTsgbWFyZ2luLXRvcDogMC41ZW07IH0KbGkgbGkgeyBmb250LXNpemU6IDg1JTsg&#xA;Zm9udC1zdHlsZTogaXRhbGljIH0KbGkgbGkgbGkgeyBmb250LXNpemU6IDg1JTsgZm9udC1zdHls&#xA;ZTogbm9ybWFsIH0KCmRpdiBkdAp7CiAgbWFyZ2luLWxlZnQ6IDA7CiAgbWFyZ2luLXRvcDogMWVt&#xA;OwogIG1hcmdpbi1ib3R0b206IDAuNWVtOwogIGZvbnQtd2VpZ2h0OiBib2xkOwp9CmRpdiBkZAp7&#xA;CiAgbWFyZ2luLWxlZnQ6IDJlbTsKICBtYXJnaW4tYm90dG9tOiAwLjVlbTsKfQoKCnAscHJlLHVs&#xA;LG9sLGJsb2NrcXVvdGUsaDIsaDMsaDQsaDUsaDYsZGwsdGFibGUgewogIG1hcmdpbi1sZWZ0OiAx&#xA;ZW07CiAgbWFyZ2luLXJpZ2h0OiAxZW07Cn0KCnAuc3ViaGVhZCB7IGZvbnQtd2VpZ2h0OiBib2xk&#xA;OyBtYXJnaW4tdG9wOiAyZW07IH0KCi5zbWFsbGVyIHsgZm9udC1zaXplOiBzbWFsbGVyIH0KLmJp&#xA;Z2dlciB7IGZvbnQtc2l6ZTogMTMwJSB9Cgp0ZCx0aCB7IHBhZGRpbmc6IDAuMmVtIH0KCnVsIHsK&#xA;ICBtYXJnaW46IDAuNWVtIDEuNWVtIDAuNWVtIDEuNWVtOwogIHBhZGRpbmc6IDA7Cn0KCm9sIHsK&#xA;ICBtYXJnaW46IDAuNWVtIDEuNWVtIDAuNWVtIDEuNWVtOwogIHBhZGRpbmc6IDA7Cn0KCnVsIHsg&#xA;bGlzdC1zdHlsZS10eXBlOiBzcXVhcmU7IH0KdWwgdWwgeyBsaXN0LXN0eWxlLXR5cGU6IGRpc2M7&#xA;IH0KdWwgdWwgdWwgeyBsaXN0LXN0eWxlLXR5cGU6IGNpcmNsZTsgfQp1bCB1bCB1bCB1bCB7IGxp&#xA;c3Qtc3R5bGUtdHlwZTogZGlzYzsgfQoKdWwgbGkgeyAKICBsaXN0LXN0eWxlOiBzcXVhcmU7CiAg&#xA;bWFyZ2luOiAwLjFlbSAwZW0gMC42ZW0gMDsKICBwYWRkaW5nOiAwIDAgMCAwOwogIGxpbmUtaGVp&#xA;Z2h0OiAxNDAlOwp9CgpvbCBsaSB7IAogIG1hcmdpbjogMC4xZW0gMGVtIDAuNmVtIDEuNWVtOwog&#xA;IHBhZGRpbmc6IDAgMCAwIDBweDsKICBsaW5lLWhlaWdodDogMTQwJTsKICBsaXN0LXN0eWxlLXR5&#xA;cGU6IGRlY2ltYWw7Cn0KCmxpIHVsIGxpIHsgCiAgZm9udC1zaXplOiA4NSU7IAogIGZvbnQtc3R5&#xA;bGU6IGl0YWxpYzsKICBsaXN0LXN0eWxlLXR5cGU6IGRpc2M7CiAgYmFja2dyb3VuZDogdHJhbnNw&#xA;YXJlbnQ7CiAgcGFkZGluZzogMCAwIDAgMDsKfQpsaSBsaSB1bCBsaSB7IAogIGZvbnQtc2l6ZTog&#xA;ODUlOyAKICBmb250LXN0eWxlOiBub3JtYWw7CiAgbGlzdC1zdHlsZS10eXBlOiBjaXJjbGU7CiAg&#xA;YmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgcGFkZGluZzogMCAwIDAgMDsKfQpsaSBsaSBsaSB1&#xA;bCBsaSB7CiAgbGlzdC1zdHlsZS10eXBlOiBkaXNjOwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50&#xA;OwogIHBhZGRpbmc6IDAgMCAwIDA7Cn0KCmxpIG9sIGxpIHsKICBsaXN0LXN0eWxlLXR5cGU6IGRl&#xA;Y2ltYWw7Cn0KCgpsaSBsaSBvbCBsaSB7CiAgbGlzdC1zdHlsZS10eXBlOiBkZWNpbWFsOwp9Cgov&#xA;Kgogc2V0dGluZyBjbGFzcz0ib3V0bGluZSBvbiBvbCBvciB1bCBtYWtlcyBpdCBiZWhhdmUgYXMg&#xA;YW4KIG91bGluZSBsaXN0IHdoZXJlIGJsb2NrbGV2ZWwgY29udGVudCBpbiBsaSBlbGVtZW50cyBp&#xA;cwogaGlkZGVuIGJ5IGRlZmF1bHQgYW5kIGNhbiBiZSBleHBhbmRlZCBvciBjb2xsYXBzZWQgd2l0&#xA;aAogbW91c2UgY2xpY2suIFNldCBjbGFzcz0iZXhwYW5kIiBvbiBsaSB0byBvdmVycmlkZSBkZWZh&#xA;dWx0CiovCgpvbC5vdXRsaW5lIGxpOmhvdmVyIHsgY3Vyc29yOiBwb2ludGVyIH0Kb2wub3V0bGlu&#xA;ZSBsaS5ub2ZvbGQ6aG92ZXIgeyBjdXJzb3I6IGRlZmF1bHQgfQoKdWwub3V0bGluZSBsaTpob3Zl&#xA;ciB7IGN1cnNvcjogcG9pbnRlciB9CnVsLm91dGxpbmUgbGkubm9mb2xkOmhvdmVyIHsgY3Vyc29y&#xA;OiBkZWZhdWx0IH0KCm9sLm91dGxpbmUgeyBsaXN0LXN0eWxlOmRlY2ltYWw7IH0Kb2wub3V0bGlu&#xA;ZSBvbCB7IGxpc3Qtc3R5bGUtdHlwZTpsb3dlci1hbHBoYSB9CgpvbC5vdXRsaW5lIGxpLm5vZm9s&#xA;ZCB7CiAgcGFkZGluZzogMCAwIDAgMjBweDsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCB1cmwo&#xA;Li4vZ3JhcGhpY3Mvbm9mb2xkLWRpbS5naWYpIG5vLXJlcGVhdCAwcHggMC41ZW07Cn0Kb2wub3V0&#xA;bGluZSBsaS51bmZvbGRlZCB7CiAgcGFkZGluZzogMCAwIDAgMjBweDsKICBiYWNrZ3JvdW5kOiB0&#xA;cmFuc3BhcmVudCB1cmwoLi4vZ3JhcGhpY3MvZm9sZC1kaW0uZ2lmKSBuby1yZXBlYXQgMHB4IDAu&#xA;NWVtOwp9Cm9sLm91dGxpbmUgbGkuZm9sZGVkIHsKICBwYWRkaW5nOiAwIDAgMCAyMHB4OwogIGJh&#xA;Y2tncm91bmQ6IHRyYW5zcGFyZW50IHVybCguLi9ncmFwaGljcy91bmZvbGQtZGltLmdpZikgbm8t&#xA;cmVwZWF0IDBweCAwLjVlbTsKfQpvbC5vdXRsaW5lIGxpLnVuZm9sZGVkOmhvdmVyIHsKICBwYWRk&#xA;aW5nOiAwIDAgMCAyMHB4OwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50IHVybCguLi9ncmFwaGlj&#xA;cy9mb2xkLmdpZikgbm8tcmVwZWF0IDBweCAwLjVlbTsKfQpvbC5vdXRsaW5lIGxpLmZvbGRlZDpo&#xA;b3ZlciB7CiAgcGFkZGluZzogMCAwIDAgMjBweDsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCB1&#xA;cmwoLi4vZ3JhcGhpY3MvdW5mb2xkLmdpZikgbm8tcmVwZWF0IDBweCAwLjVlbTsKfQoKdWwub3V0&#xA;bGluZSBsaS5ub2ZvbGQgewogIHBhZGRpbmc6IDAgMCAwIDIwcHg7CiAgYmFja2dyb3VuZDogdHJh&#xA;bnNwYXJlbnQgdXJsKC4uL2dyYXBoaWNzL25vZm9sZC1kaW0uZ2lmKSBuby1yZXBlYXQgMHB4IDAu&#xA;NWVtOwp9CnVsLm91dGxpbmUgbGkudW5mb2xkZWQgewogIHBhZGRpbmc6IDAgMCAwIDIwcHg7CiAg&#xA;YmFja2dyb3VuZDogdHJhbnNwYXJlbnQgdXJsKC4uL2dyYXBoaWNzL2ZvbGQtZGltLmdpZikgbm8t&#xA;cmVwZWF0IDBweCAwLjVlbTsKfQp1bC5vdXRsaW5lIGxpLmZvbGRlZCB7CiAgcGFkZGluZzogMCAw&#xA;IDAgMjBweDsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCB1cmwoLi4vZ3JhcGhpY3MvdW5mb2xk&#xA;LWRpbS5naWYpIG5vLXJlcGVhdCAwcHggMC41ZW07Cn0KdWwub3V0bGluZSBsaS51bmZvbGRlZDpo&#xA;b3ZlciB7CiAgcGFkZGluZzogMCAwIDAgMjBweDsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCB1&#xA;cmwoLi4vZ3JhcGhpY3MvZm9sZC5naWYpIG5vLXJlcGVhdCAwcHggMC41ZW07Cn0KdWwub3V0bGlu&#xA;ZSBsaS5mb2xkZWQ6aG92ZXIgewogIHBhZGRpbmc6IDAgMCAwIDIwcHg7CiAgYmFja2dyb3VuZDog&#xA;dHJhbnNwYXJlbnQgdXJsKC4uL2dyYXBoaWNzL3VuZm9sZC5naWYpIG5vLXJlcGVhdCAwcHggMC41&#xA;ZW07Cn0KCi8qIGZvciBzbGlkZXMgd2l0aCBjbGFzcyAidGl0bGUiIGluIHRhYmxlIG9mIGNvbnRl&#xA;bnRzICovCmEudGl0bGVzbGlkZSB7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXN0eWxlOiBpdGFs&#xA;aWMgfQoKLyoKIGhpZGUgaW1hZ2VzIGZvciB3b3JrIGFyb3VuZCBmb3Igc2F2ZSBhcyBidWcKIHdo&#xA;ZXJlIGJyb3dzZXJzIGZhaWwgdG8gc2F2ZSBpbWFnZXMgdXNlZCBieSBDU1MKKi8KaW1nLmhpZGRl&#xA;biB7IGRpc3BsYXk6IG5vbmU7IHZpc2liaWxpdHk6IGhpZGRlbiB9CmRpdi5pbml0aWFsX3Byb21w&#xA;dCB7IGRpc3BsYXk6IG5vbmU7IHZpc2liaWxpdHk6IGhpZGRlbiB9CgogIGRpdi5zbGlkZSB7CiAg&#xA;ICAgdmlzaWJpbGl0eTogdmlzaWJsZTsKICAgICBwb3NpdGlvbjogaW5oZXJpdDsKICB9CiAgZGl2&#xA;LmhhbmRvdXQgewogICAgIGJvcmRlci10b3Atc3R5bGU6IHNvbGlkOwogICAgIGJvcmRlci10b3At&#xA;d2lkdGg6IHRoaW47CiAgICAgYm9yZGVyLXRvcC1jb2xvcjogYmxhY2s7CiAgfQoKQG1lZGlhIHNj&#xA;cmVlbiB7CiAgLmhpZGRlbiB7IGRpc3BsYXk6IG5vbmU7IHZpc2liaWxpdHk6IHZpc2libGUgfQoK&#xA;ICBkaXYuc2xpZGUuaGlkZGVuIHsgZGlzcGxheTogYmxvY2s7IHZpc2liaWxpdHk6IHZpc2libGUg&#xA;fQogIGRpdi5oYW5kb3V0LmhpZGRlbiB7IGRpc3BsYXk6IGJsb2NrOyB2aXNpYmlsaXR5OiB2aXNp&#xA;YmxlIH0KICBkaXYuYmFja2dyb3VuZCB7IGRpc3BsYXk6IG5vbmU7IHZpc2liaWxpdHk6IGhpZGRl&#xA;biB9CiAgYm9keS5zaW5nbGVfc2xpZGUgZGl2LmluaXRpYWxfcHJvbXB0IHsgZGlzcGxheTogYmxv&#xA;Y2s7IHZpc2liaWxpdHk6IHZpc2libGUgfQogIGJvZHkuc2luZ2xlX3NsaWRlIGRpdi5iYWNrZ3Jv&#xA;dW5kIHsgZGlzcGxheTogYmxvY2s7IHZpc2liaWxpdHk6IHZpc2libGUgfQogIGJvZHkuc2luZ2xl&#xA;X3NsaWRlIGRpdi5iYWNrZ3JvdW5kLmhpZGRlbiB7IGRpc3BsYXk6IG5vbmU7IHZpc2liaWxpdHk6&#xA;IGhpZGRlbiB9CiAgYm9keS5zaW5nbGVfc2xpZGUgLmludmlzaWJsZSB7IHZpc2liaWxpdHk6IGhp&#xA;ZGRlbiB9CiAgYm9keS5zaW5nbGVfc2xpZGUgLmhpZGRlbiB7IGRpc3BsYXk6IG5vbmU7IHZpc2li&#xA;aWxpdHk6IGhpZGRlbiB9CiAgYm9keS5zaW5nbGVfc2xpZGUgZGl2LnNsaWRlIHsgcG9zaXRpb246&#xA;IGFic29sdXRlIH0KICBib2R5LnNpbmdsZV9zbGlkZSBkaXYuaGFuZG91dCB7IGRpc3BsYXk6IG5v&#xA;bmU7IHZpc2liaWxpdHk6IGhpZGRlbiB9Cn0KCkBtZWRpYSBwcmludCB7CiAgLmhpZGRlbiB7IGRp&#xA;c3BsYXk6IGJsb2NrOyB2aXNpYmlsaXR5OiB2aXNpYmxlIH0KCiAgZGl2LnNsaWRlIHByZSB7IGZv&#xA;bnQtc2l6ZTogNjAlOyBwYWRkaW5nLWxlZnQ6IDAuNWVtOyB9CiAgZGl2LnRvb2xiYXIgeyBkaXNw&#xA;bGF5OiBub25lOyB2aXNpYmlsaXR5OiBoaWRkZW47IH0KICBkaXYuc2xpZHlfdG9jIHsgZGlzcGxh&#xA;eTogbm9uZTsgdmlzaWJpbGl0eTogaGlkZGVuOyB9CiAgZGl2LmJhY2tncm91bmQgeyBkaXNwbGF5&#xA;OiBub25lOyB2aXNpYmlsaXR5OiBoaWRkZW47IH0KICBkaXYuc2xpZGUgeyBwYWdlLWJyZWFrLWJl&#xA;Zm9yZTogYWx3YXlzIH0KICAvKiA6Zmlyc3QtY2hpbGQgaXNuJ3QgcmVsaWFibGUgZm9yIHByaW50&#xA;IG1lZGlhICovCiAgZGl2LnNsaWRlLmZpcnN0LXNsaWRlIHsgcGFnZS1icmVhay1iZWZvcmU6IGF2&#xA;b2lkIH0KfQoK&#xA;"/>
      <link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSB7CiAgIGZvbnQtZmFtaWx5OiAiUGFsYXRpbm8gTGlub3R5cGUiLCAiQm9vayBBbnRpcXVh&#xA;IiwgUGFsYXRpbm8sIHNlcmlmOwogICBsaW5lLWhlaWdodDogMS4yNWVtOwogICBjb2xvcjogIzI1&#xA;MmM1OAp9CgpoMSwgaDIsIGgzLCBoNCwgaDUsIGZpZ2NhcHRpb24sIGNhcHRpb24gewogICBmb250&#xA;LWZhbWlseTogSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjsKfQoKaDIgewogICBmb250LXNp&#xA;emU6IDEuMjVlbTsKfQoKaDMgewogICAgZm9udC1zaXplOiAwLjgyNWVtOwp9CgoudHdvLWNvbHVt&#xA;biA+ICp7CiAgIGZsb2F0OiBsZWZ0OwogICB3aWR0aDogNDMlOwogICBtYXJnaW4tbGVmdDogMyU7&#xA;Cn0KCi50d28tY29sdW1uID4gdWwgewogICBwYWRkaW5nLWxlZnQ6IDBlbTsKICAgd2lkdGg6IDQz&#xA;JTsKfQoKLnRoaXJkIHsKICAgZmxvYXQ6IGxlZnQ7CiAgIHdpZHRoOiAzMCU7CiAgIG1hcmdpbi1s&#xA;ZWZ0OiAyJTsKfQoKdWwgewogICBwYWRkaW5nLWxlZnQ6IDFlbTsKICAgbWFyZ2luLXJpZ2h0OiAw&#xA;ZW07Cn0KCmxpID4gcCB7CiAgIG1hcmdpbi1sZWZ0OiAwZW07CiAgIG1hcmdpbi1yaWdodDogMGVt&#xA;Owp9Cgouc2xpZGUuY292ZXIgewogICBoZWlnaHQ6IDEwMCU7CiAgIGJhY2tncm91bmQtY29sb3I6&#xA;IHJnYigyNTUsMjU1LDI1NSk7Cn0KCi5zbGlkZS5jb3ZlciBoZ3JvdXAgPiBoMSB7CiAgIHBhZGRp&#xA;bmc6IDBlbTsKICAgbWFyZ2luOiAwZW07Cn0KCi5zbGlkZS5wcmV0aXRsZSBoZ3JvdXAgewogICBt&#xA;YXJnaW4tdG9wOiAyNSU7CiAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgZm9udC13ZWlnaHQ6IGJv&#xA;bGQ7CiAgIGNvbG9yOiBibGFjazsKCiAgICAtd2Via2l0LWFuaW1hdGlvbi1uYW1lOiBibGlua2Vy&#xA;OwogICAgLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246IDJzOwogICAgLXdlYmtpdC1hbmltYXRp&#xA;b24tdGltaW5nLWZ1bmN0aW9uOiBsaW5lYXI7CiAgICAtd2Via2l0LWFuaW1hdGlvbi1pdGVyYXRp&#xA;b24tY291bnQ6IGluZmluaXRlOwp9Cgouc2xpZGUucHJldGl0bGUgaGdyb3VwID4gaDEgewogICBj&#xA;b2xvcjogYmxhY2s7Cn0KCi50aXRsZSBoZ3JvdXAgewogICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAg&#xA;IG1hcmdpbi10b3A6IDE1JTsKfQoKLnRpdGxlIC5hdXRob3IgewogICBtYXJnaW4tdG9wOiA1JTsK&#xA;ICAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgoudGl0bGUgLmF1dGhvciBwIHsKICAgcGFkZGluZzog&#xA;MGVtOwogICBtYXJnaW46IDBlbTsKICAgbWFyZ2luLWJvdHRvbTogMC4yZW07Cn0KCi50aXRsZSAu&#xA;ZGVwdCB7CiAgIG1hcmdpbi10b3A6IDUlOwogICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgIAp9Cgou&#xA;c2xpZGUudGl0bGUgaDEgewogICBjb2xvcjogYmxhY2s7Cn0KCi5iYWNrZ3JvdW5kIGhlYWRlciB7&#xA;CiAgIHBhZGRpbmc6IDBlbTsKICAgbWFyZ2luOiAwZW07CiAgIHdpZHRoOiAxMDAlOwogICBoZWln&#xA;aHQ6IDUlOwp9CgovKgouYmFja2dyb3VuZCBoZWFkZXIgLmxvZ28gewogICBkaXNwbGF5OiBpbmxp&#xA;bmUtYmxvY2s7CiAgIGhlaWdodDogMTAwJTsKfSovCi5iYWNrZ3JvdW5kIGhlYWRlciB7CiAgIGhl&#xA;aWdodDogM2VtOwogICBsaW5lLWhlaWdodDogM2VtOwp9Ci5iYWNrZ3JvdW5kIGhlYWRlciBpbWcu&#xA;bG9nbyB7CiAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgIGhlaWdodDogMmVtOwogICBtYXJn&#xA;aW4tbGVmdDogMWVtOwp9Ci5iYWNrZ3JvdW5kIC5kZXB0IHsKICAgd2lkdGg6IDI1MHB4OwogICBw&#xA;b3NpdGlvbjogZml4ZWQ7CiAgIHRvcDogOTAlOwogICBsZWZ0OiAxMHB4OwogICBwYWRkaW5nLXRv&#xA;cDogMTFweDsKICAgcGFkZGluZy1yaWdodDogMTBweDsKfQouYmFja2dyb3VuZCBmb290ZXIgewog&#xA;ICBwb3NpdGlvbjogZml4ZWQ7CiAgIGJvdHRvbTogMHB4OwogICBsZWZ0OiAwcHg7Cn0KCi5iYWNr&#xA;Z3JvdW5kIGZvb3RlciB7CiAgIHotaW5kZXg6IDEwMDsKfQoKZGl2LmJhY2tncm91bmQgewogICBt&#xA;YXJnaW4tdG9wOiAxZW07Cn0KZGl2LnNsaWRlIHsKICAgbWFyZ2luLXRvcDogMWVtOwogICBwYWRk&#xA;aW5nLWxlZnQ6IDBlbTsKICAgcGFkZGluZy1yaWdodDogMGVtOwp9CgpkaXYuc2xpZGUgaDEgewog&#xA;ICBtYXJnaW4tdG9wOiAwLjI1ZW07CiAgIG1hcmdpbi1sZWZ0OiAxMDBweDsKICAgbWFyZ2luLWJv&#xA;dHRvbTogMGVtOwogICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9CgpkaXYuc2xpZGUgaDEgKyAq&#xA;IHsKICAgbWFyZ2luLXRvcDogMmVtOwp9CgpkaXYuc2xpZGUgaDEgKyBpbWcsIGRpdi5zbGlkZSBo&#xA;MSArIHRhYmxlIHsKICAgbWFyZ2luLXRvcDogMWVtOwp9CgpkaXYuc2xpZGUgPiBpbWcsIGRpdi5z&#xA;bGlkZSBkaXYgPiBpbWcgewogICBkaXNwbGF5OiBibG9jazsKICAgbWFyZ2luLWxlZnQ6IGF1dG87&#xA;CiAgIG1hcmdpbi1yaWdodDogYXV0bzsKfQoKYmxvY2txdW90ZS5sYXJnZSwgLnNsaWRlID4gYmxv&#xA;Y2txdW90ZSAgewogICBmb250LXNpemU6IDEuNWVtOwogICBsaW5lLWhlaWdodDogMS4yNWVtOwp9&#xA;CgpibG9ja3F1b3RlLnNtYWxsIHsKICAgZm9udC1zaXplOiAxZW07CiAgIG1hcmdpbi1sZWZ0OiAy&#xA;ZW07CiAgIG1hcmdpbi1yaWdodDogMmVtOwp9CgpibG9ja3F1b3RlIGVtIHsKICAgZm9udC13ZWln&#xA;aHQ6IGJvbGQ7Cn0KCmJsb2NrcXVvdGUuY2FsbG91dCB7CiAgIHRleHQtYWxpZ246IGNlbnRlcjsK&#xA;fQoKLmRyb3BjYXAgewogICBmbG9hdDogbGVmdDsKICAgZm9udC1zaXplOiAyZW07CiAgIGxpbmUt&#xA;aGVpZ2h0OiAxZW07Cn0KCi5kcm9wY2FwLlAgewogICBtYXJnaW4tcmlnaHQ6IDAuMDYyNWVtOwp9&#xA;CgouZHJvcGNhcC5BIHsKICAgbWFyZ2luLXJpZ2h0OiAtMC4xMjVlbTsKfQoKZmlnY2FwdGlvbiB7&#xA;CiAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgbWFyZ2luLXRvcDogMWVtOwp9CgpkaXYuc2xpZGUg&#xA;PiBmaWd1cmUgPiBpbWcgewogICBkaXNwbGF5OiBibG9jazsKICAgbWFyZ2luLWxlZnQ6IGF1dG87&#xA;CiAgIG1hcmdpbi1yaWdodDogYXV0bzsKICAgd2lkdGg6IDkwJTsKfQoKaDIsIGgzLCBoNCwgaDUg&#xA;ewogICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5yZGZhLXZhbHVlIHsKICAgY29sb3I6IHJnYigy&#xA;OCwgMTY3LCAyOCk7Cn0KCi5yZGZhLXByb3BlcnR5IHsKICAgY29sb3I6IHJnYigxOTYsIDQyLCAz&#xA;Nik7Cn0KCiN2b3J0ZXggaW1nIHsKICAgIGRpc3BsYXk6IG5vbmU7Cn0KI2Zvcm0gewogICAgd2lk&#xA;dGg6IDQ1JTsKICAgIGZsb2F0OiBsZWZ0Owp9CgojbG9nIHsKICAgIGZvbnQtZmFtaWx5OiBtb25v&#xA;c3BhY2U7CiAgICBmb250LXNpemU6IDEwcHQ7CiAgICBsaW5lLWhlaWdodDogMWVtOwogICAgbWF4&#xA;LWhlaWdodDogMTVlbTsKICAgIG92ZXJmbG93OiBzY3JvbGw7Cn0KCiNsb2cgcCB7CiAgICBtYXJn&#xA;aW4tdG9wOiAwZW07CiAgICBtYXJnaW4tYm90dG9tOiAwZW07Cn0KCiNvdXRwdXQgewogICAgd2lk&#xA;dGg6IDQ1JTsKICAgIGZsb2F0OiBsZWZ0Owp9Cgojb3V0cHV0IHsKICAgIHRleHQtYWxpZ246IGNl&#xA;bnRlcjsKfQoKI21hcCB7CiAgICBoZWlnaHQ6IDUwMHB4Owp9CgojZm9ybSBpbnB1dCB7CiAgIGZv&#xA;bnQtc2l6ZTogMC41ZW07Cn0KCiNtYXAtdm9ydGV4IHsKICAgaGVpZ2h0OiA1MDBweDsKfQoKLnNs&#xA;aWRlIHByZSB7CiAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgIGJhY2tncm91bmQtY29sb3I6IHdo&#xA;aXRlOyAKICAgY29sb3I6IGluaGVyaXQ7IAogICB6LWluZGV4OiAxMDsKICAgb3ZlcmZsb3c6IHNj&#xA;cm9sbDsKfQoKLnNsaWRlIHByZSAudHlwZSB7CiAgICBjb2xvcjogcmVkOwp9Cgouc2xpZGUgcHJl&#xA;IC5wcm9wZXJ0eSwgLnNsaWRlIHByZSAuY3VyaWUgewogICAgY29sb3I6IG9yYW5nZTsKfQoKLnNs&#xA;aWRlIHByZSAucmVzb3VyY2UgewogICAgY29sb3I6IGdyZWVuOwp9Cgouc2xpZGUgcHJlIC5vYmpl&#xA;Y3QgewogICAgY29sb3I6IGJsYWNrOwp9Cgouc2xpZGUgPiBpbWcuYXNpZGUgewogICBmbG9hdDog&#xA;cmlnaHQ7CiAgIG1hcmdpbi1yaWdodDogMWVtOwogICBtYXJnaW4tdG9wOiAxZW07Cn0KCi5zbGlk&#xA;ZSA+IGRpdiB7CiAgIG1hcmdpbi10b3A6IDFlbTsKfQoKLnRvb2xiYXIgewogICBwYWRkaW5nLWJv&#xA;dHRvbTogMC4yZW07CiAgIHZlcnRpY2FsLWFsaWduOiB0b3A7Cn0KCi5zbGlkZSA+IGltZyB7CiAg&#xA;IG1hcmdpbi10b3A6IDFlbTsKfQoKLnNsaWRlID4gaW1nLmZpbGwgewogICBtYXJnaW4tdG9wOiAw&#xA;ZW07CiAgIHdpZHRoOiAxMDAlOwp9Cgouc2xpZGUgPiBpbWcuZmlsbC1oZWlnaHQgewogICBtYXJn&#xA;aW4tdG9wOiAwZW07CiAgIGhlaWdodDogODAlOwp9CgpwLnNtYWxsIHsKICAgZm9udC1zaXplOiAx&#xA;NnB0Owp9CgpibG9ja3F1b3RlIGFkZHJlc3MgewogICBtYXJnaW4tdG9wOiAtMC41ZW07CiAgIHRl&#xA;eHQtYWxpZ246IHJpZ2h0Owp9CgoucGFydGl0aW9uMSB7CiAgIGNvbG9yOiByZWQ7Cn0KCi5wYXJ0&#xA;aXRpb24yIHsKICAgY29sb3I6IG9yYW5nZTsKfQoKLnBhcnRpdGlvbjMgewogICBjb2xvcjogZ3Jl&#xA;ZW47Cn0KCmRpdi5zbGlkZSBkdCB7CiAgIGZsb2F0OiBsZWZ0OwogICBjbGVhcjogbGVmdDsKICAg&#xA;aGVpZ2h0OiA1ZW07CiAgIAogICBtYXJnaW4tdG9wOiAwZW07CiAgIG1hcmdpbi1yaWdodDogMWVt&#xA;Owp9CgpkaXYuc2xpZGUgZHQgaW1nIHsKICAgaGVpZ2h0OiA1ZW07Cn0KCmRpdi5zbGlkZSBkZCB7&#xA;CiAgIGhlaWdodDogNWVtOwogICBkaXNwbGF5OiB0YWJsZTsKfQpkaXYuc2xpZGUgZGQgcCB7CiAg&#xA;IGRpc3BsYXk6IHRhYmxlLWNlbGw7CiAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Cn0KCmRpdi5z&#xA;bGlkZSBkbCArICogewogICBjbGVhcjogYm90aDsKfQoKLnRvcC1sZWZ0LXF1YWRyYW50IHsKICAg&#xA;cG9zaXRpb246IGFic29sdXRlOwogICB0b3A6IDMlOwogICBsZWZ0OjUlOwogICB6LWluZGV4OiAx&#xA;MDsKfQoKLnRvcC1yaWdodC1xdWFkcmFudCB7CiAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgdG9w&#xA;OiAzJTsKICAgcmlnaHQ6NSU7CiAgIHotaW5kZXg6IDEwOwp9CgouYm90dG9tLWxlZnQtcXVhZHJh&#xA;bnQgewogICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgIGJvdHRvbTogNSU7CiAgIGxlZnQ6NSU7CiAg&#xA;IHotaW5kZXg6IDEwOwp9CgouYm90dG9tLXJpZ2h0LXF1YWRyYW50IHsKICAgcG9zaXRpb246IGFi&#xA;c29sdXRlOwogICBib3R0b206IDUlOwogICByaWdodDo1JTsKICAgei1pbmRleDogMTA7Cn0KCi5h&#xA;bm5vdGF0aW9uIHsKICAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KLmFubm90YXRpb24ubGFyZ2Ugewog&#xA;ICBmb250LXNpemU6IDEuMjVlbTsKfQoKdGFibGUgewogICB3aWR0aDogOTAlOwogICBtYXJnaW4t&#xA;bGVmdDogYXV0bzsKICAgbWFyZ2luLXJpZ2h0OiBhdXRvOwp9Cgp0YWJsZS5jZW50ZXJlZCB0ZCwg&#xA;dGFibGUuY2VudGVyZWQgdGggewogICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCnRhYmxlIHRkIHsK&#xA;ICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI0NSwyNDUsMjQ1KTsKfQoKc3ZnIHsKICAgZGlzcGxh&#xA;eTogYmxvY2s7CiAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICBtYXJnaW4tcmlnaHQ6IGF1dG87Cn0K&#xA;Ci5pbmRlbnQgewogICBtYXJnaW4tbGVmdDogNWVtOwp9CgouaW5kZW50MiB7CiAgIG1hcmdpbi1s&#xA;ZWZ0OiAxMGVtOwp9CgouaW5kZW50MyB7CiAgIG1hcmdpbi1sZWZ0OiAxNWVtOwp9CgouaW5kZW50&#xA;NCB7CiAgIG1hcmdpbi1sZWZ0OiAyMGVtOwp9CgouaW5kZW50NSB7CiAgIG1hcmdpbi1sZWZ0OiAy&#xA;NWVtOwp9CgpwID4gYnV0dG9uLCBsaSA+IGJ1dHRvbiB7CiAgIGZvbnQtc2l6ZTogMWVtOwp9Cgpw&#xA;ID4gYTpsaW5rIHsKICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7Cn0KCi5jbGVhciB7CiAg&#xA;IGNsZWFyOiBib3RoOwp9CgplbS5sYXJnZSB7CiAgIGZvbnQtc2l6ZTogMS4yNWVtOwp9CgpwcmUu&#xA;c21hbGwgewogICBmb250LXNpemU6IDAuNjI1ZW07Cn0KCnAgaW5wdXQgewogICBmb250LXNpemU6&#xA;IDFlbTsKfQoKZGl2LnNsaWRlLnRpdGxlcGFnZSBoZ3JvdXAgewogICBtYXJnaW4tdG9wOiAyNSU7&#xA;Cn0KCmRpdi5zbGlkZS50aXRsZXBhZ2UgaGdyb3VwIGgxIHsKICAgcGFkZGluZy10b3A6IDA7Cn0K&#xA;&#xA;"/>
      <script type="text/javascript" src="data:text/javascript;base64,Lyogc2xpZHkuanMKCiAgIENvcHlyaWdodCAoYykgMjAwNS0yMDEzIFczQyAoTUlULCBFUkNJTSwg&#xA;S2VpbyksIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgIFczQyBsaWFiaWxpdHksIHRyYWRlbWFyaywg&#xA;ZG9jdW1lbnQgdXNlIGFuZCBzb2Z0d2FyZSBsaWNlbnNpbmcKICAgcnVsZXMgYXBwbHksIHNlZToK&#xA;CiAgIGh0dHA6Ly93d3cudzMub3JnL0NvbnNvcnRpdW0vTGVnYWwvY29weXJpZ2h0LWRvY3VtZW50&#xA;cwogICBodHRwOi8vd3d3LnczLm9yZy9Db25zb3J0aXVtL0xlZ2FsL2NvcHlyaWdodC1zb2Z0d2Fy&#xA;ZQoKICAgRGVmaW5lcyBzaW5nbGUgbmFtZSAidzNjX3NsaWR5IiBpbiBnbG9iYWwgbmFtZXNwYWNl&#xA;CiAgIEFkZHMgZXZlbnQgaGFuZGxlcnMgd2l0aG91dCB0cmFtcGxpbmcgb24gYW55IG90aGVycwoq&#xA;LwoKLy8gdGhlIHNsaWR5IG9iamVjdCBpbXBsZW1lbnRhdGlvbgp2YXIgdzNjX3NsaWR5ID0gewog&#xA;IC8vIGNsYXNzaWZ5IHdoaWNoIGtpbmQgb2YgYnJvd3NlciB3ZSdyZSBydW5uaW5nIHVuZGVyCiAg&#xA;bnNfcG9zOiAodHlwZW9mIHdpbmRvdy5wYWdlWU9mZnNldCE9J3VuZGVmaW5lZCcpLAogIGtodG1s&#xA;OiAoKG5hdmlnYXRvci51c2VyQWdlbnQpLmluZGV4T2YoIktIVE1MIikgPj0gMCA/IHRydWUgOiBm&#xA;YWxzZSksCiAgb3BlcmE6ICgobmF2aWdhdG9yLnVzZXJBZ2VudCkuaW5kZXhPZigiT3BlcmEiKSA+&#xA;PSAwID8gdHJ1ZSA6IGZhbHNlKSwKICBpcGFkOiAoKG5hdmlnYXRvci51c2VyQWdlbnQpLmluZGV4&#xA;T2YoImlQYWQiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwKICBpcGhvbmU6ICgobmF2aWdhdG9yLnVz&#xA;ZXJBZ2VudCkuaW5kZXhPZigiaVBob25lIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgYW5kcm9p&#xA;ZDogKChuYXZpZ2F0b3IudXNlckFnZW50KS5pbmRleE9mKCJBbmRyb2lkIikgPj0gMCA/IHRydWUg&#xA;OiBmYWxzZSksCiAgaWU6ICh0eXBlb2YgZG9jdW1lbnQuYWxsICE9ICJ1bmRlZmluZWQiICYmICF0&#xA;aGlzLm9wZXJhKSwKICBpZTY6ICghdGhpcy5uc19wb3MgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5p&#xA;bmRleE9mKCJNU0lFIDYiKSAhPSAtMSksCiAgaWU3OiAoIXRoaXMubnNfcG9zICYmIG5hdmlnYXRv&#xA;ci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSA3IikgIT0gLTEpLAogIGllODogKCF0aGlzLm5zX3Bv&#xA;cyAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1TSUUgOCIpICE9IC0xKSwKICBpZTk6&#xA;ICghdGhpcy5uc19wb3MgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDkiKSAh&#xA;PSAtMSksCgogIC8vIGRhdGEgZm9yIHN3aXBlIGFuZCBkb3VibGUgdGFwIGRldGVjdGlvbiBvbiB0&#xA;b3VjaCBzY3JlZW5zCiAgbGFzdF90YXA6IDAsCiAgcHJldl90YXA6IDAsCiAgc3RhcnRfeDogMCwK&#xA;ICBzdGFydF95OiAwLAogIGRlbHRhX3g6IDAsCiAgZGVsdGFfeTogMCwKCiAgLy8gYXJlIHdlIHJ1&#xA;bm5pbmcgYXMgWEhUTUw/IChkb2Vzbid0IHdvcmsgb24gT3BlcmEpCiAgaXNfeGh0bWw6IC94bWwv&#xA;LnRlc3QoZG9jdW1lbnQuY29udGVudFR5cGUpLAoKICBzbGlkZV9udW1iZXI6IDAsIC8vIGludGVn&#xA;ZXIgc2xpZGUgY291bnQ6IDAsIDEsIDIsIC4uLgogIHNsaWRlX251bWJlcl9lbGVtZW50OiBudWxs&#xA;LCAvLyBlbGVtZW50IGNvbnRhaW5pbmcgc2xpZGUgbnVtYmVyCiAgc2xpZGVzOiBbXSwgLy8gc2V0&#xA;IHRvIGFycmF5IG9mIHNsaWRlIGRpdidzCiAgbm90ZXM6IFtdLCAvLyBzZXQgdG8gYXJyYXkgb2Yg&#xA;aGFuZG91dCBkaXYncwogIGJhY2tncm91bmRzOiBbXSwgLy8gc2V0IHRvIGFycmF5IG9mIGJhY2tn&#xA;cm91bmQgZGl2J3MKICB0b29sYmFyOiBudWxsLCAvLyBlbGVtZW50IGNvbnRhaW5pbmcgdG9vbGJh&#xA;cgogIHRpdGxlOiBudWxsLCAvLyBkb2N1bWVudCB0aXRsZQogIGxhc3Rfc2hvd246IG51bGwsIC8v&#xA;IGxhc3QgaW5jcmVtZW50YWxseSBzaG93biBpdGVtCiAgZW9zOiBudWxsLCAgLy8gc3BhbiBlbGVt&#xA;ZW50IGZvciBlbmQgb2Ygc2xpZGUgaW5kaWNhdG9yCiAgdG9jOiBudWxsLCAvLyB0YWJsZSBvZiBj&#xA;b250ZW50cwogIG91dGxpbmU6IG51bGwsIC8vIG91dGxpbmUgZWxlbWVudCB3aXRoIHRoZSBmb2N1&#xA;cwogIHNlbGVjdGVkX3RleHRfbGVuOiAwLCAvLyBsZW5ndGggb2YgZHJhZyBzZWxlY3Rpb24gb24g&#xA;ZG9jdW1lbnQKICB2aWV3X2FsbDogMCwgIC8vIDEgdG8gdmlldyBhbGwgc2xpZGVzICsgaGFuZG91&#xA;dHMKICB3YW50X3Rvb2xiYXI6IHRydWUsICAvLyB1c2VyIHByZWZlcmVuY2UgdG8gc2hvdy9oaWRl&#xA;IHRvb2xiYXIKICBtb3VzZV9jbGlja19lbmFibGVkOiB0cnVlLCAvLyBlbmFibGVzIGxlZnQgY2xp&#xA;Y2sgZm9yIG5leHQgc2xpZGUKICBzY3JvbGxfaGFjazogMCwgLy8gSUUgd29yayBhcm91bmQgZm9y&#xA;IHBvc2l0aW9uOiBmaXhlZAogIGRpc2FibGVfc2xpZGVfY2xpY2s6IGZhbHNlLCAgLy8gdXNlZCBi&#xA;eSBjbGlja2VkIGFuY2hvcnMKCiAgbGFuZzogImVuIiwgLy8gdXBkYXRlZCB0byBsYW5ndWFnZSBz&#xA;cGVjaWZpZWQgYnkgaHRtbCBmaWxlCgogIGhlbHBfYW5jaG9yOiBudWxsLCAvLyB1c2VkIGZvciBr&#xA;ZXlib2FyZCBmb2N1cyBoYWNrIGluIHNob3dUb29sYmFyKCkKICBoZWxwX3BhZ2U6ICJodHRwOi8v&#xA;d3d3LnczLm9yZy9UYWxrcy9Ub29scy9TbGlkeTIvaGVscC9oZWxwLmh0bWwiLAogIGhlbHBfdGV4&#xA;dDogIk5hdmlnYXRlIHdpdGggbW91c2UgY2xpY2ssIHNwYWNlIGJhciwgQ3Vyc29yIExlZnQvUmln&#xA;aHQsICIgKwogICAgICAgICAgICAgIm9yIFBnIFVwIGFuZCBQZyBEbi4gVXNlIFMgYW5kIEIgdG8g&#xA;Y2hhbmdlIGZvbnQgc2l6ZS4iLAoKICBzaXplX2luZGV4OiAwLAogIHNpemVfYWRqdXN0bWVudDog&#xA;MCwKICBzaXplczogIG5ldyBBcnJheSgiMTBwdCIsICIxMnB0IiwgIjE0cHQiLCAiMTZwdCIsICIx&#xA;OHB0IiwgIjIwcHQiLAogICAgICAgICAgICAgICAgICAgICIyMnB0IiwgIjI0cHQiLCAiMjZwdCIs&#xA;ICIyOHB0IiwgIjMwcHQiLCAiMzJwdCIpLAoKICAvLyBuZWVkZWQgZm9yIGVmZmljaWVudCByZXNp&#xA;emluZwogIGxhc3Rfd2lkdGg6IDAsCiAgbGFzdF9oZWlnaHQ6IDAsCgoKICAvLyBOZWVkZWQgZm9y&#xA;IGNyb3NzIGJyb3dzZXIgc3VwcG9ydCBmb3IgcmVsYXRpdmUgd2lkdGgvaGVpZ2h0IG9uCiAgLy8g&#xA;b2JqZWN0IGVsZW1lbnRzLiBUaGUgd29yayBhcm91bmQgaXMgdG8gc2F2ZSB3aWR0aC9oZWlnaHQg&#xA;YXR0cmlidXRlcwogIC8vIGFuZCB0aGVuIHRvIHJlY29tcHV0ZSBhYnNvbHV0ZSB3aWR0aC9oZWln&#xA;aHQgZGltZW5zaW9ucyBvbiByZXNpemluZwogICBvYmplY3RzOiBbXSwKCiAgLy8gYXR0YWNoIGlu&#xA;aXRpYWxpYXRpb24gZXZlbnQgaGFuZGxlcnMKICBzZXRfdXA6IGZ1bmN0aW9uICgpIHsKICAgIHZh&#xA;ciBpbml0ID0gZnVuY3Rpb24oKSB7IHczY19zbGlkeS5pbml0KCk7IH07CiAgICBpZiAodHlwZW9m&#xA;IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICE9ICJ1bmRlZmluZWQiKQogICAgICB3aW5kb3cuYWRk&#xA;RXZlbnRMaXN0ZW5lcigibG9hZCIsIGluaXQsIGZhbHNlKTsKICAgIGVsc2UKICAgICAgd2luZG93&#xA;LmF0dGFjaEV2ZW50KCJvbmxvYWQiLCBpbml0KTsKICB9LAoKICBoaWRlX3NsaWRlczogZnVuY3Rp&#xA;b24gKCkgewogICAgaWYgKGRvY3VtZW50LmJvZHkgJiYgIXczY19zbGlkeS5pbml0aWFsaXplZCkK&#xA;ICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS52aXNpYmlsaXR5ID0gImhpZGRlbiI7CiAgICBlbHNl&#xA;CiAgICAgIHNldFRpbWVvdXQodzNjX3NsaWR5LmhpZGVfc2xpZGVzLCA1MCk7CiAgfSwKCiAgLy8g&#xA;aGFjayB0byBwZXJzdWFkZSBJRSB0byBjb21wdXRlIGNvcnJlY3QgZG9jdW1lbnQgaGVpZ2h0CiAg&#xA;Ly8gYXMgbmVlZGVkIGZvciBzaW11bGF0aW5nIGZpeGVkIHBvc2l0aW9uaW5nIG9mIHRvb2xiYXIK&#xA;ICBpZV9oYWNrOiBmdW5jdGlvbiAoKSB7CiAgICB3aW5kb3cucmVzaXplQnkoMCwtMSk7CiAgICB3&#xA;aW5kb3cucmVzaXplQnkoMCwgMSk7CiAgfSwKCiAgaW5pdDogZnVuY3Rpb24gKCkgewogICAgLy9h&#xA;bGVydCgic2xpZHkgc3RhcnRpbmcgdGVzdCAxMCIpOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS52&#xA;aXNpYmlsaXR5ID0gInZpc2libGUiOwogICAgdGhpcy5pbml0X2xvY2FsaXphdGlvbigpOwogICAg&#xA;dGhpcy5hZGRfdG9vbGJhcigpOwogICAgdGhpcy53cmFwX2ltcGxpY2l0X3NsaWRlcygpOwogICAg&#xA;dGhpcy5jb2xsZWN0X3NsaWRlcygpOwogICAgdGhpcy5jb2xsZWN0X25vdGVzKCk7CiAgICB0aGlz&#xA;LmNvbGxlY3RfYmFja2dyb3VuZHMoKTsKICAgIHRoaXMub2JqZWN0cyA9IGRvY3VtZW50LmJvZHku&#xA;Z2V0RWxlbWVudHNCeVRhZ05hbWUoIm9iamVjdCIpOwogICAgdGhpcy5wYXRjaF9hbmNob3JzKCk7&#xA;CiAgICB0aGlzLnNsaWRlX251bWJlciA9IHRoaXMuZmluZF9zbGlkZV9udW1iZXIobG9jYXRpb24u&#xA;aHJlZik7CiAgICB3aW5kb3cub2Zmc2NyZWVuYnVmZmVyaW5nID0gdHJ1ZTsKICAgIHRoaXMuc2l6&#xA;ZV9hZGp1c3RtZW50ID0gdGhpcy5maW5kX3NpemVfYWRqdXN0KCk7CiAgICB0aGlzLnRpbWVfbGVm&#xA;dCA9IHRoaXMuZmluZF9kdXJhdGlvbigpOwogICAgdGhpcy5oaWRlX2ltYWdlX3Rvb2xiYXIoKTsg&#xA;IC8vIHN1cHByZXNzIElFIGltYWdlIHRvb2xiYXIgcG9wdXAKICAgIHRoaXMuaW5pdF9vdXRsaW5l&#xA;cigpOyAgLy8gYWN0aXZhdGUgZm9sZC91bmZvbGQgc3VwcG9ydAogICAgdGhpcy50aXRsZSA9IGRv&#xA;Y3VtZW50LnRpdGxlOwogICAgdGhpcy5rZXlib2FyZGxlc3MgPSAodGhpcy5pcGFkfHx0aGlzLmlw&#xA;aG9uZXx8dGhpcy5hbmRyb2lkKTsKCiAgICBpZiAodGhpcy5rZXlib2FyZGxlc3MpCiAgICB7CiAg&#xA;ICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3ModzNjX3NsaWR5LnRvb2xiYXIsICJoaWRkZW4iKQog&#xA;ICAgICB0aGlzLndhbnRfdG9vbGJhciA9IDA7CiAgICB9CgogICAgLy8gd29yayBhcm91bmQgZm9y&#xA;IG9wZXJhIGJ1ZwogICAgdGhpcy5pc194aHRtbCA9IChkb2N1bWVudC5ib2R5LnRhZ05hbWUgPT0g&#xA;IkJPRFkiID8gZmFsc2UgOiB0cnVlKTsKCiAgICBpZiAodGhpcy5zbGlkZXMubGVuZ3RoID4gMCkK&#xA;ICAgIHsKICAgICAgdmFyIHNsaWRlID0gdGhpcy5zbGlkZXNbdGhpcy5zbGlkZV9udW1iZXJdOwog&#xA;ICAKICAgICAgaWYgKHRoaXMuc2xpZGVfbnVtYmVyID4gMCkKICAgICAgewogICAgICAgIHRoaXMu&#xA;c2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJ2aXNpYmxlIik7CiAgICAgICAgdGhpcy5s&#xA;YXN0X3Nob3duID0gdGhpcy5wcmV2aW91c19pbmNyZW1lbnRhbF9pdGVtKG51bGwpOwogICAgICAg&#xA;IHRoaXMuc2V0X2Vvc19zdGF0dXModHJ1ZSk7CiAgICAgIH0KICAgICAgZWxzZQogICAgICB7CiAg&#xA;ICAgICAgdGhpcy5sYXN0X3Nob3duID0gbnVsbDsKICAgICAgICB0aGlzLnNldF92aXNpYmlsaXR5&#xA;X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAgICAgICAgdGhpcy5zZXRfZW9zX3N0YXR1cygh&#xA;dGhpcy5uZXh0X2luY3JlbWVudGFsX2l0ZW0odGhpcy5sYXN0X3Nob3duKSk7CiAgICAgIH0KCiAg&#xA;ICAgIHRoaXMuc2V0X2xvY2F0aW9uKCk7CiAgICAgIHRoaXMuYWRkX2NsYXNzKHRoaXMuc2xpZGVz&#xA;WzBdLCAiZmlyc3Qtc2xpZGUiKTsKICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwog&#xA;ICAgfQoKICAgIHRoaXMudG9jID0gdGhpcy50YWJsZV9vZl9jb250ZW50cygpOwoKICAgIHRoaXMu&#xA;YWRkX2luaXRpYWxfcHJvbXB0KCk7CgogICAgLy8gYmluZCBldmVudCBoYW5kbGVycyB3aXRob3V0&#xA;IGludGVyZmVyaW5nIHdpdGggY3VzdG9tIHBhZ2Ugc2NyaXB0cwogICAgLy8gVGFwIGV2ZW50cyBi&#xA;ZWhhdmUgdG9vIHdlaXJkbHkgdG8gc3VwcG9ydCBjbGlja3MgcmVsaWFibHkgb24KICAgIC8vIGlQ&#xA;aG9uZSBhbmQgaVBhZCwgc28gZXhjbHVkZSB0aGVzZSBmcm9tIGNsaWNrIGhhbmRsZXIKCiAgICBp&#xA;ZiAoIXRoaXMua2V5Ym9hcmRsZXNzKQogICAgewogICAgICB0aGlzLmFkZF9saXN0ZW5lcihkb2N1&#xA;bWVudC5ib2R5LCAiY2xpY2siLCB0aGlzLm1vdXNlX2J1dHRvbl9jbGljayk7CiAgICAgIHRoaXMu&#xA;YWRkX2xpc3RlbmVyKGRvY3VtZW50LmJvZHksICJtb3VzZWRvd24iLCB0aGlzLm1vdXNlX2J1dHRv&#xA;bl9kb3duKTsKICAgIH0KCiAgICB0aGlzLmFkZF9saXN0ZW5lcihkb2N1bWVudCwgImtleWRvd24i&#xA;LCB0aGlzLmtleV9kb3duKTsKICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAia2V5cHJl&#xA;c3MiLCB0aGlzLmtleV9wcmVzcyk7CiAgICB0aGlzLmFkZF9saXN0ZW5lcih3aW5kb3csICJyZXNp&#xA;emUiLCB0aGlzLnJlc2l6ZWQpOwogICAgdGhpcy5hZGRfbGlzdGVuZXIod2luZG93LCAic2Nyb2xs&#xA;IiwgdGhpcy5zY3JvbGxlZCk7CiAgICB0aGlzLmFkZF9saXN0ZW5lcih3aW5kb3csICJ1bmxvYWQi&#xA;LCB0aGlzLnVubG9hZGVkKTsKCiAgICB0aGlzLmFkZF9saXN0ZW5lcihkb2N1bWVudCwgImdlc3R1&#xA;cmVjaGFuZ2UiLCBmdW5jdGlvbiAoKQogICAgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsK&#xA;CiAgICB0aGlzLmF0dGFjaF90b3VjaF9oYW5kZXJzKHRoaXMuc2xpZGVzKTsKCiAgICAvLyB0aGlz&#xA;IHNlZW1zIHRvIGJlIGEgZGVidWdnaW5nIGhhY2sKICAgIC8vaWYgKCFkb2N1bWVudC5ib2R5Lm9u&#xA;Y2xpY2spCiAgICAvLyAgZG9jdW1lbnQuYm9keS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgeyB9OwoK&#xA;ICAgIHRoaXMuc2luZ2xlX3NsaWRlX3ZpZXcoKTsKCiAgICAvL3RoaXMuc2V0X2xvY2F0aW9uKCk7&#xA;CgogICAgdGhpcy5yZXNpemVkKCk7CgogICAgaWYgKHRoaXMuaWU3KQogICAgICBzZXRUaW1lb3V0&#xA;KHczY19zbGlkeS5pZV9oYWNrLCAxMDApOwoKICAgIHRoaXMuc2hvd190b29sYmFyKCk7CgogICAg&#xA;Ly8gZm9yIGJhY2sgYnV0dG9uIGRldGVjdGlvbgogICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkg&#xA;eyB3M2Nfc2xpZHkuY2hlY2tfbG9jYXRpb24oKTsgfSwgMjAwKTsKICAgIHczY19zbGlkeS5pbml0&#xA;aWFsaXplZCA9IHRydWU7CiAgfSwKCiAgLy8gY3JlYXRlIGRpdiBlbGVtZW50IHdpdGggbGlua3Mg&#xA;dG8gZWFjaCBzbGlkZQogIHRhYmxlX29mX2NvbnRlbnRzOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIg&#xA;dG9jID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICB0aGlzLmFkZF9jbGFzcyh0b2Ms&#xA;ICJzbGlkeV90b2MgaGlkZGVuIik7CiAgICAvL3RvYy5zZXRBdHRyaWJ1dGUoInRhYmluZGV4Iiwg&#xA;IjAiKTsKCiAgICB2YXIgaGVhZGluZyA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImRpdiIpOwogICAg&#xA;dGhpcy5hZGRfY2xhc3MoaGVhZGluZywgInRvYy1oZWFkaW5nIik7CiAgICBoZWFkaW5nLmlubmVy&#xA;SFRNTCA9IHRoaXMubG9jYWxpemUoIlRhYmxlIG9mIENvbnRlbnRzIik7CgogICAgdG9jLmFwcGVu&#xA;ZENoaWxkKGhlYWRpbmcpOwogICAgdmFyIHByZXZpb3VzID0gbnVsbDsKCiAgICBmb3IgKHZhciBp&#xA;ID0gMDsgaSA8IHRoaXMuc2xpZGVzLmxlbmd0aDsgKytpKQogICAgewogICAgICB2YXIgdGl0bGUg&#xA;PSB0aGlzLmhhc19jbGFzcyh0aGlzLnNsaWRlc1tpXSwgInRpdGxlIik7CiAgICAgIHZhciBudW0g&#xA;PSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgoaSArIDEpICsgIi4gIik7CgogICAgICB0b2MuYXBw&#xA;ZW5kQ2hpbGQobnVtKTsKCiAgICAgIHZhciBhID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiYSIpOwog&#xA;ICAgICBhLnNldEF0dHJpYnV0ZSgiaHJlZiIsICIjKCIgKyAoaSsxKSArICIpIik7CgogICAgICBp&#xA;ZiAodGl0bGUpCiAgICAgICAgdGhpcy5hZGRfY2xhc3MoYSwgInRpdGxlc2xpZGUiKTsKCiAgICAg&#xA;IHZhciBuYW1lID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy5zbGlkZV9uYW1lKGkpKTsK&#xA;ICAgICAgYS5hcHBlbmRDaGlsZChuYW1lKTsKICAgICAgYS5vbmNsaWNrID0gdzNjX3NsaWR5LnRv&#xA;Y19jbGljazsKICAgICAgYS5vbmtleWRvd24gPSB3M2Nfc2xpZHkudG9jX2tleV9kb3duOwogICAg&#xA;ICBhLnByZXZpb3VzID0gcHJldmlvdXM7CgogICAgICBpZiAocHJldmlvdXMpCiAgICAgICAgcHJl&#xA;dmlvdXMubmV4dCA9IGE7CgogICAgICB0b2MuYXBwZW5kQ2hpbGQoYSk7CgogICAgICBpZiAoaSA9&#xA;PSAwKQogICAgICAgIHRvYy5maXJzdCA9IGE7CgogICAgICBpZiAoaSA8IHRoaXMuc2xpZGVzLmxl&#xA;bmd0aCAtIDEpCiAgICAgIHsKICAgICAgICB2YXIgYnIgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJi&#xA;ciIpOwogICAgICAgIHRvYy5hcHBlbmRDaGlsZChicik7CiAgICAgIH0KCiAgICAgIHByZXZpb3Vz&#xA;ID0gYTsKICAgIH0KCiAgICB0b2MuZm9jdXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlz&#xA;LmZpcnN0KQogICAgICAgIHRoaXMuZmlyc3QuZm9jdXMoKTsKICAgIH0KCiAgICB0b2Mub25tb3Vz&#xA;ZXVwID0gdzNjX3NsaWR5Lm1vdXNlX2J1dHRvbl91cDsKCiAgICB0b2Mub25jbGljayA9IGZ1bmN0&#xA;aW9uIChlKSB7CiAgICAgIGV8fChlPXdpbmRvdy5ldmVudCk7CgogICAgICBpZiAodzNjX3NsaWR5&#xA;LnNlbGVjdGVkX3RleHRfbGVuIDw9IDApCiAgICAgICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29m&#xA;X2NvbnRlbnRzKHRydWUpOwoKICAgICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7CiAg&#xA;ICAKICAgICAgaWYgKGUuY2FuY2VsICE9IHVuZGVmaW5lZCkKICAgICAgICBlLmNhbmNlbCA9IHRy&#xA;dWU7CiAgICAgIAogICAgICBpZiAoZS5yZXR1cm5WYWx1ZSAhPSB1bmRlZmluZWQpCiAgICAgICAg&#xA;ZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOwogICAgICAKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsK&#xA;CiAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZSh0b2MsIGRvY3VtZW50LmJvZHkuZmlyc3RD&#xA;aGlsZCk7CiAgICByZXR1cm4gdG9jOwogIH0sCgogIGlzX3Nob3duX3RvYzogZnVuY3Rpb24gKCkg&#xA;ewogICAgcmV0dXJuICF3M2Nfc2xpZHkuaGFzX2NsYXNzKHczY19zbGlkeS50b2MsICJoaWRkZW4i&#xA;KTsKICB9LAoKICBzaG93X3RhYmxlX29mX2NvbnRlbnRzOiBmdW5jdGlvbiAoKSB7CiAgICB3M2Nf&#xA;c2xpZHkucmVtb3ZlX2NsYXNzKHczY19zbGlkeS50b2MsICJoaWRkZW4iKTsKICAgIHZhciB0b2Mg&#xA;PSB3M2Nfc2xpZHkudG9jOwogICAgdG9jLmZvY3VzKCk7CgogICAgaWYgKHczY19zbGlkeS5pZTcg&#xA;JiYgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9PSAwKQogICAgICBzZXRUaW1lb3V0KHczY19zbGlk&#xA;eS5pZV9oYWNrLCAxMDApOwogIH0sCgogIGhpZGVfdGFibGVfb2ZfY29udGVudHM6IGZ1bmN0aW9u&#xA;IChmb2N1cykgewogICAgdzNjX3NsaWR5LmFkZF9jbGFzcyh3M2Nfc2xpZHkudG9jLCAiaGlkZGVu&#xA;Iik7CgogICAgaWYgKGZvY3VzICYmICF3M2Nfc2xpZHkub3BlcmEgJiYKICAgICAgICAhdzNjX3Ns&#xA;aWR5Lmhhc19jbGFzcyh3M2Nfc2xpZHkudG9jLCAiaGlkZGVuIikpCiAgICAgIHczY19zbGlkeS5o&#xA;ZWxwX2FuY2hvci5mb2N1cygpOwogIH0sCgogIHRvZ2dsZV90YWJsZV9vZl9jb250ZW50czogZnVu&#xA;Y3Rpb24gKCkgewogICAgaWYgKHczY19zbGlkeS5pc19zaG93bl90b2MoKSkKICAgICAgdzNjX3Ns&#xA;aWR5LmhpZGVfdGFibGVfb2ZfY29udGVudHModHJ1ZSk7CiAgICBlbHNlCiAgICAgIHczY19zbGlk&#xA;eS5zaG93X3RhYmxlX29mX2NvbnRlbnRzKCk7CiAgfSwKCiAgLy8gY2FsbGVkIG9uIGNsaWNraW5n&#xA;IHRvYyBlbnRyeQogIHRvY19jbGljazogZnVuY3Rpb24gKGUpIHsKICAgIGlmICghZSkKICAgICAg&#xA;ZSA9IHdpbmRvdy5ldmVudDsKCiAgICB2YXIgdGFyZ2V0ID0gdzNjX3NsaWR5LmdldF90YXJnZXQo&#xA;ZSk7CgogICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZVR5cGUgPT0gMSkKICAgIHsKICAgICAg&#xA;dmFyIHVyaSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKCiAgICAgIGlmICh1cmkpCiAg&#xA;ICAgIHsKICAgICAgICAvL2FsZXJ0KCJnb2luZyB0byAiICsgdXJpKTsKICAgICAgICB2YXIgc2xp&#xA;ZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHcz&#xA;Y19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsKICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVy&#xA;ID0gdzNjX3NsaWR5LmZpbmRfc2xpZGVfbnVtYmVyKHVyaSk7CiAgICAgICAgc2xpZGUgPSB3M2Nf&#xA;c2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5s&#xA;YXN0X3Nob3duID0gbnVsbDsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CiAgICAg&#xA;ICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAg&#xA;ICAgICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRh&#xA;bF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKSk7CiAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xp&#xA;ZGUoc2xpZGUpOwogICAgICAgIC8vdGFyZ2V0LmZvY3VzKCk7CgogICAgICAgIHRyeQogICAgICAg&#xA;IHsKICAgICAgICAgIGlmICghdzNjX3NsaWR5Lm9wZXJhKQogICAgICAgICAgICB3M2Nfc2xpZHku&#xA;aGVscF9hbmNob3IuZm9jdXMoKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpCiAgICAgICAg&#xA;ewogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2Nv&#xA;bnRlbnRzKHRydWUpOwogICAgaWYgKHczY19zbGlkeS5pZTcpIHczY19zbGlkeS5pZV9oYWNrKCk7&#xA;CiAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKICAgIHJldHVybiB3M2Nfc2xpZHku&#xA;Y2FuY2VsKGUpOwogIH0sCgogIC8vIGNhbGxlZCBvbmtleWRvd24gZm9yIHRvYyBlbnRyeQogIHRv&#xA;Y19rZXlfZG93bjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICB2YXIga2V5OwoKICAgIGlmICghZXZl&#xA;bnQpCiAgICAgIHZhciBldmVudCA9IHdpbmRvdy5ldmVudDsKCiAgICAvLyBrbHVkZ2UgYXJvdW5k&#xA;IE5TL0lFIGRpZmZlcmVuY2VzIAogICAgaWYgKHdpbmRvdy5ldmVudCkKICAgICAga2V5ID0gd2lu&#xA;ZG93LmV2ZW50LmtleUNvZGU7CiAgICBlbHNlIGlmIChldmVudC53aGljaCkKICAgICAga2V5ID0g&#xA;ZXZlbnQud2hpY2g7CiAgICBlbHNlCiAgICAgIHJldHVybiB0cnVlOyAvLyBZaWtlcyEgdW5rbm93&#xA;biBicm93c2VyCgogICAgLy8gaWdub3JlIGV2ZW50IGlmIGtleSB2YWx1ZSBpcyB6ZXJvCiAgICAv&#xA;LyBhcyBmb3IgYWx0IG9uIE9wZXJhIGFuZCBLb25xdWVyb3IKICAgIGlmICgha2V5KQogICAgICBy&#xA;ZXR1cm4gdHJ1ZTsKCiAgICAvLyBjaGVjayBmb3IgY29uY3VycmVudCBjb250cm9sL2NvbW1hbmQv&#xA;YWx0IGtleQogICAgLy8gYnV0IGFyZSB0aGVzZSBvbmx5IHByZXNlbnQgb24gbW91c2UgZXZlbnRz&#xA;PwoKICAgIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50LmFsdEtleSkKICAgICAgcmV0dXJuIHRy&#xA;dWU7CgogICAgaWYgKGtleSA9PSAxMykKICAgIHsKICAgICAgdmFyIHVyaSA9IHRoaXMuZ2V0QXR0&#xA;cmlidXRlKCJocmVmIik7CgogICAgICBpZiAodXJpKQogICAgICB7CiAgICAgICAgLy9hbGVydCgi&#xA;Z29pbmcgdG8gIiArIHVyaSk7CiAgICAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3cz&#xA;Y19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRl&#xA;KTsKICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID0gdzNjX3NsaWR5LmZpbmRfc2xpZGVf&#xA;bnVtYmVyKHVyaSk7CiAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5z&#xA;bGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgICAg&#xA;ICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CiAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmls&#xA;aXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAgICAgICAgdzNjX3NsaWR5LnNldF9lb3Nf&#xA;c3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3No&#xA;b3duKSk7CiAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICAgIC8vdGFy&#xA;Z2V0LmZvY3VzKCk7CgogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgIGlmICghdzNjX3Ns&#xA;aWR5Lm9wZXJhKQogICAgICAgICAgICB3M2Nfc2xpZHkuaGVscF9hbmNob3IuZm9jdXMoKTsKICAg&#xA;ICAgICB9CiAgICAgICAgY2F0Y2ggKGUpCiAgICAgICAgewogICAgICAgIH0KICAgICAgfQoKICAg&#xA;ICAgdzNjX3NsaWR5LmhpZGVfdGFibGVfb2ZfY29udGVudHModHJ1ZSk7CgogICAgICBpZiAoc2Vs&#xA;Zi5pZTcpCiAgICAgICB3M2Nfc2xpZHkuaWVfaGFjaygpOwoKICAgICAgcmV0dXJuIHczY19zbGlk&#xA;eS5jYW5jZWwoZXZlbnQpOwogICAgfQoKICAgIGlmIChrZXkgPT0gNDAgJiYgdGhpcy5uZXh0KQog&#xA;ICAgewogICAgICB0aGlzLm5leHQuZm9jdXMoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5j&#xA;ZWwoZXZlbnQpOwogICAgfQoKICAgIGlmIChrZXkgPT0gMzggJiYgdGhpcy5wcmV2aW91cykKICAg&#xA;IHsKICAgICAgdGhpcy5wcmV2aW91cy5mb2N1cygpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNh&#xA;bmNlbChldmVudCk7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgZmlyZV9jbGlja19l&#xA;dmVudDogZnVuY3Rpb24gKHN4LCBzeSwgY3gsIGN5KQogIHsKICAgIHZhciBlbGVtZW50ID0gZG9j&#xA;dW1lbnQuYm9keTsKCiAgICB2YXIgZSA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5jcmVhdGVFdmVu&#xA;dCgnTW91c2VFdmVudHMnKTsKCiAgICBlLmluaXRNb3VzZUV2ZW50KCdjbGljaycsIHRydWUsIHRy&#xA;dWUsCiAgICAgICAgIGVsZW1lbnQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldywKICAgICAgICAg&#xA;MSwKICAgICAgICAgc3gsIHN5LCBjeCwgY3ksCiAgICAgICAgIGZhbHNlLAogICAgICAgICBmYWxz&#xA;ZSwKICAgICAgICAgZmFsc2UsCiAgICAgICAgIGZhbHNlLAogICAgICAgICAwLCBudWxsKTsKCiAg&#xA;ICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZSk7CiAgfSwKCiAgdG91Y2hzdGFydDogZnVuY3Rpb24g&#xA;KGUpCiAgewogICAgLy8gYSBkb3VibGUgdG91Y2ggb2Z0ZW4gc3RhcnRzIHdpdGggYQogICAgLy8g&#xA;c2luZ2xlIHRvdWNoIGR1ZSB0byBmaW5nZXJzIHRvdWNoaW5nCiAgICAvLyBkb3duIGF0IHNsaWdo&#xA;dGx5IGRpZmZlcmVudCB0aW1lcwogICAgLy8gdGh1cyBhdm9pZCBjYWxsaW5nIHByZXZlbnREZWZh&#xA;dWx0IGhlcmUKICAgIHRoaXMucHJldl90YXAgPSB0aGlzLmxhc3RfdGFwOwogICAgdGhpcy5sYXN0&#xA;X3RhcCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpOwoKICAgIHZhciB0YXBfZGVsYXkgPSB0aGlzLmxh&#xA;c3RfdGFwIC0gdGhpcy5wcmV2X3RhcDsKCiAgICBpZiAodGFwX2RlbGF5IDw9IDIwMCkKICAgIHsK&#xA;ICAgICAgLy8gZG91YmxlIHRhcAogICAgfQoKICAgIHZhciB0b3VjaCA9IGUudG91Y2hlc1swXTsK&#xA;CiAgICB0aGlzLnN0YXJ0X3ggPSB0b3VjaC5wYWdlWDsKICAgIHRoaXMuc3RhcnRfeSA9IHRvdWNo&#xA;LnBhZ2VZOwogICAgdGhpcy5kZWx0YV94ID0gdGhpcy5kZWx0YV95ID0gMDsKICB9LAoKICB0b3Vj&#xA;aG1vdmU6IGZ1bmN0aW9uIChlKQogIHsKICAgIC8vIG92ZXJyaWRlIG5hdGl2ZSBnZXN0dXJlcyBm&#xA;b3Igc2luZ2xlIHRvdWNoCiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpCiAgICAgIHJldHVy&#xA;bjsKCiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07&#xA;CiAgICB0aGlzLmRlbHRhX3ggPSB0b3VjaC5wYWdlWCAtIHRoaXMuc3RhcnRfeDsKICAgIHRoaXMu&#xA;ZGVsdGFfeSA9IHRvdWNoLnBhZ2VZIC0gdGhpcy5zdGFydF95OwogIH0sCgogIHRvdWNoZW5kOiBm&#xA;dW5jdGlvbiAoZSkKICB7CiAgICAvLyBkZWZhdWx0IGJlaGF2aW9yIGZvciBtdWx0aS10b3VjaAog&#xA;ICAgaWYgKGUudG91Y2hlcy5sZW5ndGggPiAxKQogICAgICByZXR1cm47CgogICAgLy9lLnByZXZl&#xA;bnREZWZhdWx0KCk7CgogICAgdmFyIGRlbGF5ID0gKG5ldyBEYXRlKS5nZXRUaW1lKCkgLSB0aGlz&#xA;Lmxhc3RfdGFwOwogICAgdmFyIGR4ID0gdGhpcy5kZWx0YV94OwogICAgdmFyIGR5ID0gdGhpcy5k&#xA;ZWx0YV95OwogICAgdmFyIGFic19keCA9IE1hdGguYWJzKGR4KTsKICAgIHZhciBhYnNfZHkgPSBN&#xA;YXRoLmFicyhkeSk7CgogICAgaWYgKGRlbGF5IDwgNTAwICYmIChhYnNfZHggPiAxMDAgfHwgYWJz&#xA;X2R5ID4gMTAwKSkKICAgIHsKICAgICAgaWYgKGFic19keCA+IDAuNSAqIGFic19keSkKICAgICAg&#xA;ewogICAgICAgIGlmIChkeCA8IDApCiAgICAgICAgICB3M2Nfc2xpZHkubmV4dF9zbGlkZSh0cnVl&#xA;KTsKICAgICAgICBlbHNlCiAgICAgICAgICB3M2Nfc2xpZHkucHJldmlvdXNfc2xpZGUodHJ1ZSk7&#xA;CiAgICAgIH0KICAgICAgZWxzZSBpZiAoYWJzX2R5ID4gMiAqIGFic19keCkKICAgICAgewogICAg&#xA;ICAgIHczY19zbGlkeS50b2dnbGVfdGFibGVfb2ZfY29udGVudHMoKTsKICAgICAgfQogICAgICBl&#xA;bHNlIC8vIHRyZWF0IGFzIGNsaWNrCiAgICAgIHsKICAgICAgICB2YXIgdG91Y2ggPSBlLnRvdWNo&#xA;ZXNbMF07CiAgICAgICAgdzNjX3NsaWR5LmZpcmVfY2xpY2tfZXZlbnQoCiAgICAgICAgICB0b3Vj&#xA;aC5zY3JlZW5YLCB0b3VjaC5zY3JlZW5ZLAogICAgICAgICAgdG91Y2guY2xpZW50WCwgdG91Y2gu&#xA;Y2xpZW50WQogICAgICAgICk7CiAgICAgIH0KICAgIH0KICB9LAoKICAvLyAjIyMgT0JTT0xFVEUg&#xA;IyMjCiAgYmVmb3JlX3ByaW50OiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnNob3dfYWxsX3NsaWRl&#xA;cygpOwogICAgdGhpcy5oaWRlX3Rvb2xiYXIoKTsKICAgIGFsZXJ0KCJiZWZvcmUgcHJpbnQiKTsK&#xA;ICB9LAoKICAvLyAjIyMgT0JTT0xFVEUgIyMjCiAgYWZ0ZXJfcHJpbnQ6IGZ1bmN0aW9uICgpIHsK&#xA;ICAgIGlmICghdGhpcy52aWV3X2FsbCkKICAgIHsKICAgICAgdGhpcy5zaW5nbGVfc2xpZGVfdmll&#xA;dygpOwogICAgICB0aGlzLnNob3dfdG9vbGJhcigpOwogICAgfQogICAgYWxlcnQoImFmdGVyIHBy&#xA;aW50Iik7CiAgfSwKCiAgLy8gIyMjIE9CU09MRVRFICMjIwogIHByaW50X3NsaWRlczogZnVuY3Rp&#xA;b24gKCkgewogICAgdGhpcy5iZWZvcmVfcHJpbnQoKTsKICAgIHdpbmRvdy5wcmludCgpOwogICAg&#xA;dGhpcy5hZnRlcl9wcmludCgpOwogIH0sCgogIC8vICMjIyBPQlNPTEVURSA/PyAjIyMKICB0b2dn&#xA;bGVfdmlldzogZnVuY3Rpb24gKCkgewogICAgaWYgKHRoaXMudmlld19hbGwpCiAgICB7CiAgICAg&#xA;IHRoaXMuc2luZ2xlX3NsaWRlX3ZpZXcoKTsKICAgICAgdGhpcy5zaG93X3Rvb2xiYXIoKTsKICAg&#xA;ICAgdGhpcy52aWV3X2FsbCA9IDA7CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgIHRoaXMuc2hv&#xA;d19hbGxfc2xpZGVzKCk7CiAgICAgIHRoaXMuaGlkZV90b29sYmFyKCk7CiAgICAgIHRoaXMudmll&#xA;d19hbGwgPSAxOwogICAgfQogIH0sCgogIC8vIHByZXBhcmUgZm9yIHByaW50aW5nICAjIyMgT0JT&#xA;T0xFVEUgIyMjCiAgc2hvd19hbGxfc2xpZGVzOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnJlbW92&#xA;ZV9jbGFzcyhkb2N1bWVudC5ib2R5LCAic2luZ2xlX3NsaWRlIik7CiAgICB0aGlzLnNldF92aXNp&#xA;YmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgidmlzaWJsZSIpOwogIH0sCgogIC8vIHJlc3RvcmUgYWZ0&#xA;ZXIgcHJpbnRpbmcgICMjIyBPQlNPTEVURSAjIyMKICBzaW5nbGVfc2xpZGVfdmlldzogZnVuY3Rp&#xA;b24gKCkgewogICAgdGhpcy5hZGRfY2xhc3MoZG9jdW1lbnQuYm9keSwgInNpbmdsZV9zbGlkZSIp&#xA;OwogICAgdGhpcy5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICAg&#xA;IHRoaXMubGFzdF9zaG93biA9IHRoaXMucHJldmlvdXNfaW5jcmVtZW50YWxfaXRlbShudWxsKTsK&#xA;ICB9LAoKICAvLyBzdXBwcmVzcyBJRSdzIGltYWdlIHRvb2xiYXIgcG9wIHVwCiAgaGlkZV9pbWFn&#xA;ZV90b29sYmFyOiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXRoaXMubnNfcG9zKQogICAgewogICAg&#xA;ICB2YXIgaW1hZ2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIklNRyIpOwoKICAg&#xA;ICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbWFnZXMubGVuZ3RoOyArK2kpCiAgICAgICAgaW1hZ2Vz&#xA;W2ldLnNldEF0dHJpYnV0ZSgiZ2FsbGVyeWltZyIsICJubyIpOwogICAgfQogIH0sCgogIHVubG9h&#xA;ZGVkOiBmdW5jdGlvbiAoZSkgewogICAgLy9hbGVydCgidW5sb2FkZWQiKTsKICB9LAoKICAvLyBT&#xA;YWZhcmkgYW5kIEtvbnF1ZXJvciBkb24ndCB5ZXQgc3VwcG9ydCBnZXRDb21wdXRlZFN0eWxlKCkK&#xA;ICAvLyBhbmQgdGhleSBhbHdheXMgcmVsb2FkIHBhZ2Ugd2hlbiBsb2NhdGlvbi5ocmVmIGlzIHVw&#xA;ZGF0ZWQKICBpc19LSFRNTDogZnVuY3Rpb24gKCkgewogICAgdmFyIGFnZW50ID0gbmF2aWdhdG9y&#xA;LnVzZXJBZ2VudDsKICAgIHJldHVybiAoYWdlbnQuaW5kZXhPZigiS0hUTUwiKSA+PSAwID8gdHJ1&#xA;ZSA6IGZhbHNlKTsKICB9LAoKICAvLyBmaW5kIHNsaWRlIG5hbWUgZnJvbSBmaXJzdCBoMSBlbGVt&#xA;ZW50CiAgLy8gZGVmYXVsdCB0byBkb2N1bWVudCB0aXRsZSArIHNsaWRlIG51bWJlcgogIHNsaWRl&#xA;X25hbWU6IGZ1bmN0aW9uIChpbmRleCkgewogICAgdmFyIG5hbWUgPSBudWxsOwogICAgdmFyIHNs&#xA;aWRlID0gdGhpcy5zbGlkZXNbaW5kZXhdOwoKICAgIHZhciBoZWFkaW5nID0gdGhpcy5maW5kX2hl&#xA;YWRpbmcoc2xpZGUpOwoKICAgIGlmIChoZWFkaW5nKQogICAgICBuYW1lID0gdGhpcy5leHRyYWN0&#xA;X3RleHQoaGVhZGluZyk7CgogICAgaWYgKCFuYW1lKQogICAgICBuYW1lID0gdGhpcy50aXRsZSAr&#xA;ICIoIiArIChpbmRleCArIDEpICsgIikiOwoKICAgIG5hbWUucmVwbGFjZSgvXCYvZywgIiZhbXA7&#xA;Iik7CiAgICBuYW1lLnJlcGxhY2UoL1w8L2csICImbHQ7Iik7CiAgICBuYW1lLnJlcGxhY2UoL1w+&#xA;L2csICImZ3Q7Iik7CgogICAgcmV0dXJuIG5hbWU7CiAgfSwKCiAgLy8gZmluZCBmaXJzdCBoMSBl&#xA;bGVtZW50IGluIERPTSB0cmVlCiAgZmluZF9oZWFkaW5nOiBmdW5jdGlvbiAobm9kZSkgewogICAg&#xA;aWYgKCFub2RlIHx8IG5vZGUubm9kZVR5cGUgIT0gMSkKICAgICAgcmV0dXJuIG51bGw7CgogICAg&#xA;aWYgKG5vZGUubm9kZU5hbWUgPT0gIkgxIiB8fCBub2RlLm5vZGVOYW1lID09ICJoMSIpCiAgICAg&#xA;IHJldHVybiBub2RlOwoKICAgIHZhciBjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZDsKCiAgICB3aGls&#xA;ZSAoY2hpbGQpCiAgICB7CiAgICAgIG5vZGUgPSB0aGlzLmZpbmRfaGVhZGluZyhjaGlsZCk7Cgog&#xA;ICAgICBpZiAobm9kZSkKICAgICAgICByZXR1cm4gbm9kZTsKCiAgICAgIGNoaWxkID0gY2hpbGQu&#xA;bmV4dFNpYmxpbmc7CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfSwKCiAgLy8gcmVjdXJzaXZl&#xA;bHkgZXh0cmFjdCB0ZXh0IGZyb20gRE9NIHRyZWUKICBleHRyYWN0X3RleHQ6IGZ1bmN0aW9uIChu&#xA;b2RlKSB7CiAgICBpZiAoIW5vZGUpCiAgICAgIHJldHVybiAiIjsKCiAgICAvLyB0ZXh0IG5vZGVz&#xA;CiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAzKQogICAgICByZXR1cm4gbm9kZS5ub2RlVmFsdWU7&#xA;CgogICAgLy8gZWxlbWVudHMKICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpCiAgICB7CiAgICAg&#xA;IG5vZGUgPSBub2RlLmZpcnN0Q2hpbGQ7CiAgICAgIHZhciB0ZXh0ID0gIiI7CgogICAgICB3aGls&#xA;ZSAobm9kZSkKICAgICAgewogICAgICAgIHRleHQgPSB0ZXh0ICsgdGhpcy5leHRyYWN0X3RleHQo&#xA;bm9kZSk7CiAgICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICAgIH0KCiAgICAgIHJl&#xA;dHVybiB0ZXh0OwogICAgfQoKICAgIHJldHVybiAiIjsKICB9LAoKICAvLyBmaW5kIGNvcHlyaWdo&#xA;dCB0ZXh0IGZyb20gbWV0YSBlbGVtZW50CiAgZmluZF9jb3B5cmlnaHQ6IGZ1bmN0aW9uICgpIHsK&#xA;ICAgIHZhciBuYW1lLCBjb250ZW50OwogICAgdmFyIG1ldGEgPSBkb2N1bWVudC5nZXRFbGVtZW50&#xA;c0J5VGFnTmFtZSgibWV0YSIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0YS5sZW5ndGg7&#xA;ICsraSkKICAgIHsKICAgICAgbmFtZSA9IG1ldGFbaV0uZ2V0QXR0cmlidXRlKCJuYW1lIik7CiAg&#xA;ICAgIGNvbnRlbnQgPSBtZXRhW2ldLmdldEF0dHJpYnV0ZSgiY29udGVudCIpOwoKICAgICAgaWYg&#xA;KG5hbWUgPT0gImNvcHlyaWdodCIpCiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7CiAgICB9CgogICAg&#xA;cmV0dXJuIG51bGw7CiAgfSwKCiAgZmluZF9zaXplX2FkanVzdDogZnVuY3Rpb24gKCkgewogICAg&#xA;dmFyIG5hbWUsIGNvbnRlbnQsIG9mZnNldDsKICAgIHZhciBtZXRhID0gZG9jdW1lbnQuZ2V0RWxl&#xA;bWVudHNCeVRhZ05hbWUoIm1ldGEiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGEubGVu&#xA;Z3RoOyArK2kpCiAgICB7CiAgICAgIG5hbWUgPSBtZXRhW2ldLmdldEF0dHJpYnV0ZSgibmFtZSIp&#xA;OwogICAgICBjb250ZW50ID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoImNvbnRlbnQiKTsKCiAgICAg&#xA;IGlmIChuYW1lID09ICJmb250LXNpemUtYWRqdXN0bWVudCIpCiAgICAgICAgcmV0dXJuIDEgKiBj&#xA;b250ZW50OwogICAgfQoKICAgIHJldHVybiAxOwogIH0sCgogIC8vIDxtZXRhIG5hbWU9ImR1cmF0&#xA;aW9uIiBjb250ZW50PSIyMCIgLz4gIGZvciAyMCBtaW51dGVzCiAgZmluZF9kdXJhdGlvbjogZnVu&#xA;Y3Rpb24gKCkgewogICAgdmFyIG5hbWUsIGNvbnRlbnQsIG9mZnNldDsKICAgIHZhciBtZXRhID0g&#xA;ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm1ldGEiKTsKCiAgICBmb3IgKHZhciBpID0g&#xA;MDsgaSA8IG1ldGEubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIG5hbWUgPSBtZXRhW2ldLmdldEF0&#xA;dHJpYnV0ZSgibmFtZSIpOwogICAgICBjb250ZW50ID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoImNv&#xA;bnRlbnQiKTsKCiAgICAgIGlmIChuYW1lID09ICJkdXJhdGlvbiIpCiAgICAgICAgcmV0dXJuIDYw&#xA;MDAwICogY29udGVudDsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9LAoKICByZXBsYWNlX2J5&#xA;X25vbl9icmVha2luZ19zcGFjZTogZnVuY3Rpb24gKHN0cikgewogICAgZm9yICh2YXIgaSA9IDA7&#xA;IGkgPCBzdHIubGVuZ3RoOyArK2kpCiAgICAgIHN0cltpXSA9IDE2MDsKICB9LAoKICAvLyAjIyMg&#xA;Q0hFQ0sgTUUgIyMjIGlzIHVzZSBvZiAibGkiIG9rYXkgZm9yIHRleHQvaHRtbD8KICAvLyBmb3Ig&#xA;WEhUTUwgZG8gd2UgYWxzbyBuZWVkIHRvIHNwZWNpZnkgbmFtZXNwYWNlPwogIGluaXRfb3V0bGlu&#xA;ZXI6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBpdGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlU&#xA;YWdOYW1lKCJsaSIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyArK2kp&#xA;CiAgICB7CiAgICAgIHZhciB0YXJnZXQgPSBpdGVtc1tpXTsKCiAgICAgIGlmICghdGhpcy5oYXNf&#xA;Y2xhc3ModGFyZ2V0LnBhcmVudE5vZGUsICJvdXRsaW5lIikpCiAgICAgICAgY29udGludWU7Cgog&#xA;ICAgICB0YXJnZXQub25jbGljayA9IHRoaXMub3V0bGluZV9jbGljazsKLyogIyMjIG1vcmUgd29y&#xA;ayBuZWVkZWQgZm9yIElFNgogICAgICBpZiAoIXRoaXMubnNfcG9zKQogICAgICB7CiAgICAgICAg&#xA;dGFyZ2V0Lm9ubW91c2VvdmVyID0gdGhpcy5ob3Zlcl9vdXRsaW5lOwogICAgICAgIHRhcmdldC5v&#xA;bm1vdXNlb3V0ID0gdGhpcy51bmhvdmVyX291dGxpbmU7CiAgICAgIH0KKi8KICAgICAgaWYgKHRo&#xA;aXMuZm9sZGFibGUodGFyZ2V0KSkKICAgICAgewogICAgICAgIHRhcmdldC5mb2xkYWJsZSA9IHRy&#xA;dWU7CiAgICAgICAgdGFyZ2V0Lm9uZm9jdXMgPSBmdW5jdGlvbiAoKSB7dzNjX3NsaWR5Lm91dGxp&#xA;bmUgPSB0aGlzO307CiAgICAgICAgdGFyZ2V0Lm9uYmx1ciA9IGZ1bmN0aW9uICgpIHt3M2Nfc2xp&#xA;ZHkub3V0bGluZSA9IG51bGw7fTsKCiAgICAgICAgaWYgKCF0YXJnZXQuZ2V0QXR0cmlidXRlKCJ0&#xA;YWJpbmRleCIpKQogICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCAiMCIp&#xA;OwoKICAgICAgICBpZiAodGhpcy5oYXNfY2xhc3ModGFyZ2V0LCAiZXhwYW5kIikpCiAgICAgICAg&#xA;ICB0aGlzLnVuZm9sZCh0YXJnZXQpOwogICAgICAgIGVsc2UKICAgICAgICAgIHRoaXMuZm9sZCh0&#xA;YXJnZXQpOwogICAgICB9CiAgICAgIGVsc2UKICAgICAgewogICAgICAgIHRoaXMuYWRkX2NsYXNz&#xA;KHRhcmdldCwgIm5vZm9sZCIpOwogICAgICAgIHRhcmdldC52aXNpYmxlID0gdHJ1ZTsKICAgICAg&#xA;ICB0YXJnZXQuZm9sZGFibGUgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0sCgogIGZvbGRhYmxl&#xA;OiBmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKCFpdGVtIHx8IGl0ZW0ubm9kZVR5cGUgIT0gMSkK&#xA;ICAgICAgcmV0dXJuIGZhbHNlOwoKICAgIHZhciBub2RlID0gaXRlbS5maXJzdENoaWxkOwoKICAg&#xA;IHdoaWxlIChub2RlKQogICAgewogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxICYmIHRoaXMu&#xA;aXNfYmxvY2sobm9kZSkpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICBub2RlID0gbm9kZS5u&#xA;ZXh0U2libGluZzsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgLy8gIyMjIENIRUNL&#xA;IE1FICMjIyBzd2l0Y2ggdG8gYWRkL3JlbW92ZSAiaGlkZGVuIiBjbGFzcwogIGZvbGQ6IGZ1bmN0&#xA;aW9uIChpdGVtKSB7CiAgICBpZiAoaXRlbSkKICAgIHsKICAgICAgdGhpcy5yZW1vdmVfY2xhc3Mo&#xA;aXRlbSwgInVuZm9sZGVkIik7CiAgICAgIHRoaXMuYWRkX2NsYXNzKGl0ZW0sICJmb2xkZWQiKTsK&#xA;ICAgIH0KCiAgICB2YXIgbm9kZSA9IGl0ZW0gPyBpdGVtLmZpcnN0Q2hpbGQgOiBudWxsOwoKICAg&#xA;IHdoaWxlIChub2RlKQogICAgewogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxICYmIHRoaXMu&#xA;aXNfYmxvY2sobm9kZSkpIC8vIGVsZW1lbnQKICAgICAgewogICAgICAgICB3M2Nfc2xpZHkuYWRk&#xA;X2NsYXNzKG5vZGUsICJoaWRkZW4iKTsKICAgICAgfQoKICAgICAgbm9kZSA9IG5vZGUubmV4dFNp&#xA;Ymxpbmc7CiAgICB9CgogICAgaXRlbS52aXNpYmxlID0gZmFsc2U7CiAgfSwKCiAgLy8gIyMjIENI&#xA;RUNLIE1FICMjIyBzd2l0Y2ggdG8gYWRkL3JlbW92ZSAiaGlkZGVuIiBjbGFzcwogIHVuZm9sZDog&#xA;ZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGlmIChpdGVtKQogICAgewogICAgICB0aGlzLmFkZF9jbGFz&#xA;cyhpdGVtLCAidW5mb2xkZWQiKTsKICAgICAgdGhpcy5yZW1vdmVfY2xhc3MoaXRlbSwgImZvbGRl&#xA;ZCIpOwogICAgfQoKICAgIHZhciBub2RlID0gaXRlbSA/IGl0ZW0uZmlyc3RDaGlsZCA6IG51bGw7&#xA;CgogICAgd2hpbGUgKG5vZGUpCiAgICB7CiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYg&#xA;dGhpcy5pc19ibG9jayhub2RlKSkgLy8gZWxlbWVudAogICAgICB7CiAgICAgICAgdzNjX3NsaWR5&#xA;LnJlbW92ZV9jbGFzcyhub2RlLCAiaGlkZGVuIik7CiAgICAgIH0KCiAgICAgIG5vZGUgPSBub2Rl&#xA;Lm5leHRTaWJsaW5nOwogICAgfQoKICAgIGl0ZW0udmlzaWJsZSA9IHRydWU7CiAgfSwKCiAgb3V0&#xA;bGluZV9jbGljazogZnVuY3Rpb24gKGUpIHsKICAgIGlmICghZSkKICAgICAgZSA9IHdpbmRvdy5l&#xA;dmVudDsKCiAgICB2YXIgcmlnaHRjbGljayA9IGZhbHNlOwogICAgdmFyIHRhcmdldCA9IHczY19z&#xA;bGlkeS5nZXRfdGFyZ2V0KGUpOwoKICAgIHdoaWxlICh0YXJnZXQgJiYgdGFyZ2V0LnZpc2libGUg&#xA;PT0gdW5kZWZpbmVkKQogICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTsKCiAgICBpZiAo&#xA;IXRhcmdldCkKICAgICAgcmV0dXJuIHRydWU7CgogICAgaWYgKGUud2hpY2gpCiAgICAgIHJpZ2h0&#xA;Y2xpY2sgPSAoZS53aGljaCA9PSAzKTsKICAgIGVsc2UgaWYgKGUuYnV0dG9uKQogICAgICByaWdo&#xA;dGNsaWNrID0gKGUuYnV0dG9uID09IDIpOwoKICAgIGlmICghcmlnaHRjbGljayAmJiB0YXJnZXQu&#xA;dmlzaWJsZSAhPSB1bmRlZmluZWQpCiAgICB7CiAgICAgIGlmICh0YXJnZXQuZm9sZGFibGUpCiAg&#xA;ICAgIHsKICAgICAgICBpZiAodGFyZ2V0LnZpc2libGUpCiAgICAgICAgICB3M2Nfc2xpZHkuZm9s&#xA;ZCh0YXJnZXQpOwogICAgICAgIGVsc2UKICAgICAgICAgIHczY19zbGlkeS51bmZvbGQodGFyZ2V0&#xA;KTsKICAgICAgfQoKICAgICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7CiAgICAgIGUu&#xA;Y2FuY2VsID0gdHJ1ZTsKICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOwogICAgfQoKICAgIHJl&#xA;dHVybiBmYWxzZTsKICB9LAoKICBhZGRfaW5pdGlhbF9wcm9tcHQ6IGZ1bmN0aW9uICgpIHsKICAg&#xA;IHZhciBwcm9tcHQgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKTsKICAgIHByb21wdC5zZXRB&#xA;dHRyaWJ1dGUoImNsYXNzIiwgImluaXRpYWxfcHJvbXB0Iik7CgogICAgdmFyIHAxID0gdGhpcy5j&#xA;cmVhdGVfZWxlbWVudCgicCIpOwogICAgcHJvbXB0LmFwcGVuZENoaWxkKHAxKTsKICAgIHAxLnNl&#xA;dEF0dHJpYnV0ZSgiY2xhc3MiLCAiaGVscCIpOwoKICAgIGlmICh0aGlzLmtleWJvYXJkbGVzcykK&#xA;ICAgICAgcDEuaW5uZXJIVE1MID0gInN3aXBlIGxlZnQgdG8gbW92ZSB0byBuZXh0IHNsaWRlIjsK&#xA;ICAgIGVsc2UKICAgICAgcDEuaW5uZXJIVE1MID0gIlNwYWNlLCBSaWdodCBBcnJvdyBvciBzd2lw&#xA;ZSBsZWZ0IHRvIG1vdmUgdG8gIiArCiAgICAgICAgICAgICAgICAgICAgICJuZXh0IHNsaWRlLCBj&#xA;bGljayBoZWxwIGJlbG93IGZvciBtb3JlIGRldGFpbHMiOwoKICAgIHRoaXMuYWRkX2xpc3RlbmVy&#xA;KHByb21wdCwgImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgZG9jdW1lbnQuYm9keS5yZW1v&#xA;dmVDaGlsZChwcm9tcHQpOwogICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKICAg&#xA;IAogICAgICBpZiAoZS5jYW5jZWwgIT0gdW5kZWZpbmVkKQogICAgICAgIGUuY2FuY2VsID0gdHJ1&#xA;ZTsKICAgICAgCiAgICAgIGlmIChlLnJldHVyblZhbHVlICE9IHVuZGVmaW5lZCkKICAgICAgICBl&#xA;LnJldHVyblZhbHVlID0gZmFsc2U7CiAgICAgIAogICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsK&#xA;CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHByb21wdCk7CiAgICB0aGlzLmluaXRpYWxf&#xA;cHJvbXB0ID0gcHJvbXB0OwogICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtkb2N1bWVudC5ib2R5&#xA;LnJlbW92ZUNoaWxkKHByb21wdCk7fSwgNTAwMCk7CiAgfSwKCiAgYWRkX3Rvb2xiYXI6IGZ1bmN0&#xA;aW9uICgpIHsKICAgIHZhciBjb3VudGVyLCBwYWdlOwoKICAgICB0aGlzLnRvb2xiYXIgPSB0aGlz&#xA;LmNyZWF0ZV9lbGVtZW50KCJkaXYiKTsKICAgICB0aGlzLnRvb2xiYXIuc2V0QXR0cmlidXRlKCJj&#xA;bGFzcyIsICJ0b29sYmFyIik7CgogICAgIC8vIGEgcmVhc29uYWJseSBiZWhhdmVkIGJyb3dzZXIK&#xA;ICAgICBpZiAodGhpcy5uc19wb3MgfHwgIXRoaXMuaWU2KQogICAgIHsKICAgICAgIHZhciByaWdo&#xA;dCA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImRpdiIpOwogICAgICAgcmlnaHQuc2V0QXR0cmlidXRl&#xA;KCJzdHlsZSIsICJmbG9hdDogcmlnaHQ7IHRleHQtYWxpZ246IHJpZ2h0Iik7CgogICAgICAgY291&#xA;bnRlciA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoInNwYW4iKQogICAgICAgY291bnRlci5pbm5lckhU&#xA;TUwgPSB0aGlzLmxvY2FsaXplKCJzbGlkZSIpICsgIiBuL20iOwogICAgICAgcmlnaHQuYXBwZW5k&#xA;Q2hpbGQoY291bnRlcik7CiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQocmlnaHQpOwoK&#xA;ICAgICAgIHZhciBsZWZ0ID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICAgICBsZWZ0&#xA;LnNldEF0dHJpYnV0ZSgic3R5bGUiLCAidGV4dC1hbGlnbjogbGVmdCIpOwoKICAgICAgIC8vIGds&#xA;b2JhbCBlbmQgb2Ygc2xpZGUgaW5kaWNhdG9yCiAgICAgICB0aGlzLmVvcyA9IHRoaXMuY3JlYXRl&#xA;X2VsZW1lbnQoInNwYW4iKTsKICAgICAgIHRoaXMuZW9zLmlubmVySFRNTCA9ICIqICI7CiAgICAg&#xA;ICBsZWZ0LmFwcGVuZENoaWxkKHRoaXMuZW9zKTsKCiAgICAgICB2YXIgaGVscCA9IHRoaXMuY3Jl&#xA;YXRlX2VsZW1lbnQoImEiKTsKICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJocmVmIiwgdGhpcy5o&#xA;ZWxwX3BhZ2UpOwogICAgICAgaGVscC5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6&#xA;ZSh0aGlzLmhlbHBfdGV4dCkpOwogICAgICAgaGVscC5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXpl&#xA;KCJoZWxwPyIpOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZChoZWxwKTsKICAgICAgIHRoaXMuaGVs&#xA;cF9hbmNob3IgPSBoZWxwOyAgLy8gc2F2ZSBmb3IgZm9jdXMgaGFjawoKICAgICAgIHZhciBnYXAx&#xA;ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiAiKTsKICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQo&#xA;Z2FwMSk7CgogICAgICAgdmFyIGNvbnRlbnRzID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiYSIpOwog&#xA;ICAgICAgY29udGVudHMuc2V0QXR0cmlidXRlKCJocmVmIiwgImphdmFzY3JpcHQ6dzNjX3NsaWR5&#xA;LnRvZ2dsZV90YWJsZV9vZl9jb250ZW50cygpIik7CiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1&#xA;dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSgidGFibGUgb2YgY29udGVudHMiKSk7CiAgICAgICBj&#xA;b250ZW50cy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJjb250ZW50cz8iKTsKICAgICAgIGxl&#xA;ZnQuYXBwZW5kQ2hpbGQoY29udGVudHMpOwoKICAgICAgIHZhciBnYXAyID0gZG9jdW1lbnQuY3Jl&#xA;YXRlVGV4dE5vZGUoIiAiKTsKICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQoZ2FwMik7CgogICAgICAg&#xA;dmFyIGNvcHlyaWdodCA9IHRoaXMuZmluZF9jb3B5cmlnaHQoKTsKCiAgICAgICBpZiAoY29weXJp&#xA;Z2h0KQogICAgICAgewogICAgICAgICB2YXIgc3BhbiA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoInNw&#xA;YW4iKTsKICAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSAiY29weXJpZ2h0IjsKICAgICAgICAgc3Bh&#xA;bi5pbm5lckhUTUwgPSBjb3B5cmlnaHQ7CiAgICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQoc3Bhbik7&#xA;CiAgICAgICB9CgogICAgICAgdGhpcy50b29sYmFyLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCAi&#xA;MCIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGxlZnQpOwogICAgIH0KICAgICBl&#xA;bHNlIC8vIElFNiBzbyBuZWVkIHRvIHdvcmsgYXJvdW5kIGl0cyBwb29yIENTUyBzdXBwb3J0CiAg&#xA;ICAgewogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnBvc2l0aW9uID0gKHRoaXMuaWU3ID8gImZp&#xA;eGVkIiA6ICJhYnNvbHV0ZSIpOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnpJbmRleCA9ICIy&#xA;MDAiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLndpZHRoID0gIjk5LjklIjsKICAgICAgIHRo&#xA;aXMudG9vbGJhci5zdHlsZS5oZWlnaHQgPSAiMS4yZW0iOwogICAgICAgdGhpcy50b29sYmFyLnN0&#xA;eWxlLnRvcCA9ICJhdXRvIjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5ib3R0b20gPSAiMCI7&#xA;CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUubGVmdCA9ICIwIjsKICAgICAgIHRoaXMudG9vbGJh&#xA;ci5zdHlsZS5yaWdodCA9ICIwIjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS50ZXh0QWxpZ24g&#xA;PSAibGVmdCI7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuZm9udFNpemUgPSAiNjAlIjsKICAg&#xA;ICAgIHRoaXMudG9vbGJhci5zdHlsZS5jb2xvciA9ICJyZWQiOwogICAgICAgdGhpcy50b29sYmFy&#xA;LmJvcmRlcldpZHRoID0gMDsKICAgICAgIHRoaXMudG9vbGJhci5jbGFzc05hbWUgPSAidG9vbGJh&#xA;ciI7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuYmFja2dyb3VuZCA9ICJyZ2IoMjQwLDI0MCwy&#xA;NDApIjsKCiAgICAgICAvLyB3b3VsZCBsaWtlIHRvIGhhdmUgaGVscCB0ZXh0IGxlZnQgYWxpZ25l&#xA;ZAogICAgICAgLy8gYW5kIHBhZ2UgY291bnRlciByaWdodCBhbGlnbmVkLCBmbG9hdGluZwogICAg&#xA;ICAgLy8gZGl2J3MgZG9uJ3Qgd29yaywgc28gaW5zdGVhZCB1c2UgbmVzdGVkCiAgICAgICAvLyBh&#xA;YnNvbHV0ZWx5IHBvc2l0aW9uZWQgZGl2J3MuCgogICAgICAgdmFyIHNwID0gdGhpcy5jcmVhdGVf&#xA;ZWxlbWVudCgic3BhbiIpOwogICAgICAgc3AuaW5uZXJIVE1MID0gIiZuYnNwOyZuYnNwOyombmJz&#xA;cDsiOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKHNwKTsKICAgICAgIHRoaXMuZW9z&#xA;ID0gc3A7ICAvLyBlbmQgb2Ygc2xpZGUgaW5kaWNhdG9yCgogICAgICAgdmFyIGhlbHAgPSB0aGlz&#xA;LmNyZWF0ZV9lbGVtZW50KCJhIik7CiAgICAgICBoZWxwLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHRo&#xA;aXMuaGVscF9wYWdlKTsKICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJ0aXRsZSIsIHRoaXMubG9j&#xA;YWxpemUodGhpcy5oZWxwX3RleHQpKTsKICAgICAgIGhlbHAuaW5uZXJIVE1MID0gdGhpcy5sb2Nh&#xA;bGl6ZSgiaGVscD8iKTsKICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChoZWxwKTsKICAg&#xA;ICAgIHRoaXMuaGVscF9hbmNob3IgPSBoZWxwOyAgLy8gc2F2ZSBmb3IgZm9jdXMgaGFjawoKICAg&#xA;ICAgIHZhciBnYXAxID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiAiKTsKICAgICAgIHRoaXMu&#xA;dG9vbGJhci5hcHBlbmRDaGlsZChnYXAxKTsKCiAgICAgICB2YXIgY29udGVudHMgPSB0aGlzLmNy&#xA;ZWF0ZV9lbGVtZW50KCJhIik7CiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoImhyZWYiLCAi&#xA;amF2YXNjcmlwdDp0b2dnbGVUYWJsZU9mQ29udGVudHMoKSIpOwogICAgICAgY29udGVudHMuc2V0&#xA;QXR0cmlidXRlKCJ0aXRsZSIsIHRoaXMubG9jYWxpemUoInRhYmxlIG9mIGNvbnRlbnRzIi5sb2Nh&#xA;bGl6ZSkpOwogICAgICAgY29udGVudHMuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgiY29udGVu&#xA;dHM/Iik7CiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoY29udGVudHMpOwoKICAgICAg&#xA;IHZhciBnYXAyID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiAiKTsKICAgICAgIHRoaXMudG9v&#xA;bGJhci5hcHBlbmRDaGlsZChnYXAyKTsKCiAgICAgICB2YXIgY29weXJpZ2h0ID0gdGhpcy5maW5k&#xA;X2NvcHlyaWdodCgpOwoKICAgICAgIGlmIChjb3B5cmlnaHQpCiAgICAgICB7CiAgICAgICAgIHZh&#xA;ciBzcGFuID0gdGhpcy5jcmVhdGVfZWxlbWVudCgic3BhbiIpOwogICAgICAgICBzcGFuLmlubmVy&#xA;SFRNTCA9IGNvcHlyaWdodDsKICAgICAgICAgc3Bhbi5zdHlsZS5jb2xvciA9ICJibGFjayI7CiAg&#xA;ICAgICAgIHNwYW4uc3R5bGUubWFyZ2luTGVmdCA9ICIwLjVlbSI7CiAgICAgICAgIHRoaXMudG9v&#xA;bGJhci5hcHBlbmRDaGlsZChzcGFuKTsKICAgICAgIH0KCiAgICAgICBjb3VudGVyID0gdGhpcy5j&#xA;cmVhdGVfZWxlbWVudCgiZGl2IikKICAgICAgIGNvdW50ZXIuc3R5bGUucG9zaXRpb24gPSAiYWJz&#xA;b2x1dGUiOwogICAgICAgY291bnRlci5zdHlsZS53aWR0aCA9ICJhdXRvIjsgLy8iMjAlIjsKICAg&#xA;ICAgIGNvdW50ZXIuc3R5bGUuaGVpZ2h0ID0gIjEuMmVtIjsKICAgICAgIGNvdW50ZXIuc3R5bGUu&#xA;dG9wID0gImF1dG8iOwogICAgICAgY291bnRlci5zdHlsZS5ib3R0b20gPSAwOwogICAgICAgY291&#xA;bnRlci5zdHlsZS5yaWdodCA9ICIwIjsKICAgICAgIGNvdW50ZXIuc3R5bGUudGV4dEFsaWduID0g&#xA;InJpZ2h0IjsKICAgICAgIGNvdW50ZXIuc3R5bGUuY29sb3IgPSAicmVkIjsKICAgICAgIGNvdW50&#xA;ZXIuc3R5bGUuYmFja2dyb3VuZCA9ICJyZ2IoMjQwLDI0MCwyNDApIjsKCiAgICAgICBjb3VudGVy&#xA;LmlubmVySFRNTCA9IHRoaXMubG9jYWxpemUoInNsaWRlIikgKyAiIG4vbSI7CiAgICAgICB0aGlz&#xA;LnRvb2xiYXIuYXBwZW5kQ2hpbGQoY291bnRlcik7CiAgICAgfQoKICAgICAvLyBlbnN1cmUgdGhh&#xA;dCBjbGljayBpc24ndCBwYXNzZWQgdGhyb3VnaCB0byB0aGUgcGFnZQogICAgIHRoaXMudG9vbGJh&#xA;ci5vbmNsaWNrID0KICAgICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICBpZiAoIWUpCiAg&#xA;ICAgICAgICAgICBlID0gd2luZG93LmV2ZW50OwoKICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50&#xA;YXJnZXQ7CgogICAgICAgICAgIGlmICghdGFyZ2V0ICYmIGUuc3JjRWxlbWVudCkKICAgICAgICAg&#xA;ICAgIHRhcmdldCA9IGUuc3JjRWxlbWVudDsKCiAgICAgICAgICAgLy8gd29yayBhcm91bmQgU2Fm&#xA;YXJpIGJ1ZwogICAgICAgICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0Lm5vZGVUeXBlID09IDMpCiAg&#xA;ICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTsKCiAgICAgICAgICAgdzNjX3Ns&#xA;aWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7CgogICAgICAgICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0&#xA;Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT0gImEiKQogICAgICAgICAgICAgdzNjX3NsaWR5Lm1v&#xA;dXNlX2J1dHRvbl9jbGljayhlKTsKICAgICAgICAgfTsKCiAgICAgdGhpcy5zbGlkZV9udW1iZXJf&#xA;ZWxlbWVudCA9IGNvdW50ZXI7CiAgICAgdGhpcy5zZXRfZW9zX3N0YXR1cyhmYWxzZSk7CiAgICAg&#xA;ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnRvb2xiYXIpOwogIH0sCgogIC8vIHd5c2l3&#xA;eWcgZWRpdG9ycyBtYWtlIGl0IGhhcmQgdG8gdXNlIGRpdiBlbGVtZW50cwogIC8vIGUuZy4gYW1h&#xA;eWEgbG9zZXMgdGhlIGRpdiB3aGVuIHlvdSBjb3B5IGFuZCBwYXN0ZQogIC8vIHRoaXMgZnVuY3Rp&#xA;b24gd3JhcHMgZGl2IGVsZW1lbnRzIGFyb3VuZCBpbXBsaWNpdAogIC8vIHNsaWRlcyB3aGljaCBz&#xA;dGFydCB3aXRoIGFuIGgxIGVsZW1lbnQgYW5kIGNvbnRpbnVlCiAgLy8gdXAgdG8gdGhlIG5leHQg&#xA;aGVhZGluZyBvciBkaXYgZWxlbWVudAogIHdyYXBfaW1wbGljaXRfc2xpZGVzOiBmdW5jdGlvbiAo&#xA;KSB7CiAgICB2YXIgaSwgaGVhZGluZywgbm9kZSwgbmV4dCwgZGl2OwogICAgdmFyIGhlYWRpbmdz&#xA;ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImgxIik7CgogICAgaWYgKCFoZWFkaW5n&#xA;cykKICAgICAgcmV0dXJuOwoKICAgIGZvciAoaSA9IDA7IGkgPCBoZWFkaW5ncy5sZW5ndGg7ICsr&#xA;aSkKICAgIHsKICAgICAgaGVhZGluZyA9IGhlYWRpbmdzW2ldOwoKICAgICAgaWYgKGhlYWRpbmcu&#xA;cGFyZW50Tm9kZSAhPSBkb2N1bWVudC5ib2R5KQogICAgICAgIGNvbnRpbnVlOwoKICAgICAgbm9k&#xA;ZSA9IGhlYWRpbmcubmV4dFNpYmxpbmc7CgogICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVt&#xA;ZW50KCJkaXYiKTsKICAgICAgdGhpcy5hZGRfY2xhc3MoZGl2LCAic2xpZGUiKTsKICAgICAgZG9j&#xA;dW1lbnQuYm9keS5yZXBsYWNlQ2hpbGQoZGl2LCBoZWFkaW5nKTsKICAgICAgZGl2LmFwcGVuZENo&#xA;aWxkKGhlYWRpbmcpOwoKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICBpZiAobm9k&#xA;ZS5ub2RlVHlwZSA9PSAxKSAvLyBhbiBlbGVtZW50CiAgICAgICAgewogICAgICAgICAgIGlmIChu&#xA;b2RlLm5vZGVOYW1lID09ICJIMSIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiaDEiKQogICAgICAgICAg&#xA;ICAgYnJlYWs7CgogICAgICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09ICJESVYiIHx8IG5vZGUu&#xA;bm9kZU5hbWUgPT0gImRpdiIpCiAgICAgICAgICAgewogICAgICAgICAgICAgaWYgKHRoaXMuaGFz&#xA;X2NsYXNzKG5vZGUsICJzbGlkZSIpKQogICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAg&#xA;ICBpZiAodGhpcy5oYXNfY2xhc3Mobm9kZSwgImhhbmRvdXQiKSkKICAgICAgICAgICAgICAgYnJl&#xA;YWs7CiAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbmV4dCA9IG5vZGUubmV4dFNpYmxp&#xA;bmc7CiAgICAgICAgbm9kZSA9IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobm9kZSk7CiAgICAg&#xA;ICAgZGl2LmFwcGVuZENoaWxkKG5vZGUpOwogICAgICAgIG5vZGUgPSBuZXh0OwogICAgICB9IAog&#xA;ICAgfQogIH0sCgogIGF0dGFjaF90b3VjaF9oYW5kZXJzOiBmdW5jdGlvbihzbGlkZXMpCiAgewog&#xA;ICAgdmFyIGksIHNsaWRlOwoKICAgIGZvciAoaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyArK2kp&#xA;CiAgICB7CiAgICAgIHNsaWRlID0gc2xpZGVzW2ldOwogICAgICB0aGlzLmFkZF9saXN0ZW5lcihz&#xA;bGlkZSwgInRvdWNoc3RhcnQiLCB0aGlzLnRvdWNoc3RhcnQpOwogICAgICB0aGlzLmFkZF9saXN0&#xA;ZW5lcihzbGlkZSwgInRvdWNobW92ZSIsIHRoaXMudG91Y2htb3ZlKTsKICAgICAgdGhpcy5hZGRf&#xA;bGlzdGVuZXIoc2xpZGUsICJ0b3VjaGVuZCIsIHRoaXMudG91Y2hlbmQpOwogICAgfQogIH0sCgov&#xA;LyByZXR1cm4gbmV3IGFycmF5IG9mIGFsbCBzbGlkZXMKICBjb2xsZWN0X3NsaWRlczogZnVuY3Rp&#xA;b24gKCkgewogICAgdmFyIHNsaWRlcyA9IG5ldyBBcnJheSgpOwogICAgdmFyIGRpdnMgPSBkb2N1&#xA;bWVudC5ib2R5LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKTsKCiAgICBmb3IgKHZhciBpID0g&#xA;MDsgaSA8IGRpdnMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGRpdiA9IGRpdnMuaXRlbShpKTsK&#xA;CiAgICAgIGlmICh0aGlzLmhhc19jbGFzcyhkaXYsICJzbGlkZSIpKQogICAgICB7CiAgICAgICAg&#xA;Ly8gYWRkIHNsaWRlIHRvIGNvbGxlY3Rpb24KICAgICAgICBzbGlkZXNbc2xpZGVzLmxlbmd0aF0g&#xA;PSBkaXY7CgogICAgICAgIC8vIGhpZGUgZWFjaCBzbGlkZSBhcyBpdCBpcyBmb3VuZAogICAgICAg&#xA;IHRoaXMuYWRkX2NsYXNzKGRpdiwgImhpZGRlbiIpOwoKICAgICAgICAvLyBhZGQgZHVtbXkgPGJy&#xA;Lz4gYXQgZW5kIGZvciBzY3JvbGxpbmcgaGFjawogICAgICAgIHZhciBub2RlMSA9IGRvY3VtZW50&#xA;LmNyZWF0ZUVsZW1lbnQoImJyIik7CiAgICAgICAgZGl2LmFwcGVuZENoaWxkKG5vZGUxKTsKICAg&#xA;ICAgICB2YXIgbm9kZTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpOwogICAgICAgIGRp&#xA;di5hcHBlbmRDaGlsZChub2RlMik7CiAgICAgIH0KICAgICAgZWxzZSBpZiAodGhpcy5oYXNfY2xh&#xA;c3MoZGl2LCAiYmFja2dyb3VuZCIpKQogICAgICB7ICAvLyB3b3JrIGFyb3VuZCBmb3IgRmlyZWZv&#xA;eCBTVkcgcmVsb2FkIGJ1ZwogICAgICAgIC8vIHdoaWNoIG90aGVyd2lzZSByZXBsYWNlcyAxc3Qg&#xA;U1ZHIGdyYXBoaWMgd2l0aCAybmQKICAgICAgICBkaXYuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7&#xA;CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLnNsaWRlcyA9IHNsaWRlczsKICB9LAoKICAvLyByZXR1&#xA;cm4gbmV3IGFycmF5IG9mIGFsbCA8ZGl2IGNsYXNzPSJoYW5kb3V0Ij4KICBjb2xsZWN0X25vdGVz&#xA;OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgbm90ZXMgPSBuZXcgQXJyYXkoKTsKICAgIHZhciBkaXZz&#xA;ID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGl2Iik7CgogICAgZm9yICh2&#xA;YXIgaSA9IDA7IGkgPCBkaXZzLmxlbmd0aDsgKytpKQogICAgewogICAgICBkaXYgPSBkaXZzLml0&#xA;ZW0oaSk7CgogICAgICBpZiAodGhpcy5oYXNfY2xhc3MoZGl2LCAiaGFuZG91dCIpKQogICAgICB7&#xA;CiAgICAgICAgLy8gYWRkIG5vdGUgdG8gY29sbGVjdGlvbgogICAgICAgIG5vdGVzW25vdGVzLmxl&#xA;bmd0aF0gPSBkaXY7CgogICAgICAgIC8vIGFuZCBoaWRlIGl0CiAgICAgICAgdGhpcy5hZGRfY2xh&#xA;c3MoZGl2LCAiaGlkZGVuIik7CiAgICAgIH0KICAgIH0KCiAgICB0aGlzLm5vdGVzID0gbm90ZXM7&#xA;CiAgfSwKCiAgLy8gcmV0dXJuIG5ldyBhcnJheSBvZiBhbGwgPGRpdiBjbGFzcz0iYmFja2dyb3Vu&#xA;ZCI+CiAgLy8gaW5jbHVkaW5nIG5hbWVkIGJhY2tncm91bmRzIGUuZy4gY2xhc3M9ImJhY2tncm91&#xA;bmQgdGl0bGVwYWdlIgogIGNvbGxlY3RfYmFja2dyb3VuZHM6IGZ1bmN0aW9uICgpIHsKICAgIHZh&#xA;ciBiYWNrZ3JvdW5kcyA9IG5ldyBBcnJheSgpOwogICAgdmFyIGRpdnMgPSBkb2N1bWVudC5ib2R5&#xA;LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRp&#xA;dnMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGRpdiA9IGRpdnMuaXRlbShpKTsKCiAgICAgIGlm&#xA;ICh0aGlzLmhhc19jbGFzcyhkaXYsICJiYWNrZ3JvdW5kIikpCiAgICAgIHsKICAgICAgICAvLyBh&#xA;ZGQgYmFja2dyb3VuZCB0byBjb2xsZWN0aW9uCiAgICAgICAgYmFja2dyb3VuZHNbYmFja2dyb3Vu&#xA;ZHMubGVuZ3RoXSA9IGRpdjsKCiAgICAgICAgLy8gYW5kIGhpZGUgaXQKICAgICAgICB0aGlzLmFk&#xA;ZF9jbGFzcyhkaXYsICJoaWRkZW4iKTsKICAgICAgICBjb25zb2xlLmxvZygiSGlkaW5nICIrZGl2&#xA;KyIgIitkaXYuY2xhc3NOYW1lKTsKICAgICAgfQogICAgfQoKICAgIHRoaXMuYmFja2dyb3VuZHMg&#xA;PSBiYWNrZ3JvdW5kczsKICB9LAoKICAvLyBzZXQgY2xpY2sgaGFuZGxlcnMgb24gYWxsIGFuY2hv&#xA;cnMKICBwYXRjaF9hbmNob3JzOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2VsZiA9IHczY19zbGlk&#xA;eTsKICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIC8vIGNvbXBhcmUg&#xA;dGhpcy5ocmVmIHdpdGggbG9jYXRpb24uaHJlZgogICAgICAvLyBmb3IgbGluayB0byBhbm90aGVy&#xA;IHNsaWRlIGluIHRoaXMgZG9jCgogICAgICBpZiAoc2VsZi5wYWdlX2FkZHJlc3ModGhpcy5ocmVm&#xA;KSA9PSBzZWxmLnBhZ2VfYWRkcmVzcyhsb2NhdGlvbi5ocmVmKSkKICAgICAgewogICAgICAgIC8v&#xA;IHllcywgc28gZmluZCBuZXcgc2xpZGUgbnVtYmVyCiAgICAgICAgdmFyIG5ld3NsaWRlbnVtID0g&#xA;c2VsZi5maW5kX3NsaWRlX251bWJlcih0aGlzLmhyZWYpOwoKICAgICAgICBpZiAobmV3c2xpZGVu&#xA;dW0gIT0gc2VsZi5zbGlkZV9udW1iZXIpCiAgICAgICAgewogICAgICAgICAgdmFyIHNsaWRlID0g&#xA;c2VsZi5zbGlkZXNbc2VsZi5zbGlkZV9udW1iZXJdOwogICAgICAgICAgc2VsZi5oaWRlX3NsaWRl&#xA;KHNsaWRlKTsKICAgICAgICAgIHNlbGYuc2xpZGVfbnVtYmVyID0gbmV3c2xpZGVudW07CiAgICAg&#xA;ICAgICBzbGlkZSA9IHNlbGYuc2xpZGVzW3NlbGYuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgIHNl&#xA;bGYuc2hvd19zbGlkZShzbGlkZSk7CiAgICAgICAgICBzZWxmLnNldF9sb2NhdGlvbigpOwogICAg&#xA;ICAgIH0KICAgICAgfQogICAgICBlbHNlCiAgICAgICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRp&#xA;b24oZXZlbnQpOwoKLy8gICAgICBlbHNlIGlmICh0aGlzLnRhcmdldCA9PSBudWxsKQovLyAgICAg&#xA;ICAgbG9jYXRpb24uaHJlZiA9IHRoaXMuaHJlZjsKCiAgICAgIHRoaXMuYmx1cigpOwogICAgICBz&#xA;ZWxmLmRpc2FibGVfc2xpZGVfY2xpY2sgPSB0cnVlOwogICAgfTsKCiAgICB2YXIgYW5jaG9ycyA9&#xA;IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKTsKCiAgICBmb3IgKHZhciBp&#xA;ID0gMDsgaSA8IGFuY2hvcnMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGlmICh3aW5kb3cuYWRk&#xA;RXZlbnRMaXN0ZW5lcikKICAgICAgICBhbmNob3JzW2ldLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNr&#xA;IiwgaGFuZGxlciwgZmFsc2UpOwogICAgICBlbHNlCiAgICAgICAgYW5jaG9yc1tpXS5hdHRhY2hF&#xA;dmVudCgib25jbGljayIsIGhhbmRsZXIpOwogICAgfQogIH0sCgogIC8vICMjIyBDSEVDSyBNRSAj&#xA;IyMgc2VlIHdoaWNoIGZ1bmN0aW9ucyBhcmUgaW52b2tlZCB2aWEgc2V0VGltZW91dAogIC8vIGVp&#xA;dGhlciBkaXJlY3RseSBvciBpbmRpcmVjdGx5IGZvciB1c2Ugb2YgdzNjX3NsaWR5IHZzIHRoaXMK&#xA;ICBzaG93X3NsaWRlX251bWJlcjogZnVuY3Rpb24gKCkgewogICAgdmFyIHRpbWVyID0gdzNjX3Ns&#xA;aWR5LmdldF90aW1lcigpOwogICAgdzNjX3NsaWR5LnNsaWRlX251bWJlcl9lbGVtZW50LmlubmVy&#xA;SFRNTCA9IHRpbWVyICsgdzNjX3NsaWR5LmxvY2FsaXplKCJzbGlkZSIpICsgIiAiICsKICAgICAg&#xA;ICAgICAodzNjX3NsaWR5LnNsaWRlX251bWJlciArIDEpICsgIi8iICsgdzNjX3NsaWR5LnNsaWRl&#xA;cy5sZW5ndGg7CiAgfSwKCiAgLy8gZXZlcnkgMjAwbVMgY2hlY2sgaWYgdGhlIGxvY2F0aW9uIGhh&#xA;cyBiZWVuIGNoYW5nZWQgYXMgYQogIC8vIHJlc3VsdCBvZiB0aGUgdXNlciBhY3RpdmF0aW5nIHRo&#xA;ZSBCYWNrIGJ1dHRvbi9tZW51IGl0ZW0KICAvLyBkb2Vzbid0IHdvcmsgZm9yIE9wZXJhIDwgOS41&#xA;CiAgY2hlY2tfbG9jYXRpb246IGZ1bmN0aW9uICgpIHsKICAgIHZhciBoYXNoID0gbG9jYXRpb24u&#xA;aGFzaDsKCiAgICBpZiAodzNjX3NsaWR5LnNsaWRlX251bWJlciA+IDAgJiYgKGhhc2ggPT0gIiIg&#xA;fHwgaGFzaCA9PSAiIyIpKQogICAgICB3M2Nfc2xpZHkuZ290b19zbGlkZSgwKTsKICAgIGVsc2Ug&#xA;aWYgKGhhc2gubGVuZ3RoID4gMiAmJiBoYXNoICE9ICIjKCIrKHczY19zbGlkeS5zbGlkZV9udW1i&#xA;ZXIrMSkrIikiKQogICAgewogICAgICB2YXIgbnVtID0gcGFyc2VJbnQobG9jYXRpb24uaGFzaC5z&#xA;dWJzdHIoMikpOwoKICAgICAgaWYgKCFpc05hTihudW0pKQogICAgICAgIHczY19zbGlkeS5nb3Rv&#xA;X3NsaWRlKG51bS0xKTsKICAgIH0KCiAgICBpZiAodzNjX3NsaWR5LnRpbWVfbGVmdCAmJiB3M2Nf&#xA;c2xpZHkuc2xpZGVfbnVtYmVyID4gMCkKICAgIHsKICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGVf&#xA;bnVtYmVyKCk7CgogICAgICBpZiAodzNjX3NsaWR5LnRpbWVfbGVmdCA+IDApCiAgICAgICAgdzNj&#xA;X3NsaWR5LnRpbWVfbGVmdCAtPSAyMDA7CiAgICB9IAogIH0sCgogIGdldF90aW1lcjogZnVuY3Rp&#xA;b24gKCkgewogICAgdmFyIHRpbWVyID0gIiI7CiAgICBpZiAodzNjX3NsaWR5LnRpbWVfbGVmdCkK&#xA;ICAgIHsKICAgICAgdmFyIG1pbnMsIHNlY3M7CiAgICAgIHNlY3MgPSBNYXRoLmZsb29yKHczY19z&#xA;bGlkeS50aW1lX2xlZnQvMTAwMCk7CiAgICAgIG1pbnMgPSBNYXRoLmZsb29yKHNlY3MgLyA2MCk7&#xA;CiAgICAgIHNlY3MgPSBzZWNzICUgNjA7CiAgICAgIHRpbWVyID0gKG1pbnMgPyBtaW5zKyJtIiA6&#xA;ICIiKSArIHNlY3MgKyAicyAiOwogICAgfQoKICAgIHJldHVybiB0aW1lcjsKICB9LAoKICAvLyB0&#xA;aGlzIGRvZXNuJ3QgcHVzaCBsb2NhdGlvbiBvbnRvIGhpc3Rvcnkgc3RhY2sgZm9yIElFCiAgLy8g&#xA;Zm9yIHdoaWNoIGEgaGlkZGVuIGlmcmFtZSBoYWNrIGlzIG5lZWRlZDogbG9hZCBwYWdlIGludG8K&#xA;ICAvLyB0aGUgaWZyYW1lIHdpdGggc2NyaXB0IHRoYXQgc2V0J3MgcGFyZW50J3MgbG9jYXRpb24u&#xA;aGFzaAogIC8vIGJ1dCB0aGF0IHdvbid0IHdvcmsgZm9yIHN0YW5kYWxvbmUgdXNlIHVubGVzcyB3&#xA;ZSBjYW4KICAvLyBjcmVhdGUgdGhlIHBhZ2UgZHluYW1pY2FsbHkgdmlhIGEgamF2YXNjcmlwdDog&#xA;VVJMCiAgLy8gIyMjIHVzZSBoaXN0b3J5LnB1c2hTdGF0ZSBpZiBhdmFpbGFibGUKICBzZXRfbG9j&#xA;YXRpb246IGZ1bmN0aW9uICgpIHsKICAgICB2YXIgdXJpID0gdzNjX3NsaWR5LnBhZ2VfYWRkcmVz&#xA;cyhsb2NhdGlvbi5ocmVmKTsKICAgICB2YXIgaGFzaCA9ICIjKCIgKyAodzNjX3NsaWR5LnNsaWRl&#xA;X251bWJlcisxKSArICIpIjsKCiAgICAgaWYgKHczY19zbGlkeS5zbGlkZV9udW1iZXIgPj0gMCkK&#xA;ICAgICAgIHVyaSA9IHVyaSArIGhhc2g7CgogICAgIGlmICh0eXBlb2YoaGlzdG9yeS5wdXNoU3Rh&#xA;dGUpICE9ICJ1bmRlZmluZWQiKQogICAgIHsKICAgICAgIGRvY3VtZW50LnRpdGxlID0gdzNjX3Ns&#xA;aWR5LnRpdGxlICsgIiAoIiArICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyKzEpICsgIikiOwogICAg&#xA;ICAgaGlzdG9yeS5wdXNoU3RhdGUoMCwgZG9jdW1lbnQudGl0bGUsIGhhc2gpOwogICAgICAgdzNj&#xA;X3NsaWR5LnNob3dfc2xpZGVfbnVtYmVyKCk7CiAgICAgICByZXR1cm47CiAgICAgfQoKICAgICBp&#xA;ZiAodzNjX3NsaWR5LmllICYmICh3M2Nfc2xpZHkuaWU2IHx8IHczY19zbGlkeS5pZTcpKQogICAg&#xA;ICAgdzNjX3NsaWR5LnB1c2hfaGFzaChoYXNoKTsKCiAgICAgaWYgKHVyaSAhPSBsb2NhdGlvbi5o&#xA;cmVmKSAvLyAmJiAha2h0bWwKICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJpOwoKICAgICBpZiAo&#xA;dGhpcy5raHRtbCkKICAgICAgICBoYXNoID0gIigiICsgKHczY19zbGlkeS5zbGlkZV9udW1iZXIr&#xA;MSkgKyAiKSI7CgogICAgIGlmICghdGhpcy5pZSAmJiBsb2NhdGlvbi5oYXNoICE9IGhhc2ggJiYg&#xA;bG9jYXRpb24uaGFzaCAhPSAiIikKICAgICAgIGxvY2F0aW9uLmhhc2ggPSBoYXNoOwoKICAgICBk&#xA;b2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRl&#xA;X251bWJlcisxKSArICIpIjsKICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKICB9&#xA;LAoKICBwYWdlX2FkZHJlc3M6IGZ1bmN0aW9uICh1cmkpIHsKICAgIHZhciBpID0gdXJpLmluZGV4&#xA;T2YoIiMiKTsKCiAgICBpZiAoaSA8IDApCiAgICAgIGkgPSB1cmkuaW5kZXhPZigiJTIzIik7Cgog&#xA;ICAgLy8gY2hlY2sgaWYgYW5jaG9yIGlzIGVudGlyZSBwYWdlCgogICAgaWYgKGkgPCAwKQogICAg&#xA;ICByZXR1cm4gdXJpOyAgLy8geWVzCgogICAgcmV0dXJuIHVyaS5zdWJzdHIoMCwgaSk7CiAgfSwK&#xA;CiAgLy8gb25seSB1c2VkIGZvciBJRTYgYW5kIElFNwogIG9uX2ZyYW1lX2xvYWRlZDogZnVuY3Rp&#xA;b24gKGhhc2gpIHsKICAgIGxvY2F0aW9uLmhhc2ggPSBoYXNoOwogICAgdmFyIHVyaSA9IHczY19z&#xA;bGlkeS5wYWdlX2FkZHJlc3MobG9jYXRpb24uaHJlZik7CiAgICBsb2NhdGlvbi5ocmVmID0gdXJp&#xA;ICsgaGFzaDsKICB9LAoKICAvLyBoaXN0b3J5IGhhY2sgd2l0aCB0aGFua3MgdG8gQmVydHJhbmQg&#xA;TGUgUm95CiAgcHVzaF9oYXNoOiBmdW5jdGlvbiAoaGFzaCkgewogICAgaWYgKGhhc2ggPT0gIiIp&#xA;IGhhc2ggPSAiIygxKSI7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gaGFzaDsKCiAgICB2&#xA;YXIgZG9jID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImhpc3RvcnlGcmFtZSIpLmNvbnRlbnRX&#xA;aW5kb3cuZG9jdW1lbnQ7CiAgICBkb2Mub3BlbigiamF2YXNjcmlwdDonPGh0bWw+PC9odG1sPici&#xA;KTsKICAgIGRvYy53cml0ZSgiPGh0bWw+PGhlYWQ+PHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2Ny&#xA;aXB0XCI+d2luZG93LnBhcmVudC53M2Nfc2xpZHkub25fZnJhbWVfbG9hZGVkKCciKwogICAgICAo&#xA;aGFzaCkgKyAiJyk7PC9zY3JpcHQ+PC9oZWFkPjxib2R5PmhlbGxvIG11bTwvYm9keT48L2h0bWw+&#xA;Iik7CiAgICAgIGRvYy5jbG9zZSgpOwogIH0sCgogIC8vIGZpbmQgY3VycmVudCBzbGlkZSBiYXNl&#xA;ZCB1cG9uIGxvY2F0aW9uCiAgLy8gZmlyc3QgZmluZCB0YXJnZXQgYW5jaG9yIGFuZCB0aGVuIGxv&#xA;b2sKICAvLyBmb3IgYXNzb2NpYXRlZCBkaXYgZWxlbWVudCBlbmNsb3NpbmcgaXQKICAvLyBmaW5h&#xA;bGx5IG1hcCB0aGF0IHRvIHNsaWRlIG51bWJlcgogIGZpbmRfc2xpZGVfbnVtYmVyOiBmdW5jdGlv&#xA;biAodXJpKSB7CiAgICAvLyBmaXJzdCBnZXQgYW5jaG9yIGZyb20gcGFnZSBsb2NhdGlvbgoKICAg&#xA;IHZhciBpID0gdXJpLmluZGV4T2YoIiMiKTsKCiAgICAvLyBjaGVjayBpZiBhbmNob3IgaXMgZW50&#xA;aXJlIHBhZ2UKICAgIGlmIChpIDwgMCkKICAgICAgcmV0dXJuIDA7ICAvLyB5ZXMKCiAgICB2YXIg&#xA;YW5jaG9yID0gdW5lc2NhcGUodXJpLnN1YnN0cihpKzEpKTsKCiAgICAvLyBub3cgdXNlIGFuY2hv&#xA;ciBhcyBYTUwgSUQgdG8gZmluZCB0YXJnZXQKICAgIHZhciB0YXJnZXQgPSBkb2N1bWVudC5nZXRF&#xA;bGVtZW50QnlJZChhbmNob3IpOwoKICAgIGlmICghdGFyZ2V0KQogICAgewogICAgICAvLyBkb2Vz&#xA;IGFuY2hvciBsb29rIGxpa2UgIigyKSIgZm9yIHNsaWRlIDIgPz8KICAgICAgLy8gd2hlcmUgZmly&#xA;c3Qgc2xpZGUgaXMgKDEpCiAgICAgIHZhciByZSA9IC9cKChcZCkrXCkvOwoKICAgICAgaWYgKGFu&#xA;Y2hvci5tYXRjaChyZSkpCiAgICAgIHsKICAgICAgICB2YXIgbnVtID0gcGFyc2VJbnQoYW5jaG9y&#xA;LnN1YnN0cmluZygxLCBhbmNob3IubGVuZ3RoLTEpKTsKCiAgICAgICAgaWYgKG51bSA+IHRoaXMu&#xA;c2xpZGVzLmxlbmd0aCkKICAgICAgICAgIG51bSA9IDE7CgogICAgICAgIGlmICgtLW51bSA8IDAp&#xA;CiAgICAgICAgICBudW0gPSAwOwoKICAgICAgICByZXR1cm4gbnVtOwogICAgICB9CgogICAgICAv&#xA;LyBhY2NlcHQgWzJdIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQogICAgICByZSA9IC9cWyhc&#xA;ZCkrXF0vOwoKICAgICAgaWYgKGFuY2hvci5tYXRjaChyZSkpCiAgICAgIHsKICAgICAgICAgdmFy&#xA;IG51bSA9IHBhcnNlSW50KGFuY2hvci5zdWJzdHJpbmcoMSwgYW5jaG9yLmxlbmd0aC0xKSk7Cgog&#xA;ICAgICAgICBpZiAobnVtID4gdGhpcy5zbGlkZXMubGVuZ3RoKQogICAgICAgICAgICBudW0gPSAx&#xA;OwoKICAgICAgICAgaWYgKC0tbnVtIDwgMCkKICAgICAgICAgICAgbnVtID0gMDsKCiAgICAgICAg&#xA;IHJldHVybiBudW07CiAgICAgIH0KCiAgICAgIC8vIG9oIGRlYXIgdW5rbm93biBhbmNob3IKICAg&#xA;ICAgcmV0dXJuIDA7CiAgICB9CgogICAgLy8gc2VhcmNoIGZvciBlbmNsb3Npbmcgc2xpZGUKCiAg&#xA;ICB3aGlsZSAodHJ1ZSkKICAgIHsKICAgICAgLy8gYnJvd3NlciBjb2VyY2VzIGh0bWwgZWxlbWVu&#xA;dHMgdG8gdXBwZXJjYXNlIQogICAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkg&#xA;PT0gImRpdiIgJiYKICAgICAgICAgICAgdGhpcy5oYXNfY2xhc3ModGFyZ2V0LCAic2xpZGUiKSkK&#xA;ICAgICAgewogICAgICAgIC8vIGZvdW5kIHRoZSBzbGlkZSBlbGVtZW50CiAgICAgICAgYnJlYWs7&#xA;CiAgICAgIH0KCiAgICAgIC8vIG90aGVyd2lzZSB0cnkgcGFyZW50IGVsZW1lbnQgaWYgYW55Cgog&#xA;ICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTsKCiAgICAgIGlmICghdGFyZ2V0KQogICAg&#xA;ICB7CiAgICAgICAgcmV0dXJuIDA7ICAgLy8gbm8gbHVjayEKICAgICAgfQogICAgfTsKCiAgICBm&#xA;b3IgKGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgKytpKQogICAgewogICAgICBpZiAoc2xpZGVz&#xA;W2ldID09IHRhcmdldCkKICAgICAgICByZXR1cm4gaTsgIC8vIHN1Y2Nlc3MKICAgIH0KCiAgICAv&#xA;LyBvaCBkZWFyIHN0aWxsIG5vIGx1Y2sKICAgIHJldHVybiAwOwogIH0sCgogIHByZXZpb3VzX3Ns&#xA;aWRlOiBmdW5jdGlvbiAoaW5jcmVtZW50YWwpIHsKICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxs&#xA;KQogICAgewogICAgICB2YXIgc2xpZGU7CgogICAgICBpZiAoKGluY3JlbWVudGFsIHx8IHczY19z&#xA;bGlkeS5zbGlkZV9udW1iZXIgPT0gMCkgJiYgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gIT0gbnVsbCkK&#xA;ICAgICAgewogICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gdzNjX3NsaWR5LmhpZGVfcHJl&#xA;dmlvdXNfaXRlbSh3M2Nfc2xpZHkubGFzdF9zaG93bik7CiAgICAgICAgdzNjX3NsaWR5LnNldF9l&#xA;b3Nfc3RhdHVzKGZhbHNlKTsKICAgICAgfQogICAgICBlbHNlIGlmICh3M2Nfc2xpZHkuc2xpZGVf&#xA;bnVtYmVyID4gMCkKICAgICAgewogICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nf&#xA;c2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7&#xA;CgogICAgICAgIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPSB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVy&#xA;IC0gMTsKICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251&#xA;bWJlcl07CiAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgi&#xA;dmlzaWJsZSIpOwogICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gdzNjX3NsaWR5LnByZXZp&#xA;b3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7CiAgICAgICAgdzNjX3NsaWR5LnNldF9lb3Nfc3Rh&#xA;dHVzKHRydWUpOwogICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgfQoK&#xA;ICAgICAgdzNjX3NsaWR5LnNldF9sb2NhdGlvbigpOwoKICAgICAgaWYgKCF3M2Nfc2xpZHkubnNf&#xA;cG9zKQogICAgICAgIHczY19zbGlkeS5yZWZyZXNoX3Rvb2xiYXIoMjAwKTsKICAgIH0KICB9LAoK&#xA;ICBuZXh0X3NsaWRlOiBmdW5jdGlvbiAoaW5jcmVtZW50YWwpIHsKICAgIGlmICghdzNjX3NsaWR5&#xA;LnZpZXdfYWxsKQogICAgewogICAgICB2YXIgc2xpZGUsIGxhc3QgPSB3M2Nfc2xpZHkubGFzdF9z&#xA;aG93bjsKCiAgICAgIGlmIChpbmNyZW1lbnRhbCB8fCB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID09&#xA;IHczY19zbGlkeS5zbGlkZXMubGVuZ3RoIC0gMSkKICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hv&#xA;d24gPSB3M2Nfc2xpZHkucmV2ZWFsX25leHRfaXRlbSh3M2Nfc2xpZHkubGFzdF9zaG93bik7Cgog&#xA;ICAgICBpZiAoKCFpbmNyZW1lbnRhbCB8fCB3M2Nfc2xpZHkubGFzdF9zaG93biA9PSBudWxsKSAm&#xA;JgogICAgICAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA8IHczY19zbGlkeS5zbGlkZXMu&#xA;bGVuZ3RoIC0gMSkKICAgICAgewogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNj&#xA;X3NsaWR5LnNsaWRlX251bWJlcl07CiAgICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRl&#xA;KTsKCiAgICAgICAgIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPSB3M2Nfc2xpZHkuc2xpZGVfbnVt&#xA;YmVyICsgMTsKICAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlk&#xA;ZV9udW1iZXJdOwogICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IG51bGw7CiAgICAgICAg&#xA;IHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoImhpZGRlbiIpOwogICAg&#xA;ICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZShzbGlkZSk7CiAgICAgIH0KICAgICAgZWxzZSBpZiAo&#xA;IXczY19zbGlkeS5sYXN0X3Nob3duKQogICAgICB7CiAgICAgICAgIGlmIChsYXN0ICYmIGluY3Jl&#xA;bWVudGFsKQogICAgICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbGFzdDsKICAgICAgfQoK&#xA;ICAgICAgdzNjX3NsaWR5LnNldF9sb2NhdGlvbigpOwoKICAgICAgdzNjX3NsaWR5LnNldF9lb3Nf&#xA;c3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3No&#xA;b3duKSk7CgogICAgICBpZiAoIXczY19zbGlkeS5uc19wb3MpCiAgICAgICAgIHczY19zbGlkeS5y&#xA;ZWZyZXNoX3Rvb2xiYXIoMjAwKTsKICAgICB9CiAgfSwKCiAgLy8gdG8gZmlyc3Qgc2xpZGUgd2l0&#xA;aCBub3RoaW5nIHJldmVhbGVkCiAgLy8gaS5lLiBzdGF0ZSBhdCBzdGFydCBvZiBwcmVzZW50YXRp&#xA;b24KICBmaXJzdF9zbGlkZTogZnVuY3Rpb24gKCkgewogICAgIGlmICghdzNjX3NsaWR5LnZpZXdf&#xA;YWxsKQogICAgIHsKICAgICAgIHZhciBzbGlkZTsKCiAgICAgICBpZiAodzNjX3NsaWR5LnNsaWRl&#xA;X251bWJlciAhPSAwKQogICAgICAgewogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNb&#xA;dzNjX3NsaWR5LnNsaWRlX251bWJlcl07CiAgICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNs&#xA;aWRlKTsKCiAgICAgICAgIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPSAwOwogICAgICAgICBzbGlk&#xA;ZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07CiAgICAgICAgIHcz&#xA;Y19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmls&#xA;aXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAgICAgICAgIHczY19zbGlkeS5zaG93X3Ns&#xA;aWRlKHNsaWRlKTsKICAgICAgIH0KCiAgICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoCiAg&#xA;ICAgICAgICF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3No&#xA;b3duKSk7CiAgICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CiAgICAgfQogIH0sCgogIC8v&#xA;IGdvdG8gbGFzdCBzbGlkZSB3aXRoIGV2ZXJ5dGhpbmcgcmV2ZWFsZWQKICAvLyBpLmUuIHN0YXRl&#xA;IGF0IGVuZCBvZiBwcmVzZW50YXRpb24KICBsYXN0X3NsaWRlOiBmdW5jdGlvbiAoKSB7CiAgICBp&#xA;ZiAoIXczY19zbGlkeS52aWV3X2FsbCkKICAgIHsKICAgICAgdmFyIHNsaWRlOwoKICAgICAgdzNj&#xA;X3NsaWR5Lmxhc3Rfc2hvd24gPSBudWxsOyAvL3JldmVhbE5leHRJdGVtKGxhc3RTaG93bik7Cgog&#xA;ICAgICBpZiAodzNjX3NsaWR5Lmxhc3Rfc2hvd24gPT0gbnVsbCAmJgogICAgICAgICAgdzNjX3Ns&#xA;aWR5LnNsaWRlX251bWJlciA8IHczY19zbGlkeS5zbGlkZXMubGVuZ3RoIC0gMSkKICAgICAgewog&#xA;ICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07&#xA;CiAgICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsKICAgICAgICAgdzNjX3NsaWR5&#xA;LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5zbGlkZXMubGVuZ3RoIC0gMTsKICAgICAgICAgc2xp&#xA;ZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgICB3&#xA;M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJ2aXNpYmxlIik7CiAgICAg&#xA;ICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gdzNjX3NsaWR5LnByZXZpb3VzX2luY3JlbWVudGFs&#xA;X2l0ZW0obnVsbCk7CgogICAgICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZShzbGlkZSk7CiAgICAg&#xA;IH0KICAgICAgZWxzZQogICAgICB7CiAgICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9h&#xA;bGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24g&#xA;PSB3M2Nfc2xpZHkucHJldmlvdXNfaW5jcmVtZW50YWxfaXRlbShudWxsKTsKICAgICAgfQoKICAg&#xA;ICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKHRydWUpOwogICAgICB3M2Nfc2xpZHkuc2V0X2xv&#xA;Y2F0aW9uKCk7CiAgICB9CiAgfSwKCgogIC8vICMjIyBjaGVjayB0aGlzIGFuZCBjb25zaWRlciBh&#xA;ZGQvcmVtb3ZlIGNsYXNzCiAgc2V0X2Vvc19zdGF0dXM6IGZ1bmN0aW9uIChzdGF0ZSkgewogICAg&#xA;aWYgKHRoaXMuZW9zKQogICAgICB0aGlzLmVvcy5zdHlsZS5jb2xvciA9IChzdGF0ZSA/ICJyZ2Io&#xA;MjQwLDI0MCwyNDApIiA6ICJyZWQiKTsKICB9LAoKICAvLyBmaXJzdCBzbGlkZSBpcyAwCiAgZ290&#xA;b19zbGlkZTogZnVuY3Rpb24gKG51bSkgewogICAgLy9hbGVydCgiZ29pbmcgdG8gc2xpZGUgIiAr&#xA;IChudW0rMSkpOwogICAgdmFyIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xp&#xA;ZGVfbnVtYmVyXTsKICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsKICAgIHczY19zbGlk&#xA;eS5zbGlkZV9udW1iZXIgPSBudW07CiAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3Ns&#xA;aWR5LnNsaWRlX251bWJlcl07CiAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IG51bGw7CiAgICB3&#xA;M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJoaWRkZW4iKTsKICAgIHcz&#xA;Y19zbGlkeS5zZXRfZW9zX3N0YXR1cyghdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbSh3&#xA;M2Nfc2xpZHkubGFzdF9zaG93bikpOwogICAgZG9jdW1lbnQudGl0bGUgPSB3M2Nfc2xpZHkudGl0&#xA;bGUgKyAiICgiICsgKHczY19zbGlkeS5zbGlkZV9udW1iZXIrMSkgKyAiKSI7CiAgICB3M2Nfc2xp&#xA;ZHkuc2hvd19zbGlkZShzbGlkZSk7CiAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsK&#xA;ICB9LAoKCiAgc2hvd19zbGlkZTogZnVuY3Rpb24gKHNsaWRlKSB7CiAgICB0aGlzLnN5bmNfYmFj&#xA;a2dyb3VuZChzbGlkZSk7CiAgICB0aGlzLnJlbW92ZV9jbGFzcyhzbGlkZSwgImhpZGRlbiIpOwoK&#xA;ICAgIC8vIHdvcmsgYXJvdW5kIElFOSBvYmplY3QgcmVuZGVyaW5nIGJ1ZwogICAgc2V0VGltZW91&#xA;dCgid2luZG93LnNjcm9sbFRvKDAsMCk7IiwgMSk7CiAgfSwKCiAgaGlkZV9zbGlkZTogZnVuY3Rp&#xA;b24gKHNsaWRlKSB7CiAgICB0aGlzLmFkZF9jbGFzcyhzbGlkZSwgImhpZGRlbiIpOwogIH0sCgog&#xA;IC8vIHNob3cganVzdCB0aGUgYmFja2dyb3VuZHMgcGVydGluZW50IHRvIHRoaXMgc2xpZGUKICAv&#xA;LyB3aGVuIHNsaWRlIGJhY2tncm91bmQtY29sb3IgaXMgdHJhbnNwYXJlbnQKICAvLyB0aGlzIHNo&#xA;b3VsZCBub3cgd29yayB3aXRoIHJnYmEgY29sb3IgdmFsdWVzCiAgc3luY19iYWNrZ3JvdW5kOiBm&#xA;dW5jdGlvbiAoc2xpZGUpIHsKICAgIHZhciBiYWNrZ3JvdW5kOwogICAgdmFyIGJnQ29sb3I7Cgog&#xA;ICAgaWYgKHNsaWRlLmN1cnJlbnRTdHlsZSkKICAgICAgYmdDb2xvciA9IHNsaWRlLmN1cnJlbnRT&#xA;dHlsZVsiYmFja2dyb3VuZENvbG9yIl07CiAgICBlbHNlIGlmIChkb2N1bWVudC5kZWZhdWx0Vmll&#xA;dykKICAgIHsKICAgICAgdmFyIHN0eWxlcyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1&#xA;dGVkU3R5bGUoc2xpZGUsbnVsbCk7CgogICAgICBpZiAoc3R5bGVzKQogICAgICAgIGJnQ29sb3Ig&#xA;PSBzdHlsZXMuZ2V0UHJvcGVydHlWYWx1ZSgiYmFja2dyb3VuZC1jb2xvciIpOwogICAgICBlbHNl&#xA;IC8vIGJyb2tlbiBpbXBsZW1lbnRhdGlvbiBwcm9iYWJseSBkdWUgU2FmYXJpIG9yIEtvbnF1ZXJv&#xA;cgogICAgICB7CiAgICAgICAgLy9hbGVydCgiZGVmZWN0aXZlIGltcGxlbWVudGF0aW9uIG9mIGdl&#xA;dENvbXB1dGVkU3R5bGUoKSIpOwogICAgICAgIGJnQ29sb3IgPSAidHJhbnNwYXJlbnQiOwogICAg&#xA;ICB9CiAgICB9CiAgICBlbHNlCiAgICAgIGJnQ29sb3IgPT0gInRyYW5zcGFyZW50IjsKCiAgICBp&#xA;ZiAoYmdDb2xvciA9PSAidHJhbnNwYXJlbnQiIHx8CiAgICAgICAgYmdDb2xvci5pbmRleE9mKCJy&#xA;Z2JhIikgPj0gMCB8fAogICAgICAgIGJnQ29sb3IuaW5kZXhPZigib3BhY2l0eSIpID49IDApCiAg&#xA;ICB7CiAgICAgIHZhciBzbGlkZUNsYXNzID0gdGhpcy5nZXRfY2xhc3NfbGlzdChzbGlkZSk7Cgog&#xA;ICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYmFja2dyb3VuZHMubGVuZ3RoOyBpKyspCiAg&#xA;ICAgIHsKICAgICAgICBiYWNrZ3JvdW5kID0gdGhpcy5iYWNrZ3JvdW5kc1tpXTsKCiAgICAgICAg&#xA;dmFyIGJnQ2xhc3MgPSB0aGlzLmdldF9jbGFzc19saXN0KGJhY2tncm91bmQpOwoKICAgICAgICBp&#xA;ZiAodGhpcy5tYXRjaGluZ19iYWNrZ3JvdW5kKHNsaWRlQ2xhc3MsIGJnQ2xhc3MpKQogICAgICAg&#xA;ICAgdGhpcy5yZW1vdmVfY2xhc3MoYmFja2dyb3VuZCwgImhpZGRlbiIpOwogICAgICAgIGVsc2UK&#xA;ICAgICAgICAgIHRoaXMuYWRkX2NsYXNzKGJhY2tncm91bmQsICJoaWRkZW4iKTsKICAgICAgICBj&#xA;b25zb2xlLmxvZygiQmFja2dyb3VuZCBjaGFuZ2VkOiAiK2JhY2tncm91bmQuY2xhc3NOYW1lKTsK&#xA;ICAgICAgfQogICAgfQogICAgZWxzZSAvLyBmb3JjaWJseSBoaWRlIGFsbCBiYWNrZ3JvdW5kcwog&#xA;ICAgICB0aGlzLmhpZGVfYmFja2dyb3VuZHMoKTsKICB9LAoKICBoaWRlX2JhY2tncm91bmRzOiBm&#xA;dW5jdGlvbiAoKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYmFja2dyb3VuZHMubGVu&#xA;Z3RoOyBpKyspCiAgICB7CiAgICAgIGJhY2tncm91bmQgPSB0aGlzLmJhY2tncm91bmRzW2ldOwog&#xA;ICAgICB0aGlzLmFkZF9jbGFzcyhiYWNrZ3JvdW5kLCAiaGlkZGVuIik7CiAgICB9CiAgfSwKCiAg&#xA;Ly8gY29tcGFyZSBjbGFzc2VzIGZvciBzbGlkZSBhbmQgYmFja2dyb3VuZAogIG1hdGNoaW5nX2Jh&#xA;Y2tncm91bmQ6IGZ1bmN0aW9uIChzbGlkZUNsYXNzLCBiZ0NsYXNzKSB7CiAgICB2YXIgaSwgY291&#xA;bnQsIHBhdHRlcm4sIHJlc3VsdDsKCiAgICAvLyBkZWZpbmUgcGF0dGVybiBhcyByZWd1bGFyIGV4&#xA;cHJlc3Npb24KICAgIHBhdHRlcm4gPSAvXHcrL2c7CgogICAgLy8gY2hlY2sgYmFja2dyb3VuZCBj&#xA;bGFzcyBuYW1lcwogICAgcmVzdWx0ID0gYmdDbGFzcy5tYXRjaChwYXR0ZXJuKTsKCiAgICBmb3Ig&#xA;KGkgPSBjb3VudCA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspCiAgICB7CiAgICAgIGlmIChy&#xA;ZXN1bHRbaV0gPT0gImhpZGRlbiIpCiAgICAgICAgY29udGludWU7CgogICAgICBpZiAocmVzdWx0&#xA;W2ldID09ICJiYWNrZ3JvdW5kIikKCWNvbnRpbnVlOwoKICAgICAgKytjb3VudDsKICAgIH0KCiAg&#xA;ICBpZiAoY291bnQgPT0gMCkgIC8vIGRlZmF1bHQgbWF0Y2gKICAgICAgcmV0dXJuIHRydWU7Cgog&#xA;ICAgLy8gY2hlY2sgZm9yIG1hdGNoZXMgYW5kIHBsYWNlIHJlc3VsdCBpbiBhcnJheQogICAgcmVz&#xA;dWx0ID0gc2xpZGVDbGFzcy5tYXRjaChwYXR0ZXJuKTsKCiAgICAvLyBub3cgY2hlY2sgaWYgZGVz&#xA;aXJlZCBuYW1lIGlzIHByZXNlbnQgZm9yIGJhY2tncm91bmQKICAgIGZvciAoaSA9IGNvdW50ID0g&#xA;MDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykKICAgIHsKICAgICAgaWYgKHJlc3VsdFtpXSA9PSAi&#xA;aGlkZGVuIikKICAgICAgICBjb250aW51ZTsKCiAgICAgIGlmICh0aGlzLmhhc190b2tlbihiZ0Ns&#xA;YXNzLCByZXN1bHRbaV0pKQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHJldHVybiBm&#xA;YWxzZTsKICB9LAoKICByZXNpemVkOiBmdW5jdGlvbiAoKSB7CiAgICAgdmFyIHdpZHRoID0gMDsK&#xA;CiAgICAgaWYgKCB0eXBlb2YoIHdpbmRvdy5pbm5lcldpZHRoICkgPT0gJ251bWJlcicgKQogICAg&#xA;ICAgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsgIC8vIE5vbiBJRSBicm93c2VyCiAgICAgZWxz&#xA;ZSBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVu&#xA;dC5jbGllbnRXaWR0aCkKICAgICAgIHdpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNs&#xA;aWVudFdpZHRoOyAgLy8gSUU2CiAgICAgZWxzZSBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVu&#xA;dC5ib2R5LmNsaWVudFdpZHRoKQogICAgICAgd2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdp&#xA;ZHRoOyAvLyBJRTQKCiAgICAgdmFyIGhlaWdodCA9IDA7CgogICAgIGlmICggdHlwZW9mKCB3aW5k&#xA;b3cuaW5uZXJIZWlnaHQgKSA9PSAnbnVtYmVyJyApCiAgICAgICBoZWlnaHQgPSB3aW5kb3cuaW5u&#xA;ZXJIZWlnaHQ7ICAvLyBOb24gSUUgYnJvd3NlcgogICAgIGVsc2UgaWYgKGRvY3VtZW50LmRvY3Vt&#xA;ZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KQogICAg&#xA;ICAgaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsgIC8vIElF&#xA;NgogICAgIGVsc2UgaWYgKGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuYm9keS5jbGllbnRIZWln&#xA;aHQpCiAgICAgICBoZWlnaHQgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsgLy8gSUU0Cgog&#xA;ICAgIGlmIChoZWlnaHQgJiYgKHdpZHRoL2hlaWdodCA+IDEuMDUqMTAyNC83NjgpKQogICAgIHsK&#xA;ICAgICAgIHdpZHRoID0gaGVpZ2h0ICogMTAyNC4wLzc2ODsKICAgICB9CgogICAgIC8vIElFIGZp&#xA;cmVzIG9ucmVzaXplIGV2ZW4gd2hlbiBvbmx5IGZvbnQgc2l6ZSBpcyBjaGFuZ2VkIQogICAgIC8v&#xA;IHNvIHdlIGRvIGEgY2hlY2sgdG8gYXZvaWQgYmxvY2tpbmcgPCBhbmQgPiBhY3Rpb25zCiAgICAg&#xA;aWYgKHdpZHRoICE9IHczY19zbGlkeS5sYXN0X3dpZHRoIHx8IGhlaWdodCAhPSB3M2Nfc2xpZHku&#xA;bGFzdF9oZWlnaHQpCiAgICAgewogICAgICAgaWYgKHdpZHRoID49IDExMDApCiAgICAgICAgIHcz&#xA;Y19zbGlkeS5zaXplX2luZGV4ID0gNTsgICAgLy8gNAogICAgICAgZWxzZSBpZiAod2lkdGggPj0g&#xA;MTAwMCkKICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSA0OyAgICAvLyAzCiAgICAgICBl&#xA;bHNlIGlmICh3aWR0aCA+PSA4MDApCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gMzsg&#xA;ICAgLy8gMgogICAgICAgZWxzZSBpZiAod2lkdGggPj0gNjAwKQogICAgICAgICB3M2Nfc2xpZHku&#xA;c2l6ZV9pbmRleCA9IDI7ICAgIC8vIDEKICAgICAgIGVsc2UgaWYgKHdpZHRoKQogICAgICAgICB3&#xA;M2Nfc2xpZHkuc2l6ZV9pbmRleCA9IDA7CgogICAgICAgLy8gYWRkIGluIGZvbnQgc2l6ZSBhZGp1&#xA;c3RtZW50IGZyb20gbWV0YSBlbGVtZW50IGUuZy4KICAgICAgIC8vIDxtZXRhIG5hbWU9ImZvbnQt&#xA;c2l6ZS1hZGp1c3RtZW50IiBjb250ZW50PSItMiIgLz4KICAgICAgIC8vIHVzZWZ1bCB3aGVuIHNs&#xA;aWRlcyBoYXZlIHRvbyBtdWNoIGNvbnRlbnQgOy0pCgogICAgICAgaWYgKDAgPD0gdzNjX3NsaWR5&#xA;LnNpemVfaW5kZXggKyB3M2Nfc2xpZHkuc2l6ZV9hZGp1c3RtZW50ICYmCiAgICAgICAgICAgICB3&#xA;M2Nfc2xpZHkuc2l6ZV9pbmRleCArIHczY19zbGlkeS5zaXplX2FkanVzdG1lbnQgPCB3M2Nfc2xp&#xA;ZHkuc2l6ZXMubGVuZ3RoKQogICAgICAgICB3M2Nfc2xpZHkuc2l6ZV9pbmRleCA9IHczY19zbGlk&#xA;eS5zaXplX2luZGV4ICsgdzNjX3NsaWR5LnNpemVfYWRqdXN0bWVudDsKCiAgICAgICAvLyBlbmFi&#xA;bGVzIGNyb3NzIGJyb3dzZXIgdXNlIG9mIHJlbGF0aXZlIHdpZHRoL2hlaWdodAogICAgICAgLy8g&#xA;b24gb2JqZWN0IGVsZW1lbnRzIGZvciB1c2Ugd2l0aCBTVkcgYW5kIEZsYXNoIG1lZGlhCiAgICAg&#xA;ICB3M2Nfc2xpZHkuYWRqdXN0X29iamVjdF9kaW1lbnNpb25zKHdpZHRoLCBoZWlnaHQpOwoKICAg&#xA;ICAgIGlmIChkb2N1bWVudC5ib2R5LnN0eWxlLmZvbnRTaXplICE9IHczY19zbGlkeS5zaXplc1t3&#xA;M2Nfc2xpZHkuc2l6ZV9pbmRleF0pCiAgICAgICB7CiAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5&#xA;bGUuZm9udFNpemUgPSB3M2Nfc2xpZHkuc2l6ZXNbdzNjX3NsaWR5LnNpemVfaW5kZXhdOwogICAg&#xA;ICAgfQoKICAgICAgIHczY19zbGlkeS5sYXN0X3dpZHRoID0gd2lkdGg7CiAgICAgICB3M2Nfc2xp&#xA;ZHkubGFzdF9oZWlnaHQgPSBoZWlnaHQ7CgogICAgICAgLy8gZm9yY2UgcmVmbG93IHRvIHdvcmsg&#xA;YXJvdW5kIE1vemlsbGEgYnVnCiAgICAgICBpZiAodzNjX3NsaWR5Lm5zX3BvcykKICAgICAgIHsK&#xA;ICAgICAgICAgdmFyIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVt&#xA;YmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgICAgICB3M2Nf&#xA;c2xpZHkuc2hvd19zbGlkZShzbGlkZSk7CiAgICAgICB9CgogICAgICAgLy8gZm9yY2UgY29ycmVj&#xA;dCBwb3NpdGlvbmluZyBvZiB0b29sYmFyCiAgICAgICB3M2Nfc2xpZHkucmVmcmVzaF90b29sYmFy&#xA;KDIwMCk7CiAgICAgfQogIH0sCgogIHNjcm9sbGVkOiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodzNj&#xA;X3NsaWR5LnRvb2xiYXIgJiYgIXczY19zbGlkeS5uc19wb3MgJiYgIXczY19zbGlkeS5pZTcpCiAg&#xA;ICB7CiAgICAgIHczY19zbGlkeS5oYWNrX29mZnNldCA9IHczY19zbGlkeS5zY3JvbGxfeF9vZmZz&#xA;ZXQoKTsKICAgICAgLy8gaGlkZSB0b29sYmFyCiAgICAgIHczY19zbGlkeS50b29sYmFyLnN0eWxl&#xA;LmRpc3BsYXkgPSAibm9uZSI7CgogICAgICAvLyBtYWtlIGl0IHJlYXBwZWFyIGxhdGVyCiAgICAg&#xA;IGlmICh3M2Nfc2xpZHkuc2Nyb2xsaGFjayA9PSAwICYmICF3M2Nfc2xpZHkudmlld19hbGwpCiAg&#xA;ICAgIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHt3M2Nfc2xpZHkuc2hvd190b29s&#xA;YmFyKCk7IH0sIDEwMDApOwogICAgICAgIHczY19zbGlkeS5zY3JvbGxoYWNrID0gMTsKICAgICAg&#xA;fQogICAgfQogIH0sCgogIGhpZGVfdG9vbGJhcjogZnVuY3Rpb24gKCkgewogICAgdzNjX3NsaWR5&#xA;LmFkZF9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpOwogICAgd2luZG93LmZvY3Vz&#xA;KCk7CiAgfSwKCiAgLy8gdXNlZCB0byBlbnN1cmUgSUUgcmVmcmVzaGVzIHRvb2xiYXIgaW4gY29y&#xA;cmVjdCBwb3NpdGlvbgogIHJlZnJlc2hfdG9vbGJhcjogZnVuY3Rpb24gKGludGVydmFsKSB7CiAg&#xA;ICBpZiAoIXczY19zbGlkeS5uc19wb3MgJiYgIXczY19zbGlkeS5pZTcpCiAgICB7CiAgICAgIHcz&#xA;Y19zbGlkeS5oaWRlX3Rvb2xiYXIoKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7dzNj&#xA;X3NsaWR5LnNob3dfdG9vbGJhcigpO30sIGludGVydmFsKTsKICAgIH0KICB9LAoKICAvLyByZXN0&#xA;b3JlcyB0b29sYmFyIGFmdGVyIHNob3J0IGRlbGF5CiAgc2hvd190b29sYmFyOiBmdW5jdGlvbiAo&#xA;KSB7CiAgICBpZiAodzNjX3NsaWR5LndhbnRfdG9vbGJhcikKICAgIHsKICAgICAgdzNjX3NsaWR5&#xA;LnRvb2xiYXIuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CgogICAgICBpZiAoIXczY19zbGlkeS5u&#xA;c19wb3MpCiAgICAgIHsKICAgICAgICAvLyBhZGp1c3QgcG9zaXRpb24gdG8gYWxsb3cgZm9yIHNj&#xA;cm9sbGluZwogICAgICAgIHZhciB4b2Zmc2V0ID0gdzNjX3NsaWR5LnNjcm9sbF94X29mZnNldCgp&#xA;OwogICAgICAgIHczY19zbGlkeS50b29sYmFyLnN0eWxlLmxlZnQgPSB4b2Zmc2V0OwogICAgICAg&#xA;IHczY19zbGlkeS50b29sYmFyLnN0eWxlLnJpZ2h0ID0geG9mZnNldDsKCiAgICAgICAgLy8gZGV0&#xA;ZXJtaW5lIHZlcnRpY2FsIHNjcm9sbCBvZmZzZXQKICAgICAgICAvL3ZhciB5b2Zmc2V0ID0gc2Ny&#xA;b2xsWU9mZnNldCgpOwoKICAgICAgICAvLyBib3R0b20gaXMgZG9jIGhlaWdodCAtIHdpbmRvdyBo&#xA;ZWlnaHQgLSBzY3JvbGwgb2Zmc2V0CiAgICAgICAgLy92YXIgYm90dG9tID0gZG9jdW1lbnRIZWln&#xA;aHQoKSAtIGxhc3RIZWlnaHQgLSB5b2Zmc2V0CgogICAgICAgIC8vaWYgKHlvZmZzZXQgPiAwIHx8&#xA;IGRvY3VtZW50SGVpZ2h0KCkgPiBsYXN0SGVpZ2h0KQogICAgICAgIC8vICAgYm90dG9tICs9IDE2&#xA;OyAgLy8gYWxsb3cgZm9yIGhlaWdodCBvZiBzY3JvbGxiYXIKCiAgICAgICAgdzNjX3NsaWR5LnRv&#xA;b2xiYXIuc3R5bGUuYm90dG9tID0gMDsgLy9ib3R0b207CiAgICAgIH0KCiAgICAgIHczY19zbGlk&#xA;eS5yZW1vdmVfY2xhc3ModzNjX3NsaWR5LnRvb2xiYXIsICJoaWRkZW4iKTsKICAgIH0KCiAgICB3&#xA;M2Nfc2xpZHkuc2Nyb2xsaGFjayA9IDA7CgoKICAgIC8vIHNldCB0aGUga2V5Ym9hcmQgZm9jdXMg&#xA;dG8gdGhlIGhlbHAgbGluayBvbiB0aGUKICAgIC8vIHRvb2xiYXIgdG8gZW5zdXJlIHRoYXQgZG9j&#xA;dW1lbnQgaGFzIHRoZSBmb2N1cwogICAgLy8gSUUgZG9lc24ndCBhbHdheXMgd29yayB3aXRoIHdp&#xA;bmRvdy5mb2N1cygpCiAgICAvLyBhbmQgdGhpcyBoYWNrIGhhcyBiZW5lZml0IG9mIEVudGVyIGZv&#xA;ciBoZWxwCgogICAgdHJ5CiAgICB7CiAgICAgIGlmICghdzNjX3NsaWR5Lm9wZXJhKQogICAgICAg&#xA;IHczY19zbGlkeS5oZWxwX2FuY2hvci5mb2N1cygpOwogICAgfQogICAgY2F0Y2ggKGUpCiAgICB7&#xA;CiAgICB9CiAgfSwKCi8vIGludm9rZWQgdmlhIEYga2V5CiAgdG9nZ2xlX3Rvb2xiYXI6IGZ1bmN0&#xA;aW9uICgpIHsKICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxsKQogICAgewogICAgICBpZiAodzNj&#xA;X3NsaWR5Lmhhc19jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpKQogICAgICB7CiAg&#xA;ICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIp&#xA;CiAgICAgICAgdzNjX3NsaWR5LndhbnRfdG9vbGJhciA9IDE7CiAgICAgIH0KICAgICAgZWxzZQog&#xA;ICAgICB7CiAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhp&#xA;ZGRlbiIpCiAgICAgICAgdzNjX3NsaWR5LndhbnRfdG9vbGJhciA9IDA7CiAgICAgIH0KICAgIH0K&#xA;ICB9LAoKICBzY3JvbGxfeF9vZmZzZXQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3aW5kb3cucGFn&#xA;ZVhPZmZzZXQpCiAgICAgIHJldHVybiBzZWxmLnBhZ2VYT2Zmc2V0OwoKICAgIGlmIChkb2N1bWVu&#xA;dC5kb2N1bWVudEVsZW1lbnQgJiYgCiAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1l&#xA;bnQuc2Nyb2xsTGVmdCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3Jv&#xA;bGxMZWZ0OwoKICAgIGlmIChkb2N1bWVudC5ib2R5KQogICAgICByZXR1cm4gZG9jdW1lbnQuYm9k&#xA;eS5zY3JvbGxMZWZ0OwoKICAgIHJldHVybiAwOwogIH0sCgogIHNjcm9sbF95X29mZnNldDogZnVu&#xA;Y3Rpb24gKCkgewogICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCkKICAgICAgcmV0dXJuIHNlbGYu&#xA;cGFnZVlPZmZzZXQ7CgogICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAKICAgICAg&#xA;ICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApCiAgICAgIHJldHVybiBk&#xA;b2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOwoKICAgIGlmIChkb2N1bWVudC5ib2R5&#xA;KQogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CgogICAgcmV0dXJuIDA7CiAg&#xA;fSwKCiAgLy8gbG9va2luZyBmb3IgYSB3YXkgdG8gZGV0ZXJtaW5lIGhlaWdodCBvZiBzbGlkZSBj&#xA;b250ZW50CiAgLy8gdGhlIHNsaWRlIGl0c2VsZiBpcyBzZXQgdG8gdGhlIGhlaWdodCBvZiB0aGUg&#xA;d2luZG93CiAgb3B0aW1pemVfZm9udF9zaXplOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2xpZGUg&#xA;PSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIC8vdmFyIGRo&#xA;ID0gZG9jdW1lbnRIZWlnaHQoKTsgLy9nZXREb2NIZWlnaHQoZG9jdW1lbnQpOwogICAgdmFyIGRo&#xA;ID0gc2xpZGUuc2Nyb2xsSGVpZ2h0OwogICAgdmFyIHdoID0gZ2V0V2luZG93SGVpZ2h0KCk7CiAg&#xA;ICB2YXIgdSA9IDEwMCAqIGRoIC8gd2g7CgogICAgYWxlcnQoIndpbmRvdyB1dGlsaXphdGlvbiA9&#xA;ICIgKyB1ICsgIiUgKGRvYyAiCiAgICAgICsgZGggKyAiIHdpbiAiICsgd2ggKyAiKSIpOwogIH0s&#xA;CgogIC8vIGZyb20gZG9jdW1lbnQgb2JqZWN0CiAgZ2V0X2RvY19oZWlnaHQ6IGZ1bmN0aW9uIChk&#xA;b2MpIHsKICAgIGlmICghZG9jKQogICAgICBkb2MgPSBkb2N1bWVudDsKCiAgICBpZiAoZG9jICYm&#xA;IGRvYy5ib2R5ICYmIGRvYy5ib2R5Lm9mZnNldEhlaWdodCkKICAgICAgcmV0dXJuIGRvYy5ib2R5&#xA;Lm9mZnNldEhlaWdodDsgIC8vIG5zL2dlY2tvIHN5bnRheAoKICAgIGlmIChkb2MgJiYgZG9jLmJv&#xA;ZHkgJiYgZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0KQogICAgICByZXR1cm4gZG9jLmJvZHkuc2Nyb2xs&#xA;SGVpZ2h0OwoKICAgIGFsZXJ0KCJjb3VsZG4ndCBkZXRlcm1pbmUgZG9jdW1lbnQgaGVpZ2h0Iik7&#xA;CiAgfSwKCiAgZ2V0X3dpbmRvd19oZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICggdHlwZW9m&#xA;KCB3aW5kb3cuaW5uZXJIZWlnaHQgKSA9PSAnbnVtYmVyJyApCiAgICAgIHJldHVybiB3aW5kb3cu&#xA;aW5uZXJIZWlnaHQ7ICAvLyBOb24gSUUgYnJvd3NlcgoKICAgIGlmIChkb2N1bWVudC5kb2N1bWVu&#xA;dEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkKICAgICAg&#xA;cmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7ICAvLyBJRTYKCiAg&#xA;ICBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkKICAgICAg&#xA;cmV0dXJuIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OyAvLyBJRTQKICB9LAoKICBkb2N1bWVu&#xA;dF9oZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzaCwgb2g7CgogICAgc2ggPSBkb2N1bWVu&#xA;dC5ib2R5LnNjcm9sbEhlaWdodDsKICAgIG9oID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7&#xA;CgogICAgaWYgKHNoICYmIG9oKQogICAgewogICAgICByZXR1cm4gKHNoID4gb2ggPyBzaCA6IG9o&#xA;KTsKICAgIH0KCiAgICAvLyBubyBpZGVhIQogICAgcmV0dXJuIDA7CiAgfSwKCiAgc21hbGxlcjog&#xA;ZnVuY3Rpb24gKCkgewogICAgaWYgKHczY19zbGlkeS5zaXplX2luZGV4ID4gMCkKICAgIHsKICAg&#xA;ICAgLS13M2Nfc2xpZHkuc2l6ZV9pbmRleDsKICAgIH0KCiAgICB3M2Nfc2xpZHkudG9vbGJhci5z&#xA;dHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9&#xA;IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICB2YXIgc2xpZGUgPSB3&#xA;M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5Lmhp&#xA;ZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgc2V0&#xA;VGltZW91dChmdW5jdGlvbiAoKSB7dzNjX3NsaWR5LnNob3dfdG9vbGJhcigpOyB9LCA1MCk7CiAg&#xA;fSwKCiAgYmlnZ2VyOiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodzNjX3NsaWR5LnNpemVfaW5kZXgg&#xA;PCB3M2Nfc2xpZHkuc2l6ZXMubGVuZ3RoIC0gMSkKICAgIHsKICAgICAgKyt3M2Nfc2xpZHkuc2l6&#xA;ZV9pbmRleDsKICAgIH0KCiAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gIm5v&#xA;bmUiOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3&#xA;M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3cz&#xA;Y19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwog&#xA;ICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAo&#xA;KSB7dzNjX3NsaWR5LnNob3dfdG9vbGJhcigpOyB9LCA1MCk7CiAgfSwKCiAgLy8gZW5hYmxlcyBj&#xA;cm9zcyBicm93c2VyIHVzZSBvZiByZWxhdGl2ZSB3aWR0aC9oZWlnaHQKICAvLyBvbiBvYmplY3Qg&#xA;ZWxlbWVudHMgZm9yIHVzZSB3aXRoIFNWRyBhbmQgRmxhc2ggbWVkaWEKICAvLyB3aXRoIHRoYW5r&#xA;cyB0byBJdmFuIEhlcm1hbiBmb3IgdGhlIHN1Z2dlc3Rpb24KICBhZGp1c3Rfb2JqZWN0X2RpbWVu&#xA;c2lvbnM6IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7CiAgICBmb3IoIHZhciBpID0gMDsgaSA8&#xA;IHczY19zbGlkeS5vYmplY3RzLmxlbmd0aDsgaSsrICkKICAgIHsKICAgICAgdmFyIG9iaiA9IHRo&#xA;aXMub2JqZWN0c1tpXTsKICAgICAgdmFyIG1pbWVUeXBlID0gb2JqLmdldEF0dHJpYnV0ZSgidHlw&#xA;ZSIpOwoKICAgICAgaWYgKG1pbWVUeXBlID09ICJpbWFnZS9zdmcreG1sIiB8fCBtaW1lVHlwZSA9&#xA;PSAiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2giKQogICAgICB7CiAgICAgICAgaWYgKCAh&#xA;b2JqLmluaXRpYWxXaWR0aCApIAogICAgICAgICAgb2JqLmluaXRpYWxXaWR0aCA9IG9iai5nZXRB&#xA;dHRyaWJ1dGUoIndpZHRoIik7CgogICAgICAgIGlmICggIW9iai5pbml0aWFsSGVpZ2h0ICkgCiAg&#xA;ICAgICAgICBvYmouaW5pdGlhbEhlaWdodCA9IG9iai5nZXRBdHRyaWJ1dGUoImhlaWdodCIpOwoK&#xA;ICAgICAgICBpZiAoIG9iai5pbml0aWFsV2lkdGggJiYgb2JqLmluaXRpYWxXaWR0aC5jaGFyQXQo&#xA;b2JqLmluaXRpYWxXaWR0aC5sZW5ndGgtMSkgPT0gIiUiICkKICAgICAgICB7CiAgICAgICAgICB2&#xA;YXIgdyA9IHBhcnNlSW50KG9iai5pbml0aWFsV2lkdGguc2xpY2UoMCwgb2JqLmluaXRpYWxXaWR0&#xA;aC5sZW5ndGgtMSkpOwogICAgICAgICAgdmFyIG5ld1cgPSB3aWR0aCAqICh3LzEwMC4wKTsKICAg&#xA;ICAgICAgIG9iai5zZXRBdHRyaWJ1dGUoIndpZHRoIixuZXdXKTsKICAgICAgICB9CgogICAgICAg&#xA;IGlmICggb2JqLmluaXRpYWxIZWlnaHQgJiYKICAgICAgICAgICAgIG9iai5pbml0aWFsSGVpZ2h0&#xA;LmNoYXJBdChvYmouaW5pdGlhbEhlaWdodC5sZW5ndGgtMSkgPT0gIiUiICkKICAgICAgICB7CiAg&#xA;ICAgICAgICB2YXIgaCA9IHBhcnNlSW50KG9iai5pbml0aWFsSGVpZ2h0LnNsaWNlKDAsIG9iai5p&#xA;bml0aWFsSGVpZ2h0Lmxlbmd0aC0xKSk7CiAgICAgICAgICB2YXIgbmV3SCA9IGhlaWdodCAqICho&#xA;LzEwMC4wKTsKICAgICAgICAgIG9iai5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIG5ld0gpOwogICAg&#xA;ICAgIH0KICAgICAgfQogICAgfQogIH0sCgogIC8vIG5lZWRlZCBmb3IgT3BlcmEgdG8gaW5oaWJp&#xA;dCBkZWZhdWx0IGJlaGF2aW9yCiAgLy8gc2luY2UgT3BlcmEgZGVsaXZlcnMga2V5UHJlc3MgZXZl&#xA;biBpZiBrZXlEb3duCiAgLy8gd2FzIGNhbmNlbGxlZAogIGtleV9wcmVzczogZnVuY3Rpb24gKGV2&#xA;ZW50KSB7CiAgICBpZiAoIWV2ZW50KQogICAgICBldmVudCA9IHdpbmRvdy5ldmVudDsKCiAgICBp&#xA;ZiAoIXczY19zbGlkeS5rZXlfd2FudGVkKQogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChl&#xA;dmVudCk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgLy8gIFNlZSBlLmcuIGh0dHA6Ly93d3cu&#xA;cXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzL2tleXMuaHRtbCBmb3Iga2V5Y29kZXMKICBrZXlfZG93&#xA;bjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICB2YXIga2V5LCB0YXJnZXQsIHRhZzsKCiAgICB3M2Nf&#xA;c2xpZHkua2V5X3dhbnRlZCA9IHRydWU7CgogICAgaWYgKCFldmVudCkKICAgICAgZXZlbnQgPSB3&#xA;aW5kb3cuZXZlbnQ7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAg&#xA;IGlmICh3aW5kb3cuZXZlbnQpCiAgICB7CiAgICAgIGtleSA9IHdpbmRvdy5ldmVudC5rZXlDb2Rl&#xA;OwogICAgICB0YXJnZXQgPSB3aW5kb3cuZXZlbnQuc3JjRWxlbWVudDsKICAgIH0KICAgIGVsc2Ug&#xA;aWYgKGV2ZW50LndoaWNoKQogICAgewogICAgICBrZXkgPSBldmVudC53aGljaDsKICAgICAgdGFy&#xA;Z2V0ID0gZXZlbnQudGFyZ2V0OwogICAgfQogICAgZWxzZQogICAgICByZXR1cm4gdHJ1ZTsgLy8g&#xA;WWlrZXMhIHVua25vd24gYnJvd3NlcgoKICAgIC8vIGlnbm9yZSBldmVudCBpZiBrZXkgdmFsdWUg&#xA;aXMgemVybwogICAgLy8gYXMgZm9yIGFsdCBvbiBPcGVyYSBhbmQgS29ucXVlcm9yCiAgICBpZiAo&#xA;IWtleSkKICAgICAgIHJldHVybiB0cnVlOwoKICAgIC8vIGF2b2lkIGludGVyZmVyaW5nIHdpdGgg&#xA;a2V5c3Ryb2tlCiAgICAvLyBiZWhhdmlvciBmb3Igbm9uLXNsaWR5IGNocm9tZSBlbGVtZW50cwog&#xA;ICAgaWYgKCF3M2Nfc2xpZHkuc2xpZHlfY2hyb21lKHRhcmdldCkgJiYKICAgICAgICB3M2Nfc2xp&#xA;ZHkuc3BlY2lhbF9lbGVtZW50KHRhcmdldCkpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIC8vIGNo&#xA;ZWNrIGZvciBjb25jdXJyZW50IGNvbnRyb2wvY29tbWFuZC9hbHQga2V5CiAgICAvLyBidXQgYXJl&#xA;IHRoZXNlIG9ubHkgcHJlc2VudCBvbiBtb3VzZSBldmVudHM/CgogICAgaWYgKGV2ZW50LmN0cmxL&#xA;ZXkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm1ldGFLZXkpCiAgICAgICByZXR1cm4gdHJ1ZTsK&#xA;CiAgICAvLyBkaXNtaXNzIHRhYmxlIG9mIGNvbnRlbnRzIGlmIHZpc2libGUKICAgIGlmICh3M2Nf&#xA;c2xpZHkuaXNfc2hvd25fdG9jKCkgJiYga2V5ICE9IDkgJiYga2V5ICE9IDE2ICYmIGtleSAhPSAz&#xA;OCAmJiBrZXkgIT0gNDApCiAgICB7CiAgICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRl&#xA;bnRzKHRydWUpOwoKICAgICAgaWYgKGtleSA9PSAyNyB8fCBrZXkgPT0gODQgfHwga2V5ID09IDY3&#xA;KQogICAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KCiAgICBpZiAo&#xA;a2V5ID09IDM0KSAvLyBQYWdlIERvd24KICAgIHsKICAgICAgaWYgKHczY19zbGlkeS52aWV3X2Fs&#xA;bCkKICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgIHczY19zbGlkeS5uZXh0X3NsaWRlKGZhbHNl&#xA;KTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBp&#xA;ZiAoa2V5ID09IDMzKSAvLyBQYWdlIFVwCiAgICB7CiAgICAgIGlmICh3M2Nfc2xpZHkudmlld19h&#xA;bGwpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICB3M2Nfc2xpZHkucHJldmlvdXNfc2xpZGUo&#xA;ZmFsc2UpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBl&#xA;bHNlIGlmIChrZXkgPT0gMzIpIC8vIHNwYWNlIGJhcgogICAgewogICAgICB3M2Nfc2xpZHkubmV4&#xA;dF9zbGlkZSh0cnVlKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAg&#xA;fQogICAgZWxzZSBpZiAoa2V5ID09IDM3KSAvLyBMZWZ0IGFycm93CiAgICB7CiAgICAgIHczY19z&#xA;bGlkeS5wcmV2aW91c19zbGlkZSghZXZlbnQuc2hpZnRLZXkpOwogICAgICByZXR1cm4gdzNjX3Ns&#xA;aWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMzYpIC8vIEhvbWUK&#xA;ICAgIHsKICAgICAgdzNjX3NsaWR5LmZpcnN0X3NsaWRlKCk7CiAgICAgIHJldHVybiB3M2Nfc2xp&#xA;ZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSAzNSkgLy8gRW5kCiAg&#xA;ICB7CiAgICAgIHczY19zbGlkeS5sYXN0X3NsaWRlKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHku&#xA;Y2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSAzOSkgLy8gUmlnaHQgYXJy&#xA;b3cKICAgIHsKICAgICAgdzNjX3NsaWR5Lm5leHRfc2xpZGUoIWV2ZW50LnNoaWZ0S2V5KTsKICAg&#xA;ICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5&#xA;ID09IDEzKSAvLyBFbnRlcgogICAgewogICAgICBpZiAodzNjX3NsaWR5Lm91dGxpbmUpCiAgICAg&#xA;IHsKICAgICAgICBpZiAodzNjX3NsaWR5Lm91dGxpbmUudmlzaWJsZSkKICAgICAgICAgIHczY19z&#xA;bGlkeS5mb2xkKHczY19zbGlkeS5vdXRsaW5lKTsKICAgICAgICBlbHNlCiAgICAgICAgICB3M2Nf&#xA;c2xpZHkudW5mb2xkKHczY19zbGlkeS5vdXRsaW5lKTsKICAgICAgICAgIAogICAgICAgcmV0dXJu&#xA;IHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgICB9CiAgICB9CiAgICBlbHNlIGlmIChrZXkg&#xA;PT0gMTg4KSAgLy8gPCBmb3Igc21hbGxlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuc21h&#xA;bGxlcigpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBl&#xA;bHNlIGlmIChrZXkgPT0gMTkwKSAgLy8gPiBmb3IgbGFyZ2VyIGZvbnRzCiAgICB7CiAgICAgIHcz&#xA;Y19zbGlkeS5iaWdnZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwog&#xA;ICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDE4OSB8fCBrZXkgPT0gMTA5KSAgLy8gLSBmb3Igc21h&#xA;bGxlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuc21hbGxlcigpOwogICAgICByZXR1cm4g&#xA;dzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTg3IHx8&#xA;IGtleSA9PSAxOTEgfHwga2V5ID09IDEwNykgIC8vID0gKyAgZm9yIGxhcmdlciBmb250cwogICAg&#xA;ewogICAgICB3M2Nfc2xpZHkuYmlnZ2VyKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2Vs&#xA;KGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA4MykgIC8vIFMgZm9yIHNtYWxsZXIg&#xA;Zm9udHMKICAgIHsKICAgICAgdzNjX3NsaWR5LnNtYWxsZXIoKTsKICAgICAgcmV0dXJuIHczY19z&#xA;bGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDY2KSAgLy8gQiBm&#xA;b3IgbGFyZ2VyIGZvbnRzCiAgICB7CiAgICAgIHczY19zbGlkeS5iaWdnZXIoKTsKICAgICAgcmV0&#xA;dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDkw&#xA;KSAgLy8gWiBmb3IgbGFzdCBzbGlkZQogICAgewogICAgICB3M2Nfc2xpZHkubGFzdF9zbGlkZSgp&#xA;OwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlm&#xA;IChrZXkgPT0gNzApICAvLyBGIGZvciB0b2dnbGUgdG9vbGJhcgogICAgewogICAgICB3M2Nfc2xp&#xA;ZHkudG9nZ2xlX3Rvb2xiYXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQp&#xA;OwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDY1KSAgLy8gQSBmb3IgdG9nZ2xlIHZpZXcgc2lu&#xA;Z2xlL2FsbCBzbGlkZXMKICAgIHsKICAgICAgdzNjX3NsaWR5LnRvZ2dsZV92aWV3KCk7CiAgICAg&#xA;IHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9&#xA;PSA3NSkgIC8vIHRvZ2dsZSBhY3Rpb24gb2YgbGVmdCBjbGljayBmb3IgbmV4dCBwYWdlCiAgICB7&#xA;CiAgICAgIHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkID0gIXczY19zbGlkeS5tb3VzZV9j&#xA;bGlja19lbmFibGVkOwogICAgICB2YXIgYWxlcnRfbXNnID0gKHczY19zbGlkeS5tb3VzZV9jbGlj&#xA;a19lbmFibGVkID8KICAgICAgICAgICAgICAgICJlbmFibGVkIiA6ICJkaXNhYmxlZCIpICsgICIg&#xA;bW91c2UgY2xpY2sgYWR2YW5jZSI7CgogICAgICBhbGVydCh3M2Nfc2xpZHkubG9jYWxpemUoYWxl&#xA;cnRfbXNnKSk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAg&#xA;IGVsc2UgaWYgKGtleSA9PSA4NCB8fCBrZXkgPT0gNjcpICAvLyBUIG9yIEMgZm9yIHRhYmxlIG9m&#xA;IGNvbnRlbnRzCiAgICB7CiAgICAgIGlmICh3M2Nfc2xpZHkudG9jKQogICAgICAgIHczY19zbGlk&#xA;eS50b2dnbGVfdGFibGVfb2ZfY29udGVudHMoKTsKCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2Fu&#xA;Y2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA3MikgLy8gSCBmb3IgaGVscAog&#xA;ICAgewogICAgICB3aW5kb3cubG9jYXRpb24gPSB3M2Nfc2xpZHkuaGVscF9wYWdlOwogICAgICBy&#xA;ZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICAvL2Vsc2UgYWxlcnQoImtl&#xA;eSBjb2RlIGlzICIrIGtleSk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgLy8gc2FmZSBmb3Ig&#xA;Ym90aCB0ZXh0L2h0bWwgYW5kIGFwcGxpY2F0aW9uL3hodG1sK3htbAogIGNyZWF0ZV9lbGVtZW50&#xA;OiBmdW5jdGlvbiAobmFtZSkgewogICAgaWYgKHRoaXMueGh0bWwgJiYgKHR5cGVvZiBkb2N1bWVu&#xA;dC5jcmVhdGVFbGVtZW50TlMgIT0gJ3VuZGVmaW5lZCcpKQogICAgICByZXR1cm4gZG9jdW1lbnQu&#xA;Y3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwgbmFtZSkKCiAg&#xA;ICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTsKICB9LAoKICBnZXRfZWxlbWVu&#xA;dF9zdHlsZTogZnVuY3Rpb24gKGVsZW0sIElFU3R5bGVQcm9wLCBDU1NTdHlsZVByb3ApIHsKICAg&#xA;IGlmIChlbGVtLmN1cnJlbnRTdHlsZSkKICAgIHsKICAgICAgcmV0dXJuIGVsZW0uY3VycmVudFN0&#xA;eWxlW0lFU3R5bGVQcm9wXTsKICAgIH0KICAgIGVsc2UgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0&#xA;eWxlKQogICAgewogICAgICB2YXIgY29tcFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUo&#xA;ZWxlbSwgIiIpOwogICAgICByZXR1cm4gY29tcFN0eWxlLmdldFByb3BlcnR5VmFsdWUoQ1NTU3R5&#xA;bGVQcm9wKTsKICAgIH0KICAgIHJldHVybiAiIjsKICB9LAoKICAvLyB0aGUgc3RyaW5nIHN0ciBp&#xA;cyBhIHdoaXRlc3BhY2Ugc2VwYXJhdGVkIGxpc3Qgb2YgdG9rZW5zCiAgLy8gdGVzdCBpZiBzdHIg&#xA;Y29udGFpbnMgYSBwYXJ0aWN1bGFyIHRva2VuLCBlLmcuICJzbGlkZSIKICBoYXNfdG9rZW46IGZ1&#xA;bmN0aW9uIChzdHIsIHRva2VuKSB7CiAgICBpZiAoc3RyKQogICAgewogICAgICAvLyBkZWZpbmUg&#xA;cGF0dGVybiBhcyByZWd1bGFyIGV4cHJlc3Npb24KICAgICAgdmFyIHBhdHRlcm4gPSAvXHcrL2c7&#xA;CgogICAgICAvLyBjaGVjayBmb3IgbWF0Y2hlcwogICAgICAvLyBwbGFjZSByZXN1bHQgaW4gYXJy&#xA;YXkKICAgICAgdmFyIHJlc3VsdCA9IHN0ci5tYXRjaChwYXR0ZXJuKTsKCiAgICAgIC8vIG5vdyBj&#xA;aGVjayBpZiBkZXNpcmVkIHRva2VuIGlzIHByZXNlbnQKICAgICAgZm9yICh2YXIgaSA9IDA7IGkg&#xA;PCByZXN1bHQubGVuZ3RoOyBpKyspCiAgICAgIHsKICAgICAgICBpZiAocmVzdWx0W2ldID09IHRv&#xA;a2VuKQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFs&#xA;c2U7CiAgfSwKCiAgZ2V0X2NsYXNzX2xpc3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAo&#xA;dHlwZW9mIGVsZW1lbnQuY2xhc3NOYW1lICE9ICd1bmRlZmluZWQnKQogICAgICByZXR1cm4gZWxl&#xA;bWVudC5jbGFzc05hbWU7CgogICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJjbGFzcyIp&#xA;OwogIH0sCgogIGhhc19jbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmIChl&#xA;bGVtZW50Lm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICB2YXIgcmVnZXhw&#xA;ID0gbmV3IFJlZ0V4cCgiKF58ICkiICsgbmFtZSArICJcVyoiKTsKCiAgICBpZiAodHlwZW9mIGVs&#xA;ZW1lbnQuY2xhc3NOYW1lICE9ICd1bmRlZmluZWQnKQogICAgICByZXR1cm4gcmVnZXhwLnRlc3Qo&#xA;ZWxlbWVudC5jbGFzc05hbWUpOwoKICAgIHJldHVybiByZWdleHAudGVzdChlbGVtZW50LmdldEF0&#xA;dHJpYnV0ZSgiY2xhc3MiKSk7CiAgfSwKCiAgcmVtb3ZlX2NsYXNzOiBmdW5jdGlvbiAoZWxlbWVu&#xA;dCwgbmFtZSkgewogICAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoIihefCApIiArIG5hbWUgKyAi&#xA;XFcqIik7CiAgICB2YXIgY2xzdmFsID0gIiI7CgogICAgaWYgKHR5cGVvZiBlbGVtZW50LmNsYXNz&#xA;TmFtZSAhPSAndW5kZWZpbmVkJykKICAgIHsKICAgICAgY2xzdmFsID0gZWxlbWVudC5jbGFzc05h&#xA;bWU7CgogICAgICBpZiAoY2xzdmFsKQogICAgICB7CiAgICAgICAgY2xzdmFsID0gY2xzdmFsLnJl&#xA;cGxhY2UocmVnZXhwLCAiIik7CiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbHN2YWw7CiAg&#xA;ICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgY2xzdmFsID0gZWxlbWVudC5nZXRBdHRy&#xA;aWJ1dGUoImNsYXNzIik7CgogICAgICBpZiAoY2xzdmFsKQogICAgICB7CiAgICAgICAgY2xzdmFs&#xA;ID0gY2xzdmFsLnJlcGxhY2UocmVnZXhwLCAiIik7CiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1&#xA;dGUoImNsYXNzIiwgY2xzdmFsKTsKICAgICAgfQogICAgfQogIH0sCgogIGFkZF9jbGFzczogZnVu&#xA;Y3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmICghdGhpcy5oYXNfY2xhc3MoZWxlbWVudCwg&#xA;bmFtZSkpCiAgICB7CiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5jbGFzc05hbWUgIT0gJ3VuZGVm&#xA;aW5lZCcpCiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gIiAiICsgbmFtZTsKICAgICAgZWxz&#xA;ZQogICAgICB7CiAgICAgICAgdmFyIGNsc3ZhbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJjbGFz&#xA;cyIpOwogICAgICAgIGNsc3ZhbCA9IGNsc3ZhbCA/IGNsc3ZhbCArICIgIiArIG5hbWUgOiBuYW1l&#xA;OwogICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGNsc3ZhbCk7CiAgICAgIH0K&#xA;ICAgIH0KICB9LAoKICAvLyBIVE1MIGVsZW1lbnRzIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBjbGFz&#xA;cz0iaW5jcmVtZW50YWwiCiAgLy8gbm90ZSB0aGF0IHlvdSBjYW4gYWxzbyBwdXQgdGhlIGNsYXNz&#xA;IG9uIGNvbnRhaW5lcnMgbGlrZQogIC8vIHVwLCBvbCwgZGwsIGFuZCBkaXYgdG8gbWFrZSB0aGVp&#xA;ciBjb250ZW50cyBhcHBlYXIKICAvLyBpbmNyZW1lbnRhbGx5LiBVcHBlciBjYXNlIGlzIHVzZWQg&#xA;c2luY2UgdGhpcyBpcyB3aGF0CiAgLy8gYnJvd3NlcnMgcmVwb3J0IGZvciBIVE1MIG5vZGUgbmFt&#xA;ZXMgKHRleHQvaHRtbCkuCiAgaW5jcmVtZW50YWxfZWxlbWVudHM6IG51bGwsCiAgb2theV9mb3Jf&#xA;aW5jcmVtZW50YWw6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICBpZiAoIXRoaXMuaW5jcmVtZW50YWxf&#xA;ZWxlbWVudHMpCiAgICB7CiAgICAgIHZhciBpbmNsaXN0ID0gbmV3IEFycmF5KCk7CiAgICAgIGlu&#xA;Y2xpc3RbInAiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbInByZSJdID0gdHJ1ZTsKICAgICAgaW5j&#xA;bGlzdFsibGkiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImJsb2NrcXVvdGUiXSA9IHRydWU7CiAg&#xA;ICAgIGluY2xpc3RbImR0Il0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJkZCJdID0gdHJ1ZTsKICAg&#xA;ICAgaW5jbGlzdFsiaDIiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImgzIl0gPSB0cnVlOwogICAg&#xA;ICBpbmNsaXN0WyJoNCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaDUiXSA9IHRydWU7CiAgICAg&#xA;IGluY2xpc3RbImg2Il0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJzcGFuIl0gPSB0cnVlOwogICAg&#xA;ICBpbmNsaXN0WyJhZGRyZXNzIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJ0YWJsZSJdID0gdHJ1&#xA;ZTsKICAgICAgaW5jbGlzdFsidHIiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbInRoIl0gPSB0cnVl&#xA;OwogICAgICBpbmNsaXN0WyJ0ZCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaW1nIl0gPSB0cnVl&#xA;OwogICAgICBpbmNsaXN0WyJvYmplY3QiXSA9IHRydWU7CiAgICAgIHRoaXMuaW5jcmVtZW50YWxf&#xA;ZWxlbWVudHMgPSBpbmNsaXN0OwogICAgfQogICAgcmV0dXJuIHRoaXMuaW5jcmVtZW50YWxfZWxl&#xA;bWVudHNbbmFtZS50b0xvd2VyQ2FzZSgpXTsKICB9LAoKICBuZXh0X2luY3JlbWVudGFsX2l0ZW06&#xA;IGZ1bmN0aW9uIChub2RlKSB7CiAgICB2YXIgYnIgPSB0aGlzLmlzX3hodG1sID8gImJyIiA6ICJC&#xA;UiI7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1i&#xA;ZXJdOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSB3M2Nfc2xpZHkubmV4dF9ub2Rl&#xA;KHNsaWRlLCBub2RlKTsKCiAgICAgIGlmIChub2RlID09IG51bGwgfHwgbm9kZS5wYXJlbnROb2Rl&#xA;ID09IG51bGwpCiAgICAgICAgYnJlYWs7CgogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSAg&#xA;Ly8gRUxFTUVOVAogICAgICB7CiAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gYnIpCiAgICAg&#xA;ICAgICBjb250aW51ZTsKCiAgICAgICAgaWYgKHczY19zbGlkeS5oYXNfY2xhc3Mobm9kZSwgImlu&#xA;Y3JlbWVudGFsIikKICAgICAgICAgICAgICYmIHczY19zbGlkeS5va2F5X2Zvcl9pbmNyZW1lbnRh&#xA;bChub2RlLm5vZGVOYW1lKSkKICAgICAgICAgIHJldHVybiBub2RlOwoKICAgICAgICBpZiAodzNj&#xA;X3NsaWR5Lmhhc19jbGFzcyhub2RlLnBhcmVudE5vZGUsICJpbmNyZW1lbnRhbCIpCiAgICAgICAg&#xA;ICAgICAmJiAhdzNjX3NsaWR5Lmhhc19jbGFzcyhub2RlLCAibm9uLWluY3JlbWVudGFsIikpCiAg&#xA;ICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBub2RlOwogIH0s&#xA;CgogIHByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICB2YXIg&#xA;YnIgPSB0aGlzLmlzX3hodG1sID8gImJyIiA6ICJCUiI7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xp&#xA;ZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAoOzspCiAgICB7CiAg&#xA;ICAgIG5vZGUgPSB3M2Nfc2xpZHkucHJldmlvdXNfbm9kZShzbGlkZSwgbm9kZSk7CgogICAgICBp&#xA;ZiAobm9kZSA9PSBudWxsIHx8IG5vZGUucGFyZW50Tm9kZSA9PSBudWxsKQogICAgICAgIGJyZWFr&#xA;OwoKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkKICAgICAgewogICAgICAgIGlmIChub2Rl&#xA;Lm5vZGVOYW1lID09IGJyKQogICAgICAgICAgY29udGludWU7CgogICAgICAgIGlmICh3M2Nfc2xp&#xA;ZHkuaGFzX2NsYXNzKG5vZGUsICJpbmNyZW1lbnRhbCIpCiAgICAgICAgICAgICAmJiB3M2Nfc2xp&#xA;ZHkub2theV9mb3JfaW5jcmVtZW50YWwobm9kZS5ub2RlTmFtZSkpCiAgICAgICAgICByZXR1cm4g&#xA;bm9kZTsKCiAgICAgICAgaWYgKHczY19zbGlkeS5oYXNfY2xhc3Mobm9kZS5wYXJlbnROb2RlLCAi&#xA;aW5jcmVtZW50YWwiKQogICAgICAgICAgICAgJiYgIXczY19zbGlkeS5oYXNfY2xhc3Mobm9kZSwg&#xA;Im5vbi1pbmNyZW1lbnRhbCIpKQogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0K&#xA;CiAgICByZXR1cm4gbm9kZTsKICB9LAoKICAvLyBzZXQgdmlzaWJpbGl0eSBmb3IgYWxsIGVsZW1l&#xA;bnRzIG9uIGN1cnJlbnQgc2xpZGUgd2l0aAogIC8vIGEgcGFyZW50IGVsZW1lbnQgd2l0aCBhdHRy&#xA;aWJ1dGUgY2xhc3M9ImluY3JlbWVudGFsIgogIHNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRh&#xA;bDogZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMubmV4dF9pbmNyZW1lbnRh&#xA;bF9pdGVtKG51bGwpOwoKICAgIGlmICh2YWx1ZSA9PSAiaGlkZGVuIikKICAgIHsKICAgICAgd2hp&#xA;bGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKG5vZGUsICJpbnZp&#xA;c2libGUiKTsKICAgICAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShu&#xA;b2RlKTsKICAgICAgfQogICAgfQogICAgZWxzZSAvLyB2YWx1ZSA9PSAidmlzaWJsZSIKICAgIHsK&#xA;ICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB3M2Nfc2xpZHkucmVtb3ZlX2NsYXNz&#xA;KG5vZGUsICJpbnZpc2libGUiKTsKICAgICAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVt&#xA;ZW50YWxfaXRlbShub2RlKTsKICAgICAgfQogICAgfQogIH0sCgogIC8vIHJldmVhbCB0aGUgbmV4&#xA;dCBoaWRkZW4gaXRlbSBvbiB0aGUgc2xpZGUKICAvLyBub2RlIGlzIG51bGwgb3IgdGhlIG5vZGUg&#xA;dGhhdCB3YXMgbGFzdCByZXZlYWxlZAogIHJldmVhbF9uZXh0X2l0ZW06IGZ1bmN0aW9uIChub2Rl&#xA;KSB7CiAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKCiAg&#xA;ICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09IDEpICAvLyBhbiBlbGVtZW50CiAgICAgIHcz&#xA;Y19zbGlkeS5yZW1vdmVfY2xhc3Mobm9kZSwgImludmlzaWJsZSIpOwoKICAgIHJldHVybiBub2Rl&#xA;OwogIH0sCgogIC8vIGV4YWN0IGludmVyc2Ugb2YgcmV2ZWFsTmV4dEl0ZW0obm9kZSkKICBoaWRl&#xA;X3ByZXZpb3VzX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICBpZiAobm9kZSAmJiBub2RlLm5v&#xA;ZGVUeXBlID09IDEpICAvLyBhbiBlbGVtZW50CiAgICAgIHczY19zbGlkeS5hZGRfY2xhc3Mobm9k&#xA;ZSwgImludmlzaWJsZSIpOwoKICAgIHJldHVybiB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0&#xA;ZW0obm9kZSk7CiAgfSwKCiAgLy8gbGVmdCB0byByaWdodCB0cmF2ZXJzYWwgb2Ygcm9vdCdzIGNv&#xA;bnRlbnQKICBuZXh0X25vZGU6IGZ1bmN0aW9uIChyb290LCBub2RlKSB7CiAgICBpZiAobm9kZSA9&#xA;PSBudWxsKQogICAgICByZXR1cm4gcm9vdC5maXJzdENoaWxkOwoKICAgIGlmIChub2RlLmZpcnN0&#xA;Q2hpbGQpCiAgICAgIHJldHVybiBub2RlLmZpcnN0Q2hpbGQ7CgogICAgaWYgKG5vZGUubmV4dFNp&#xA;YmxpbmcpCiAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nOwoKICAgIGZvciAoOzspCiAgICB7&#xA;CiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7CgogICAgICBpZiAoIW5vZGUgfHwgbm9kZSA9&#xA;PSByb290KQogICAgICAgIGJyZWFrOwoKICAgICAgaWYgKG5vZGUgJiYgbm9kZS5uZXh0U2libGlu&#xA;ZykKICAgICAgICByZXR1cm4gbm9kZS5uZXh0U2libGluZzsKICAgIH0KCiAgICByZXR1cm4gbnVs&#xA;bDsKICB9LAoKICAvLyByaWdodCB0byBsZWZ0IHRyYXZlcnNhbCBvZiByb290J3MgY29udGVudAog&#xA;IHByZXZpb3VzX25vZGU6IGZ1bmN0aW9uIChyb290LCBub2RlKSB7CiAgICBpZiAobm9kZSA9PSBu&#xA;dWxsKQogICAgewogICAgICBub2RlID0gcm9vdC5sYXN0Q2hpbGQ7CgogICAgICBpZiAobm9kZSkK&#xA;ICAgICAgewogICAgICAgIHdoaWxlIChub2RlLmxhc3RDaGlsZCkKICAgICAgICAgIG5vZGUgPSBu&#xA;b2RlLmxhc3RDaGlsZDsKICAgICAgfQoKICAgICAgcmV0dXJuIG5vZGU7CiAgICB9CgogICAgaWYg&#xA;KG5vZGUucHJldmlvdXNTaWJsaW5nKQogICAgewogICAgICBub2RlID0gbm9kZS5wcmV2aW91c1Np&#xA;Ymxpbmc7CgogICAgICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpCiAgICAgICAgbm9kZSA9IG5vZGUu&#xA;bGFzdENoaWxkOwoKICAgICAgcmV0dXJuIG5vZGU7CiAgICB9CgogICAgaWYgKG5vZGUucGFyZW50&#xA;Tm9kZSAhPSByb290KQogICAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlOwoKICAgIHJldHVybiBu&#xA;dWxsOwogIH0sCgogIHByZXZpb3VzX3NpYmxpbmdfZWxlbWVudDogZnVuY3Rpb24gKGVsKSB7CiAg&#xA;ICBlbCA9IGVsLnByZXZpb3VzU2libGluZzsKCiAgICB3aGlsZSAoZWwgJiYgZWwubm9kZVR5cGUg&#xA;IT0gMSkKICAgICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7CgogICAgcmV0dXJuIGVsOwogIH0s&#xA;CgogIG5leHRfc2libGluZ19lbGVtZW50OiBmdW5jdGlvbiAoZWwpIHsKICAgIGVsID0gZWwubmV4&#xA;dFNpYmxpbmc7CgogICAgd2hpbGUgKGVsICYmIGVsLm5vZGVUeXBlICE9IDEpCiAgICAgIGVsID0g&#xA;ZWwubmV4dFNpYmxpbmc7CgogICAgcmV0dXJuIGVsOwogIH0sCgogIGZpcnN0X2NoaWxkX2VsZW1l&#xA;bnQ6IGZ1bmN0aW9uIChlbCkgewogICAgdmFyIG5vZGU7CgogICAgZm9yIChub2RlID0gZWwuZmly&#xA;c3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpCiAgICB7CiAgICAgIGlmIChu&#xA;b2RlLm5vZGVUeXBlID09IDEpCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIG5vZGU7&#xA;CiAgfSwKCiAgZmlyc3RfdGFnOiBmdW5jdGlvbiAoZWxlbWVudCwgdGFnKSB7CiAgICB2YXIgbm9k&#xA;ZTsKCiAgICBpZiAoIXRoaXMuaXNfeGh0bWwpCiAgICAgIHRhZyA9IHRhZy50b1VwcGVyQ2FzZSgp&#xA;OwoKICAgIGZvciAobm9kZSA9IGVsZW1lbnQuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUu&#xA;bmV4dFNpYmxpbmcpCiAgICB7CiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgbm9kZS5u&#xA;b2RlTmFtZSA9PSB0YWcpCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIG5vZGU7CiAg&#xA;fSwKCiAgaGlkZV9zZWxlY3Rpb246IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3aW5kb3cuZ2V0U2Vs&#xA;ZWN0aW9uKSAvLyBGaXJlZm94LCBDaHJvbWl1bSwgU2FmYXJpLCBPcGVyYQogICAgewogICAgICB2&#xA;YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOwoKICAgICAgaWYgKHNlbGVjdGlv&#xA;bi5yYW5nZUNvdW50ID4gMCkKICAgICAgewogICAgICAgIHZhciByYW5nZSA9IHNlbGVjdGlvbi5n&#xA;ZXRSYW5nZUF0KDApOwogICAgICAgIHJhbmdlLmNvbGxhcHNlIChmYWxzZSk7CiAgICAgIH0KICAg&#xA;IH0KICAgIGVsc2UgLy8gSW50ZXJuZXQgRXhwbG9yZXIKICAgIHsKICAgICAgdmFyIHRleHRSYW5n&#xA;ZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSAoKTsKICAgICAgdGV4dFJhbmdlLmNv&#xA;bGxhcHNlIChmYWxzZSk7CiAgICB9CiAgfSwKCiAgZ2V0X3NlbGVjdGVkX3RleHQ6IGZ1bmN0aW9u&#xA;ICgpIHsKICAgIHRyeQogICAgewogICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikKICAgICAg&#xA;ICByZXR1cm4gd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7CgogICAgICBpZiAoZG9j&#xA;dW1lbnQuZ2V0U2VsZWN0aW9uKQogICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRTZWxlY3Rpb24o&#xA;KS50b1N0cmluZygpOwoKICAgICAgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikKICAgICAgICByZXR1&#xA;cm4gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkudGV4dDsKICAgIH0KICAgIGNhdGNo&#xA;IChlKQogICAgewogICAgfQoKICAgIHJldHVybiAiIjsKICB9LAoKICAvLyBtYWtlIG5vdGUgb2Yg&#xA;bGVuZ3RoIG9mIHNlbGVjdGVkIHRleHQKICAvLyBhcyB0aGlzIGV2YWx1YXRlcyB0byB6ZXJvIGlu&#xA;IGNsaWNrIGV2ZW50CiAgbW91c2VfYnV0dG9uX3VwOiBmdW5jdGlvbiAoZSkgewogICAgdzNjX3Ns&#xA;aWR5LnNlbGVjdGVkX3RleHRfbGVuID0gdzNjX3NsaWR5LmdldF9zZWxlY3RlZF90ZXh0KCkubGVu&#xA;Z3RoOwogIH0sCgogIG1vdXNlX2J1dHRvbl9kb3duOiBmdW5jdGlvbiAoZSkgewogICAgdzNjX3Ns&#xA;aWR5LnNlbGVjdGVkX3RleHRfbGVuID0gdzNjX3NsaWR5LmdldF9zZWxlY3RlZF90ZXh0KCkubGVu&#xA;Z3RoOwogICAgdzNjX3NsaWR5Lm1vdXNlX3ggPSBlLmNsaWVudFg7CiAgICB3M2Nfc2xpZHkubW91&#xA;c2VfeSA9IGUuY2xpZW50WTsKICB9LAoKICAvLyByaWdodCBtb3VzZSBidXR0b24gY2xpY2sgaXMg&#xA;cmVzZXJ2ZWQgZm9yIGNvbnRleHQgbWVudXMKICAvLyBpdCBpcyBtb3JlIHJlbGlhYmxlIHRvIGRl&#xA;dGVjdCByaWdodGNsaWNrIHRoYW4gbGVmdGNsaWNrCiAgbW91c2VfYnV0dG9uX2NsaWNrOiBmdW5j&#xA;dGlvbiAoZSkgewogICAgaWYgKCFlKQogICAgICB2YXIgZSA9IHdpbmRvdy5ldmVudDsKCiAgICBp&#xA;ZiAoTWF0aC5hYnMoZS5jbGllbnRYIC13M2Nfc2xpZHkubW91c2VfeCkgKwogICAgICAgIE1hdGgu&#xA;YWJzKGUuY2xpZW50WSAtdzNjX3NsaWR5Lm1vdXNlX3kpID4gMTApCiAgICAgIHJldHVybiB0cnVl&#xA;OwoKICAgIGlmICh3M2Nfc2xpZHkuc2VsZWN0ZWRfdGV4dF9sZW4gPiAwKQogICAgICByZXR1cm4g&#xA;dHJ1ZTsKCiAgICB2YXIgcmlnaHRjbGljayA9IGZhbHNlOwogICAgdmFyIGxlZnRjbGljayA9IGZh&#xA;bHNlOwogICAgdmFyIG1pZGRsZWNsaWNrID0gZmFsc2U7CiAgICB2YXIgdGFyZ2V0OwoKICAgIGlm&#xA;ICghZSkKICAgICAgdmFyIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgaWYgKGUudGFyZ2V0KQogICAg&#xA;ICB0YXJnZXQgPSBlLnRhcmdldDsKICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkKICAgICAgdGFy&#xA;Z2V0ID0gZS5zcmNFbGVtZW50OwoKICAgIC8vIHdvcmsgYXJvdW5kIFNhZmFyaSBidWcKICAgIGlm&#xA;ICh0YXJnZXQubm9kZVR5cGUgPT0gMykKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7&#xA;CgogICAgaWYgKGUud2hpY2gpIC8vIGFsbCBicm93c2VycyBleGNlcHQgSUUKICAgIHsKICAgICAg&#xA;bGVmdGNsaWNrID0gKGUud2hpY2ggPT0gMSk7CiAgICAgIG1pZGRsZWNsaWNrID0gKGUud2hpY2gg&#xA;PT0gMik7CiAgICAgIHJpZ2h0Y2xpY2sgPSAoZS53aGljaCA9PSAzKTsKICAgIH0KICAgIGVsc2Ug&#xA;aWYgKGUuYnV0dG9uKQogICAgewogICAgICAvLyBLb25xdWVyb3IgZ2l2ZXMgMSBmb3IgbGVmdCwg&#xA;NCBmb3IgbWlkZGxlCiAgICAgIC8vIElFNiBnaXZlcyAwIGZvciBsZWZ0IGFuZCBub3QgMSBhcyBJ&#xA;IGV4cGVjdGVkCgogICAgICBpZiAoZS5idXR0b24gPT0gNCkKICAgICAgICBtaWRkbGVjbGljayA9&#xA;IHRydWU7CgogICAgICAvLyBhbGwgYnJvd3NlcnMgYWdyZWUgb24gMiBmb3IgcmlnaHQgYnV0dG9u&#xA;CiAgICAgIHJpZ2h0Y2xpY2sgPSAoZS5idXR0b24gPT0gMik7CiAgICB9CiAgICBlbHNlCiAgICAg&#xA;IGxlZnRjbGljayA9IHRydWU7CgogICAgaWYgKHczY19zbGlkeS5zZWxlY3RlZF90ZXh0X2xlbiA+&#xA;IDApCiAgICB7CiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOwogICAgICBlLmNh&#xA;bmNlbCA9IHRydWU7CiAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsKICAgICAgcmV0dXJuIGZh&#xA;bHNlOwogICAgfQoKICAgIC8vIGRpc21pc3MgdGFibGUgb2YgY29udGVudHMKICAgIHczY19zbGlk&#xA;eS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKGZhbHNlKTsKCiAgICAvLyBjaGVjayBpZiB0YXJnZXQg&#xA;aXMgc29tZXRoaW5nIHRoYXQgcHJvYmFibHkgd2FudCdzIGNsaWNrcwogICAgLy8gZS5nLiBhLCBl&#xA;bWJlZCwgb2JqZWN0LCBpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgb3B0aW9uCiAgICB2YXIgdGFn&#xA;ID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgogICAgaWYgKHczY19zbGlkeS5tb3Vz&#xA;ZV9jbGlja19lbmFibGVkICYmIGxlZnRjbGljayAmJgogICAgICAgICF3M2Nfc2xpZHkuc3BlY2lh&#xA;bF9lbGVtZW50KHRhcmdldCkgJiYKICAgICAgICAhdGFyZ2V0Lm9uY2xpY2spCiAgICB7CiAgICAg&#xA;IHczY19zbGlkeS5uZXh0X3NsaWRlKHRydWUpOwogICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdh&#xA;dGlvbihlKTsKICAgICAgZS5jYW5jZWwgPSB0cnVlOwogICAgICBlLnJldHVyblZhbHVlID0gZmFs&#xA;c2U7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICBz&#xA;cGVjaWFsX2VsZW1lbnQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAodGhpcy5oYXNfY2xh&#xA;c3MoZWxlbWVudCwgIm5vbi1pbnRlcmFjdGl2ZSIpKQogICAgICByZXR1cm4gZmFsc2U7CgogICAg&#xA;dmFyIHRhZyA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCiAgICByZXR1cm4gZWxl&#xA;bWVudC5vbmtleWRvd24gfHwKICAgICAgZWxlbWVudC5vbmNsaWNrIHx8CiAgICAgIHRhZyA9PSAi&#xA;YSIgfHwKICAgICAgdGFnID09ICJlbWJlZCIgfHwKICAgICAgdGFnID09ICJvYmplY3QiIHx8CiAg&#xA;ICAgIHRhZyA9PSAidmlkZW8iIHx8CiAgICAgIHRhZyA9PSAiYXVkaW8iIHx8CiAgICAgIHRhZyA9&#xA;PSAic3ZnIiB8fAogICAgICB0YWcgPT0gImNhbnZhcyIgfHwKICAgICAgdGFnID09ICJpbnB1dCIg&#xA;fHwKICAgICAgdGFnID09ICJ0ZXh0YXJlYSIgfHwKICAgICAgdGFnID09ICJzZWxlY3QiIHx8CiAg&#xA;ICAgIHRhZyA9PSAib3B0aW9uIjsKICB9LAoKICBzbGlkeV9jaHJvbWU6IGZ1bmN0aW9uIChlbCkg&#xA;ewogICAgd2hpbGUgKGVsKQogICAgewogICAgICBpZiAoZWwgPT0gdzNjX3NsaWR5LnRvYyB8fAog&#xA;ICAgICAgICAgZWwgPT0gdzNjX3NsaWR5LnRvb2xiYXIgfHwKICAgICAgICAgIHczY19zbGlkeS5o&#xA;YXNfY2xhc3MoZWwsICJvdXRsaW5lIikpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICBlbCA9&#xA;IGVsLnBhcmVudE5vZGU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIGdldF9rZXk6&#xA;IGZ1bmN0aW9uIChlKQogIHsKICAgIHZhciBrZXk7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9J&#xA;RSBkaWZmZXJlbmNlcyAKICAgIGlmICh0eXBlb2Ygd2luZG93LmV2ZW50ICE9ICJ1bmRlZmluZWQi&#xA;KQogICAgICBrZXkgPSB3aW5kb3cuZXZlbnQua2V5Q29kZTsKICAgIGVsc2UgaWYgKGUud2hpY2gp&#xA;CiAgICAgIGtleSA9IGUud2hpY2g7CgogICAgcmV0dXJuIGtleTsKICB9LAoKICBnZXRfdGFyZ2V0&#xA;OiBmdW5jdGlvbiAoZSkgewogICAgdmFyIHRhcmdldDsKCiAgICBpZiAoIWUpCiAgICAgIGUgPSB3&#xA;aW5kb3cuZXZlbnQ7CgogICAgaWYgKGUudGFyZ2V0KQogICAgICB0YXJnZXQgPSBlLnRhcmdldDsK&#xA;ICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkKICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoK&#xA;ICAgIGlmICh0YXJnZXQubm9kZVR5cGUgIT0gMSkKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVu&#xA;dE5vZGU7CgogICAgcmV0dXJuIHRhcmdldDsKICB9LAoKICAvLyBkb2VzIGRpc3BsYXkgcHJvcGVy&#xA;dHkgcHJvdmlkZSBjb3JyZWN0IGRlZmF1bHRzPwogIGlzX2Jsb2NrOiBmdW5jdGlvbiAoZWxlbSkg&#xA;ewogICAgdmFyIHRhZyA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCiAgICByZXR1cm4g&#xA;dGFnID09ICJvbCIgfHwgdGFnID09ICJ1bCIgfHwgdGFnID09ICJwIiB8fCAiZGwiIHx8CiAgICAg&#xA;ICAgICAgdGFnID09ICJsaSIgfHwgdGFnID09ICJ0YWJsZSIgfHwgdGFnID09ICJwcmUiIHx8CiAg&#xA;ICAgICAgICAgdGFnID09ICJoMSIgfHwgdGFnID09ICJoMiIgfHwgdGFnID09ICJoMyIgfHwKICAg&#xA;ICAgICAgICB0YWcgPT0gImg0IiB8fCB0YWcgPT0gImg1IiB8fCB0YWcgPT0gImg2IiB8fAogICAg&#xA;ICAgICAgIHRhZyA9PSAiYmxvY2txdW90ZSIgfHwgdGFnID09ICJhZGRyZXNzIjsgCiAgfSwKCiAg&#xA;YWRkX2xpc3RlbmVyOiBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIpIHsKICAgIGlm&#xA;ICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikKICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVy&#xA;KGV2ZW50LCBoYW5kbGVyLCBmYWxzZSk7CiAgICBlbHNlCiAgICAgIGVsZW1lbnQuYXR0YWNoRXZl&#xA;bnQoIm9uIitldmVudCwgaGFuZGxlcik7CiAgfSwKCiAgLy8gdXNlZCB0byBwcmV2ZW50IGV2ZW50&#xA;IHByb3BhZ2F0aW9uIGZyb20gZmllbGQgY29udHJvbHMKICBzdG9wX3Byb3BhZ2F0aW9uOiBmdW5j&#xA;dGlvbiAoZXZlbnQpIHsKICAgIGV2ZW50ID0gZXZlbnQgPyBldmVudCA6IHdpbmRvdy5ldmVudDsK&#xA;ICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7ICAvLyBmb3IgSUUKCiAgICBpZiAoZXZlbnQu&#xA;c3RvcFByb3BhZ2F0aW9uKQogICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKCiAgICByZXR1&#xA;cm4gdHJ1ZTsKICB9LAoKICBjYW5jZWw6IGZ1bmN0aW9uIChldmVudCkgewogICAgaWYgKGV2ZW50&#xA;KQogICAgewogICAgICAgZXZlbnQuY2FuY2VsID0gdHJ1ZTsKICAgICAgIGV2ZW50LnJldHVyblZh&#xA;bHVlID0gZmFsc2U7CgogICAgICBpZiAoZXZlbnQucHJldmVudERlZmF1bHQpCiAgICAgICAgZXZl&#xA;bnQucHJldmVudERlZmF1bHQoKTsKICAgIH0KCiAgICB3M2Nfc2xpZHkua2V5X3dhbnRlZCA9IGZh&#xA;bHNlOwogICAgcmV0dXJuIGZhbHNlOwogIH0sCgovLyBmb3IgZWFjaCBsYW5ndWFnZSBkZWZpbmUg&#xA;YW4gYXNzb2NpYXRpdmUgYXJyYXkKLy8gYW5kIGFsc28gdGhlIGhlbHAgdGV4dCB3aGljaCBpcyBs&#xA;b25nZXIKCiAgc3RyaW5nc19lczogewogICAgInNsaWRlIjoicMOhZy4iLAogICAgImhlbHA/Ijoi&#xA;QXl1ZGEiLAogICAgImNvbnRlbnRzPyI6IsONbmRpY2UiLAogICAgInRhYmxlIG9mIGNvbnRlbnRz&#xA;IjoidGFibGEgZGUgY29udGVuaWRvcyIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJUYWJsYSBk&#xA;ZSBDb250ZW5pZG9zIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IlJlaW5pY2lhciBwcmVz&#xA;ZW50YWNpw7NuIiwKICAgICJyZXN0YXJ0PyI6IkluaWNpbyIKICB9LAogIGhlbHBfZXM6CiAgICAi&#xA;VXRpbGljZSBlbCByYXTDs24sIGJhcnJhIGVzcGFjaWFkb3JhLCB0ZWNsYXMgSXpkYS9EY2hhLCAi&#xA;ICsKICAgICJvIFJlIHDDoWcgeSBBdiBww6FnLiBVc2UgUyB5IEIgcGFyYSBjYW1iaWFyIGVsIHRh&#xA;bWHDsW8gZGUgZnVlbnRlLiIsCgogIHN0cmluZ3NfY2E6IHsKICAgICJzbGlkZSI6InDDoGcuLiIs&#xA;CiAgICAiaGVscD8iOiJBanVkYSIsCiAgICAiY29udGVudHM/Ijoiw41uZGV4IiwKICAgICJ0YWJs&#xA;ZSBvZiBjb250ZW50cyI6InRhdWxhIGRlIGNvbnRpbmd1dHMiLAogICAgIlRhYmxlIG9mIENvbnRl&#xA;bnRzIjoiVGF1bGEgZGUgQ29udGluZ3V0cyIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJS&#xA;ZWluaWNpYXIgcHJlc2VudGFjacOzIiwKICAgICJyZXN0YXJ0PyI6IkluaWNpIgogIH0sCiAgaGVs&#xA;cF9jYToKICAgICJVdGlsaXR6aSBlbCByYXRvbMOtLCBiYXJyYSBlc3BhaWFkb3JhLCB0ZWNsZXMg&#xA;RXNxLi9EdGEuICIgKwogICAgIm8gUmUgcMOgZyB5IEF2IHDDoGcuIFVzaSBTIGkgQiBwZXIgY2Fu&#xA;dmlhciBncmFuZMOgcmlhIGRlIGZvbnQuIiwKCiAgc3RyaW5nc19jczogewogICAgInNsaWRlIjoi&#xA;c27DrW1layIsCiAgICAiaGVscD8iOiJuw6Fwb3bEm2RhIiwKICAgICJjb250ZW50cz8iOiJvYnNh&#xA;aCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJvYnNhaCBwcmV6ZW50YWNlIiwKICAgICJUYWJs&#xA;ZSBvZiBDb250ZW50cyI6Ik9ic2FoIHByZXplbnRhY2UiLAogICAgInJlc3RhcnQgcHJlc2VudGF0&#xA;aW9uIjoiem5vdnUgc3B1c3RpdCBwcmV6ZW50YWNpIiwKICAgICJyZXN0YXJ0PyI6InJlc3RhcnQi&#xA;CiAgfSwKICBoZWxwX2NzOgogICAgIlByZXplbnRhY2kgbcWvxb5ldGUgcHJvY2jDoXpldCBwb21v&#xA;Y8OtIGtsaWtudXTDrSBtecWhaSwgbWV6ZXJuw61rdSwgIiArCiAgICAixaFpcGVrIHZsZXZvIGEg&#xA;dnByYXZvIG5lYm8ga2zDoXZlcyBQYWdlVXAgYSBQYWdlRG93bi4gUMOtc21vIHNlICIgKwogICAg&#xA;ImTDoSB6dsSbdMWhaXQgYSB6bWVuxaFpdCBwb21vY8OtIGtsw6F2ZXMgQiBhIFMuIiwKCiAgc3Ry&#xA;aW5nc19ubDogewogICAgInNsaWRlIjoicGFnaW5hIiwKICAgICJoZWxwPyI6IkhlbHA/IiwKICAg&#xA;ICJjb250ZW50cz8iOiJJbmhvdWQ/IiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6ImluaG91ZHNv&#xA;cGdhdmUiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiSW5ob3Vkc29wZ2F2ZSIsCiAgICAicmVz&#xA;dGFydCBwcmVzZW50YXRpb24iOiJoZXJzdGFydCBwcmVzZW50YXRpZSIsCiAgICAicmVzdGFydD8i&#xA;OiJIZXJzdGFydD8iCiAgfSwKICBoZWxwX25sOgogICAgICJOYXZpZ2VlciBkLm0udi4gaGV0IG11&#xA;aXMsIHNwYXRpZWJhciwgTGlua3MvUmVjaHRzIHRvZXRzZW4sICIgKwogICAgICJvZiBQZ1VwIGVu&#xA;IFBnRG4uIEdlYnJ1aWsgUyBlbiBCIG9tIGRlIGthcmFrdGVyZ3Jvb3R0ZSB0ZSB2ZXJhbmRlcmVu&#xA;LiIsCgogIHN0cmluZ3NfZGU6IHsKICAgICJzbGlkZSI6IlNlaXRlIiwKICAgICJoZWxwPyI6Ikhp&#xA;bGZlIiwKICAgICJjb250ZW50cz8iOiLDnGJlcnNpY2h0IiwKICAgICJ0YWJsZSBvZiBjb250ZW50&#xA;cyI6IkluaGFsdHN2ZXJ6ZWljaG5pcyIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJJbmhhbHRz&#xA;dmVyemVpY2huaXMiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUHLDpHNlbnRhdGlvbiBu&#xA;ZXUgc3RhcnRlbiIsCiAgICAicmVzdGFydD8iOiJOZXVzdGFydCIKICB9LAogIGhlbHBfZGU6CiAg&#xA;ICAiQmVudXR6ZW4gU2llIGRpZSBNYXVzLCBMZWVyc2NobGFnLCBkaWUgQ3Vyc29ydGFzdGVuIGxp&#xA;bmtzL3JlY2h0cyBvZGVyICIgKwogICAgIlBhZ2UgdXAvUGFnZSBEb3duIHp1bSBXZWNoc2VsbiBk&#xA;ZXIgU2VpdGVuIHVuZCBTIHVuZCBCIGbDvHIgZGllIFNjaHJpZnRncsO2c3NlLiIsCgogIHN0cmlu&#xA;Z3NfcGw6IHsKICAgICJzbGlkZSI6InNsYWpkIiwKICAgICJoZWxwPyI6InBvbW9jPyIsCiAgICAi&#xA;Y29udGVudHM/Ijoic3BpcyB0cmXFm2NpPyIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJzcGlz&#xA;IHRyZcWbY2kiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiU3BpcyBUcmXFm2NpIiwKICAgICJy&#xA;ZXN0YXJ0IHByZXNlbnRhdGlvbiI6IlJlc3RhcnR1aiBwcmV6ZW50YWNqxJkiLAogICAgInJlc3Rh&#xA;cnQ/IjoicmVzdGFydD8iCiAgfSwKICBoZWxwX3BsOgogICAgIlptaWVuaWFqIHNsYWpkeSBrbGlr&#xA;YWrEhWMgbXlzesSFLCBuYWNpc2thasSFYyBzcGFjasSZLCBzdHJ6YcWCa2kgbGV3by9wcmF3byIg&#xA;KwogICAgImx1YiBQZ1VwIC8gUGdEbi4gVcW8eWoga2xhd2lzenkgUyBpIEIsIGFieSB6bWllbmnE&#xA;hyByb3ptaWFyIGN6Y3ppb25raS4iLAoKICBzdHJpbmdzX2ZyOiB7CiAgICAic2xpZGUiOiJwYWdl&#xA;IiwKICAgICJoZWxwPyI6IkFpZGUiLAogICAgImNvbnRlbnRzPyI6IkluZGV4IiwKICAgICJ0YWJs&#xA;ZSBvZiBjb250ZW50cyI6InRhYmxlIGRlcyBtYXRpw6hyZXMiLAogICAgIlRhYmxlIG9mIENvbnRl&#xA;bnRzIjoiVGFibGUgZGVzIG1hdGnDqHJlcyIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJS&#xA;ZWNvbW1lbmNlciBsJ2V4cG9zw6kiLAogICAgInJlc3RhcnQ/IjoiRMOpYnV0IgogIH0sCiAgaGVs&#xA;cF9mcjoKICAgICJOYXZpZ3VleiBhdmVjIGxhIHNvdXJpcywgbGEgYmFycmUgZCdlc3BhY2UsIGxl&#xA;cyBmbMOoY2hlcyAiICsKICAgICJnYXVjaGUvZHJvaXRlIG91IGxlcyB0b3VjaGVzIFBnIFVwLCBQ&#xA;ZyBEbi4gVXRpbGlzZXogIiArCiAgICAibGVzIHRvdWNoZXMgUyBldCBCIHBvdXIgbW9kaWZpZXIg&#xA;bGEgdGFpbGxlIGRlIGxhIHBvbGljZS4iLAoKICBzdHJpbmdzX2h1OiB7CiAgICAic2xpZGUiOiJv&#xA;bGRhbCIsCiAgICAiaGVscD8iOiJzZWfDrXRzw6lnIiwKICAgICJjb250ZW50cz8iOiJ0YXJ0YWxv&#xA;bSIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJ0YXJ0YWxvbWplZ3l6w6lrIiwKICAgICJUYWJs&#xA;ZSBvZiBDb250ZW50cyI6IlRhcnRhbG9tamVneXrDqWsiLAogICAgInJlc3RhcnQgcHJlc2VudGF0&#xA;aW9uIjoiYmVtdXRhdMOzIMO6anJhaW5kw610w6FzYSIsCiAgICAicmVzdGFydD8iOiLDumpyYWlu&#xA;ZMOtdMOhcyIKICB9LAogIGhlbHBfaHU6CiAgICAiQXogb2xkYWxhayBrw7Z6dGkgbMOpcGtlZMOp&#xA;c2hleiBrYXR0aW50c29uIGF6IGVnw6lycmVsLCB2YWd5ICIgKwogICAgImhhc3puw6FsamEgYSBz&#xA;esOza8O2eiwgYSBiYWwsIHZhZ3kgYSBqb2JiIG55w61sLCBpbGxldHZlIGEgUGFnZSBEb3duLCAi&#xA;ICsKICAgICJQYWdlIFVwIGJpbGxlbnR5xbFrZXQuIEF6IFMgw6lzIGEgQiBiaWxsZW50ecWxa2tl&#xA;bCB2w6FsdG96dGF0aGF0amEgIiArCiAgICAiYSBzesO2dmVnIG3DqXJldMOpdC4iLAoKICBzdHJp&#xA;bmdzX2l0OiB7CiAgICAic2xpZGUiOiJwYWcuIiwKICAgICJoZWxwPyI6IkFpdXRvIiwKICAgICJj&#xA;b250ZW50cz8iOiJJbmRpY2UiLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoiaW5kaWNlIiwKICAg&#xA;ICJUYWJsZSBvZiBDb250ZW50cyI6IkluZGljZSIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24i&#xA;OiJSaWNvbWluY2lhcmUgbGEgcHJlc2VudGF6aW9uZSIsCiAgICAicmVzdGFydD8iOiJJbml6aW8i&#xA;CiAgfSwKICBoZWxwX2l0OgogICAgIk5hdmlnYXJlIGNvbiBtb3VzZSwgYmFycmEgc3BhemlvLCBm&#xA;cmVjY2Ugc2luaXN0cmEvZGVzdHJhIG8gIiArCiAgICAiUGdVcCBlIFBnRG4uIFVzYXJlIFMgZSBC&#xA;IHBlciBjYW1iaWFyZSBsYSBkaW1lbnNpb25lIGRlaSBjYXJhdHRlcmkuIiwKCiAgc3RyaW5nc19l&#xA;bDogewogICAgInNsaWRlIjoiz4POtc67zq/OtM6xIiwKICAgICJoZWxwPyI6Is6yzr/Ors64zrXO&#xA;uc6xOyIsCiAgICAiY29udGVudHM/Ijoiz4DOtc+BzrnOtc+Hz4zOvM61zr3OsTsiLAogICAgInRh&#xA;YmxlIG9mIGNvbnRlbnRzIjoiz4DOr869zrHOus6xz4Igz4DOtc+BzrnOtc+Hzr/OvM6tzr3Pic69&#xA;IiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6Is6gzq/Ovc6xzrrOsc+CIM6gzrXPgc65zrXPh86/&#xA;zrzOrc69z4nOvSIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiLOtc+AzrHOvc61zrrOus6v&#xA;zr3Ot8+Dzrcgz4DOsc+Bzr/Phc+Dzq/Osc+DzrfPgiIsCiAgICAicmVzdGFydD8iOiLOtc+AzrHO&#xA;vc61zrrOus6vzr3Ot8+Dzrc7IgogIH0sCiAgaGVscF9lbDoKICAgICLOoM67zr/Ot86zzrfOuM61&#xA;zq/PhM61IM68zrUgz4TOvyDOus67zq/OuiDPhM6/z4Ugz4DOv869z4TOuc66zrnOv8+NLCDPhM6/&#xA;IHNwYWNlLCDPhM6xIM6yzq3Ou863IM6xz4HOuc+Dz4TOtc+BzqwvzrTOtc6+zrnOrCwgIiArCiAg&#xA;ICAizq4gUGFnZSBVcCDOus6xzrkgUGFnZSBEb3duLiDOp8+BzrfPg865zrzOv8+Azr/Ouc6uz4PP&#xA;hM61IM+EzrEgz4DOu86uzrrPhM+BzrEgUyDOus6xzrkgQiDOs865zrEgzr3OsSDOsc67zrvOrM6+&#xA;zrXPhM61ICIgKwogICAgIs+Ezr8gzrzOrc6zzrXOuM6/z4Igz4TOt8+CIM6zz4HOsc68zrzOsc+E&#xA;zr/Pg861zrnPgc6sz4IuIiwKCiAgc3RyaW5nc19qYTogewogICAgInNsaWRlIjoi44K544Op44Kk&#xA;44OJIiwKICAgICJoZWxwPyI6IuODmOODq+ODlyIsCiAgICAiY29udGVudHM/Ijoi55uu5qyhIiwK&#xA;ICAgICJ0YWJsZSBvZiBjb250ZW50cyI6IuebruasoeOCkuihqOekuiIsCiAgICAiVGFibGUgb2Yg&#xA;Q29udGVudHMiOiLnm67mrKEiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoi5pyA5Yid44GL&#xA;44KJ5YaN55SfIiwKICAgICJyZXN0YXJ0PyI6IuacgOWIneOBi+OCiSIKICB9LAogIGhlbHBfamE6&#xA;CiAgICAgIuODnuOCpuOCueW3puOCr+ODquODg+OCryDjg7sg44K544Oa44O844K5IOODuyDlt6bl&#xA;j7Pjgq3jg7wgIiArCiAgICAgIuOBvuOBn+OBryBQYWdlIFVwIOODuyBQYWdlIERvd27jgafmk43k&#xA;vZzvvIwgUyDjg7sgQuOBp+ODleOCqeODs+ODiOOCteOCpOOCuuWkieabtCIsCgogIHN0cmluZ3Nf&#xA;emg6IHsKICAgICJzbGlkZSI6IuW5u+eBr+eJhyIsCiAgICAiaGVscD8iOiLluK7liqk/IiwKICAg&#xA;ICJjb250ZW50cz8iOiLlhoXlrrk/IiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6IuebruW9lSIs&#xA;CiAgICAiVGFibGUgb2YgQ29udGVudHMiOiLnm67lvZUiLAogICAgInJlc3RhcnQgcHJlc2VudGF0&#xA;aW9uIjoi6YeN5paw5ZCv5Yqo5bGV56S6IiwKICAgICJyZXN0YXJ0PyI6IumHjeaWsOWQr+WKqD8i&#xA;CiAgfSwKICBoZWxwX3poOgogICAgIueUqOm8oOagh+eCueWHuywg56m65qC85p2hLCDlt6blj7Pn&#xA;rq3lpLQsIFBnIFVwIOWSjCBQZyBEbiDlr7zoiKouICIgKwogICAgIueUqCBTLCBCIOaUueWPmOWt&#xA;l+S9k+Wkp+Wwjy4iLAoKICBzdHJpbmdzX3J1OiB7CiAgICAic2xpZGUiOiLRgdC70LDQudC0IiwK&#xA;ICAgICJoZWxwPyI6ItC/0L7QvNC+0YnRjD8iLAogICAgImNvbnRlbnRzPyI6ItGB0L7QtNC10YDQ&#xA;ttCw0L3QuNC1PyIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiLQvtCz0LvQsNCy0LvQtdC90LjQ&#xA;tSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiLQntCz0LvQsNCy0LvQtdC90LjQtSIsCiAgICAi&#xA;cmVzdGFydCBwcmVzZW50YXRpb24iOiLQv9C10YDQtdC30LDQv9GD0YHRgtC40YLRjCDQv9GA0LXQ&#xA;t9C10L3RgtCw0YbQuNGOIiwKICAgICJyZXN0YXJ0PyI6ItC/0LXRgNC10LfQsNC/0YPRgdC6PyIK&#xA;ICB9LAogIGhlbHBfcnU6CiAgICAi0J/QtdGA0LXQvNC10YnQsNC50YLQtdGB0Ywg0LrQu9C40LrQ&#xA;sNGPINC80YvRiNC60L7QuSwg0LjRgdC/0L7Qu9GM0LfRg9GPINC60LvQsNCy0LjRiNGDINC/0YDQ&#xA;vtCx0LXQuywg0YHRgtGA0LXQu9C60LgiICsKICAgICLQstC70LXQstC+L9Cy0L/RgNCw0LLQviDQ&#xA;uNC70LggUGcgVXAg0LggUGcgRG4uINCa0LvQsNCy0LjRiNC4IFMg0LggQiDQvNC10L3Rj9GO0YIg&#xA;0YDQsNC30LzQtdGAINGI0YDQuNGE0YLQsC4iLAoKICBzdHJpbmdzX3N2OiB7CiAgICAic2xpZGUi&#xA;OiJzaWRhIiwKICAgICJoZWxwPyI6Imhqw6RscCIsCiAgICAiY29udGVudHM/IjoiaW5uZWjDpWxs&#xA;IiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6ImlubmVow6VsbHNmw7ZydGVja25pbmciLAogICAg&#xA;IlRhYmxlIG9mIENvbnRlbnRzIjoiSW5uZWjDpWxsc2bDtnJ0ZWNrbmluZyIsCiAgICAicmVzdGFy&#xA;dCBwcmVzZW50YXRpb24iOiJ2aXNhIHByZXNlbnRhdGlvbmVuIGZyw6VuIGLDtnJqYW4iLAogICAg&#xA;InJlc3RhcnQ/IjoiYsO2cmphIG9tIgogIH0sCiAgaGVscF9zdjoKICAgICJCbMOkZGRyYSBtZWQg&#xA;ZXR0IGtsaWNrIG1lZCB2w6Ruc3RyYSBtdXNrbmFwcGVuLCBtZWxsYW5zbGFnc3RhbmdlbnRlbiwg&#xA;IiArCiAgICAidsOkbnN0ZXItIG9jaCBow7ZnZXJwaWx0YW5nZW50ZXJuYSBlbGxlciB0YW5nZW50&#xA;ZXJuYSBQZyBVcCwgUGcgRG4uICIgKwogICAgIkFudsOkbmQgdGFuZ2VudGVybmEgUyBvY2ggQiBm&#xA;w7ZyIGF0dCDDpG5kcmEgdGV4dGVucyBzdG9ybGVrLiIsCgogIHN0cmluZ3M6IHsgfSwKCiAgbG9j&#xA;YWxpemU6IGZ1bmN0aW9uIChzcmMpIHsKICAgIGlmIChzcmMgPT0gIiIpCiAgICAgIHJldHVybiBz&#xA;cmM7CgogICAgIC8vIHRyeSBmdWxsIGxhbmd1YWdlIGNvZGUsIGUuZy4gZW4tVVMKICAgICB2YXIg&#xA;cywgbG9va3VwID0gdzNjX3NsaWR5LnN0cmluZ3NbdzNjX3NsaWR5LmxhbmddOwoKICAgICBpZiAo&#xA;bG9va3VwKQogICAgIHsKICAgICAgIHMgPSBsb29rdXBbc3JjXTsKCiAgICAgICBpZiAocykKICAg&#xA;ICAgICByZXR1cm4gczsKICAgICB9CgogICAgIC8vIHN0cmlwIGNvdW50cnkgY29kZSBzdWZmaXgs&#xA;IGUuZy4KICAgICAvLyB0cnkgZW4gaWYgdW5kZWZpbmVkIGZvciBlbi1VUwogICAgIHZhciBsZyA9&#xA;IHczY19zbGlkeS5sYW5nLnNwbGl0KCItIik7CgogICAgIGlmIChsZy5sZW5ndGggPiAxKQogICAg&#xA;IHsKICAgICAgIGxvb2t1cCA9IHczY19zbGlkeS5zdHJpbmdzW2xnWzBdXTsKCiAgICAgICBpZiAo&#xA;bG9va3VwKQogICAgICAgewogICAgICAgICBzID0gbG9va3VwW3NyY107CgogICAgICAgICBpZiAo&#xA;cykKICAgICAgICAgIHJldHVybiBzOwogICAgICAgfQogICAgIH0KCiAgICAgLy8gb3RoZXJ3aXNl&#xA;IHN0cmluZyBhcyBpcwogICAgIHJldHVybiBzcmM7CiAgfSwKCiAgaW5pdF9sb2NhbGl6YXRpb246&#xA;IGZ1bmN0aW9uICgpIHsKICAgIHZhciBpMThuID0gdzNjX3NsaWR5OwogICAgdmFyIGhlbHBfdGV4&#xA;dCA9IHczY19zbGlkeS5oZWxwX3RleHQ7CgogICAgLy8gZWFjaCBzdWNoIGxhbmd1YWdlIGFycmF5&#xA;IGlzIGRlY2xhcmVkIGluIHRoZSBsb2NhbGl6ZSBhcnJheQogICAgLy8gdGhpcyBpcyB1c2VkIGFz&#xA;IGluICB3M2Nfc2xpZHkubG9jYWxpemUoImZvbyIpOwogICAgdGhpcy5zdHJpbmdzID0gewogICAg&#xA;ICAiZXMiOnRoaXMuc3RyaW5nc19lcywKICAgICAgImNhIjp0aGlzLnN0cmluZ3NfY2EsCiAgICAg&#xA;ICJjcyI6dGhpcy5zdHJpbmdzX2NzLAogICAgICAibmwiOnRoaXMuc3RyaW5nc19ubCwKICAgICAg&#xA;ImRlIjp0aGlzLnN0cmluZ3NfZGUsCiAgICAgICJwbCI6dGhpcy5zdHJpbmdzX3BsLAogICAgICAi&#xA;ZnIiOnRoaXMuc3RyaW5nc19mciwKICAgICAgImh1Ijp0aGlzLnN0cmluZ3NfaHUsCiAgICAgICJp&#xA;dCI6dGhpcy5zdHJpbmdzX2l0LAogICAgICAiZWwiOnRoaXMuc3RyaW5nc19lbCwKICAgICAgImpw&#xA;Ijp0aGlzLnN0cmluZ3NfamEsCiAgICAgICJ6aCI6dGhpcy5zdHJpbmdzX3poLAogICAgICAicnUi&#xA;OnRoaXMuc3RyaW5nc19ydSwKICAgICAgInN2Ijp0aGlzLnN0cmluZ3Nfc3YKICAgIH0sCgogICAg&#xA;aTE4bi5zdHJpbmdzX2VzW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfZXM7CiAgICBpMThuLnN0cmlu&#xA;Z3NfY2FbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9jYTsKICAgIGkxOG4uc3RyaW5nc19jc1toZWxw&#xA;X3RleHRdID0gaTE4bi5oZWxwX2NzOwogICAgaTE4bi5zdHJpbmdzX25sW2hlbHBfdGV4dF0gPSBp&#xA;MThuLmhlbHBfbmw7CiAgICBpMThuLnN0cmluZ3NfZGVbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9k&#xA;ZTsKICAgIGkxOG4uc3RyaW5nc19wbFtoZWxwX3RleHRdID0gaTE4bi5oZWxwX3BsOwogICAgaTE4&#xA;bi5zdHJpbmdzX2ZyW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfZnI7CiAgICBpMThuLnN0cmluZ3Nf&#xA;aHVbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9odTsKICAgIGkxOG4uc3RyaW5nc19pdFtoZWxwX3Rl&#xA;eHRdID0gaTE4bi5oZWxwX2l0OwogICAgaTE4bi5zdHJpbmdzX2VsW2hlbHBfdGV4dF0gPSBpMThu&#xA;LmhlbHBfZWw7CiAgICBpMThuLnN0cmluZ3NfamFbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9qYTsK&#xA;ICAgIGkxOG4uc3RyaW5nc196aFtoZWxwX3RleHRdID0gaTE4bi5oZWxwX3poOwogICAgaTE4bi5z&#xA;dHJpbmdzX3J1W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfcnU7CiAgICBpMThuLnN0cmluZ3Nfc3Zb&#xA;aGVscF90ZXh0XSA9IGkxOG4uaGVscF9zdjsKCiAgICB3M2Nfc2xpZHkubGFuZyA9IGRvY3VtZW50&#xA;LmJvZHkucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoImxhbmciKTsKCiAgICBpZiAoIXczY19zbGlk&#xA;eS5sYW5nKQogICAgICB3M2Nfc2xpZHkubGFuZyA9IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5n&#xA;ZXRBdHRyaWJ1dGUoInhtbDpsYW5nIik7CgogICAgaWYgKCF3M2Nfc2xpZHkubGFuZykKICAgICAg&#xA;dzNjX3NsaWR5LmxhbmcgPSAiZW4iOwogIH0KfTsKCi8vIGhhY2sgZm9yIGJhY2sgYnV0dG9uIGJl&#xA;aGF2aW9yCmlmICh3M2Nfc2xpZHkuaWU2IHx8IHczY19zbGlkeS5pZTcpCnsKICBkb2N1bWVudC53&#xA;cml0ZSgiPGlmcmFtZSBpZD0naGlzdG9yeUZyYW1lJyAiICsKICAic3JjPSdqYXZhc2NyaXB0Olwi&#xA;PGh0bWwiKyI+PC8iKyJodG1sPlwiJyAiICsKICAiaGVpZ2h0PScxJyB3aWR0aD0nMScgIiArCiAg&#xA;InN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi04MDBweCc+PC9pZnJhbWU+Iik7Cn0KCi8v&#xA;IGF0dGFjaCBldmVudCBsaXN0ZW5lcnMgZm9yIGluaXRpYWxpemF0aW9uCnczY19zbGlkeS5zZXRf&#xA;dXAoKTsKCi8vIGhpZGUgdGhlIHNsaWRlcyBhcyBzb29uIGFzIGJvZHkgZWxlbWVudCBpcyBhdmFp&#xA;bGFibGUKLy8gdG8gcmVkdWNlIGFubm95aW5nIHNjcmVlbiBtZXNzIGJlZm9yZSB0aGUgb25sb2Fk&#xA;IGV2ZW50CnNldFRpbWVvdXQodzNjX3NsaWR5LmhpZGVfc2xpZGVzLCA1MCk7Cgo=&#xA;"/>
      <script type="text/javascript">w3c_slidy.mouse_click_enabled = false;</script>
      <style type="text/css">
.slide .two-column pre {
   width: 42%;
   margin-left: 0.25em;
}
      </style>
   </head>
   <body>
      <div class="background">
         <header><img class="logo" src="data:image/png;base64,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&#xA;RupHrUfPjPmM3Xqx9MXwy4yX0+OFvyn+tveV0auffnf7vWdiycTwa9HrmT9K3qi+OfrW9m3nZOjk&#xA;03dp76anit6rvj/2gf2h+2P0x5Hp7E/4T5WfjT93fAn88ngmbWbm3/eE8/syOll+AAAACXBIWXMA&#xA;AAsTAAALEwEAmpwYAAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxu&#xA;czp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJE&#xA;RiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMi&#xA;PgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0&#xA;aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXBy&#xA;ZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50&#xA;ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICAgICA8&#xA;dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlw&#xA;dGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KOXS2agAAE+lJREFUaAW1mnmMXVd9x793&#xA;ee/Nm8VLvMSOkzhxIHGggTiQvU4gIhUFuqRNKQhaVFYVqlaV+h+qRBdAoqiiUlFbFSHSUmhL2qZs&#xA;UaqEJmQBkpgsZLNJHC8TbOwZj2d96723n+95c82z45nndNpjv3n33eWc7/n9vr/l/M6NCpqWbXNc&#xA;HdJMnupr3/+J7n5iXIeOtLRqSNpx6bl657UX6pKzpDTpqp1HqsZdiS67Wcq5VIqW7XzZi9EgcHnR&#xA;Vjuq6q++dUBfuOf7mmt0GXitavVcSWNa28+u6sO3vFlvv2KdhoqOchUqAJkkRgW4FbSBT8eq6vEX&#xA;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&#xA;KGLmLces/wH31t+jPGZbeAAAAABJRU5ErkJggg==&#xA;"/></header>
         <footer>
            <p><a href="http://ischool.berkeley.edu/" target="new">Data Science 205: Storing and Retrieving Data; School of Information, UC Berkeley</a></p>
         </footer>
      </div>
      <div class="slide cover title">
         <hgroup>
            <h1>Sentiment Analysis with NLTK</h1>
         </hgroup>
         <div class="author">
            <p><a href="http://www.milowski.com/" rel="name">R. Alexander Miłowski</a></p>
            <p><a href="mailto:milowski@ischool.berkeley.edu" rel="email">milowski@ischool.berkeley.edu</a></p>
            <p>School of Information, UC Berkeley</p>
         </div>
      </div>
      <div class="slide">
         <h1>What is Sentiment Analysis</h1>
         <blockquote><p>The use of natural language processing, text analysis and computational linguistics to identify and extract subjective information in source materials. <a href="http://en.wikipedia.org/wiki/Sentiment_analysis" target="def">(wikipedia)</a></p></blockquote>
         <p>Essentially, we're:</p>
         <ul>
            <li>classifiying</li>
            <li>passages of text</li>
            <li>and assigning them labels</li>
            <li>based on exemplars</li>
            <li>associated with the labels.</li>
         </ul>
         <p>Typical models: Latent semantic analysis (LSA), Support Vector Machines (SVM), <q>Bag of Words</q> via Bayesian probabilities, ...</p>
         <p>Note: Classification does not have to be boolean but can also be a set of more than two labels.</p>
      </div>
      <div class="slide">
         <h1>Using NTLK for Sentiment Analysis</h1>
         <ol>
            <li>Select representative samples of your labels</li>
            <li>Tokenize these samples into <q>significant</q> words</li>
            <li>Create a frequency distribution from this set of words.</li>
            <li>Annotate your samples with the frequency and labels to construct a training set.</li>
            <li>Train your classifier on your representative samples.</li>
            <li>Apply your classifier to new input to assign labels.</li>
         </ol>
      </div>
      <div class="slide">
         <h1>Install NLTK</h1>
         <pre>
pip install nltk
python -m nltk.downloader all
         </pre>
         <p>Or for everyone (e.g. Mac OS X / Linux):</p>
         <pre>
sudo pip install nltk
sudo python -m nltk.downloader -d /usr/share/nltk_data all
         </pre>
      </div>
      <div class="slide">
         <h1>Example: Candy Corn - love it or hate it!</h1>
         <div class="two-column">
         <pre>
negativeTweets = [ 
("We're all aware by now that Candy corn is evil","nasty"),
("Candy corn is so bad for you","nasty"),
("If you eat candy corn... I guess you would eat crayons, candles and ear wax too","nasty"),
("Candy corn is nasty","nasty"),
("Never not horrified by candy corn.","nasty")
]            
         </pre>
            <pre>
positiveTweets = [
("I'm craving candy corn","best"),
("I still love candy corn","best"),
("Yes, I tweet candy corn and not broccoli. You know why? Because candy corn is more exciting.","best"),
("Autumn candy corn. So sweet; so good; so sticky. I taste no regrets.","best"),
("I love candy corn","best"),
("Candy corn is good","best")
]               
            </pre>
         </div>
      </div>
      <div class="slide">
         <h1>Turn Sentences into Words</h1>
         <pre>
# words we will exclude
stopWords = [ "candy", "corn", "and", "not", "the", "...", "'re"]

# process the tweets into a training set of words
tweets = []
for (tweet, sentiment) in positiveTweets + negativeTweets:
    words = [e.lower() for e in nltk.word_tokenize(tweet) if len(e) &gt;= 3 and not e.lower() in stopWords]
    tweets.append((words, sentiment))            
         </pre>
      </div>
      <div class="slide">
         <h1>Create a Frequency Distribution</h1>
         <pre>
def getAllWords(tweets):
    all = []
    for (words, sentiment) in tweets:
      all.extend(words)
    return all
    
wordlist = nltk.FreqDist(getAllWords(tweets))
wordFeatures = wordlist.keys()            
         </pre>
      </div>
      <div class="slide">
         <h1>Create a Training Set</h1>
         <pre>
def extractFeatures(document):
    words = set(document)
    features = {}
    for word in wordFeatures:
        features['contains(%s)' % word] = (word in words)
    return features
    
trainingSet = nltk.classify.apply_features(extractFeatures, tweets)            
         </pre>
      </div>
      <div class="slide">
         <h1>Train the Classifier</h1>
         <p>The classifier uses the input training data (inputs, their features, and their labels) to build a Naive Bayes classifier that assumes independence between features.</p>
         <pre>
         classifier = nltk.NaiveBayesClassifier.train(trainingSet)
         </pre>
         <p>You can now call <code>classify(features)</code> on any data once you've extracted its features (e.g., word counts).</p>
      </div>
      <div class="slide">
         <h1>Classify your data</h1>
         <pre>
tests = [
"Now's as good a time as any to remind you candy corn is the worst and if you like it you have a deep personal failing that needs examining.", #nasty
"Candy corn is my favorite candy on Halloween", #best
"Candy corn is sugar and wax - nasty", #nasty
"Can't get enough candy corn love", #best
"Candy corn is evil",  #nasty
"Candy corn is bad candy"  # nasty
]
for tweet in tests:
   print classifier.classify(extractFeatures(tweet.split())),": ",tweet
</pre>
         <p>The outputs are your labels.</p>
         <p>The labels can capture <q>sentiments</q> (e.g. best vs nasty).</p>
      </div>
   </body>
</html>